/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/openai/node_modules/axios/lib/helpers/bind.js
var require_bind = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/bind.js"(exports, module2) {
    "use strict";
    module2.exports = function bind(fn, thisArg) {
      return function wrap() {
        var args = new Array(arguments.length);
        for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i];
        }
        return fn.apply(thisArg, args);
      };
    };
  }
});

// node_modules/openai/node_modules/axios/lib/utils.js
var require_utils = __commonJS({
  "node_modules/openai/node_modules/axios/lib/utils.js"(exports, module2) {
    "use strict";
    var bind = require_bind();
    var toString = Object.prototype.toString;
    function isArray(val) {
      return Array.isArray(val);
    }
    function isUndefined(val) {
      return typeof val === "undefined";
    }
    function isBuffer(val) {
      return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && typeof val.constructor.isBuffer === "function" && val.constructor.isBuffer(val);
    }
    function isArrayBuffer(val) {
      return toString.call(val) === "[object ArrayBuffer]";
    }
    function isFormData(val) {
      return toString.call(val) === "[object FormData]";
    }
    function isArrayBufferView(val) {
      var result;
      if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
        result = ArrayBuffer.isView(val);
      } else {
        result = val && val.buffer && isArrayBuffer(val.buffer);
      }
      return result;
    }
    function isString(val) {
      return typeof val === "string";
    }
    function isNumber(val) {
      return typeof val === "number";
    }
    function isObject(val) {
      return val !== null && typeof val === "object";
    }
    function isPlainObject(val) {
      if (toString.call(val) !== "[object Object]") {
        return false;
      }
      var prototype = Object.getPrototypeOf(val);
      return prototype === null || prototype === Object.prototype;
    }
    function isDate(val) {
      return toString.call(val) === "[object Date]";
    }
    function isFile(val) {
      return toString.call(val) === "[object File]";
    }
    function isBlob(val) {
      return toString.call(val) === "[object Blob]";
    }
    function isFunction(val) {
      return toString.call(val) === "[object Function]";
    }
    function isStream(val) {
      return isObject(val) && isFunction(val.pipe);
    }
    function isURLSearchParams(val) {
      return toString.call(val) === "[object URLSearchParams]";
    }
    function trim(str) {
      return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, "");
    }
    function isStandardBrowserEnv() {
      if (typeof navigator !== "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS")) {
        return false;
      }
      return typeof window !== "undefined" && typeof document !== "undefined";
    }
    function forEach(obj, fn) {
      if (obj === null || typeof obj === "undefined") {
        return;
      }
      if (typeof obj !== "object") {
        obj = [obj];
      }
      if (isArray(obj)) {
        for (var i = 0, l = obj.length; i < l; i++) {
          fn.call(null, obj[i], i, obj);
        }
      } else {
        for (var key in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, key)) {
            fn.call(null, obj[key], key, obj);
          }
        }
      }
    }
    function merge() {
      var result = {};
      function assignValue(val, key) {
        if (isPlainObject(result[key]) && isPlainObject(val)) {
          result[key] = merge(result[key], val);
        } else if (isPlainObject(val)) {
          result[key] = merge({}, val);
        } else if (isArray(val)) {
          result[key] = val.slice();
        } else {
          result[key] = val;
        }
      }
      for (var i = 0, l = arguments.length; i < l; i++) {
        forEach(arguments[i], assignValue);
      }
      return result;
    }
    function extend(a, b, thisArg) {
      forEach(b, function assignValue(val, key) {
        if (thisArg && typeof val === "function") {
          a[key] = bind(val, thisArg);
        } else {
          a[key] = val;
        }
      });
      return a;
    }
    function stripBOM(content) {
      if (content.charCodeAt(0) === 65279) {
        content = content.slice(1);
      }
      return content;
    }
    module2.exports = {
      isArray,
      isArrayBuffer,
      isBuffer,
      isFormData,
      isArrayBufferView,
      isString,
      isNumber,
      isObject,
      isPlainObject,
      isUndefined,
      isDate,
      isFile,
      isBlob,
      isFunction,
      isStream,
      isURLSearchParams,
      isStandardBrowserEnv,
      forEach,
      merge,
      extend,
      trim,
      stripBOM
    };
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/buildURL.js
var require_buildURL = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/buildURL.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    function encode(val) {
      return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
    }
    module2.exports = function buildURL(url, params, paramsSerializer) {
      if (!params) {
        return url;
      }
      var serializedParams;
      if (paramsSerializer) {
        serializedParams = paramsSerializer(params);
      } else if (utils.isURLSearchParams(params)) {
        serializedParams = params.toString();
      } else {
        var parts = [];
        utils.forEach(params, function serialize(val, key) {
          if (val === null || typeof val === "undefined") {
            return;
          }
          if (utils.isArray(val)) {
            key = key + "[]";
          } else {
            val = [val];
          }
          utils.forEach(val, function parseValue(v) {
            if (utils.isDate(v)) {
              v = v.toISOString();
            } else if (utils.isObject(v)) {
              v = JSON.stringify(v);
            }
            parts.push(encode(key) + "=" + encode(v));
          });
        });
        serializedParams = parts.join("&");
      }
      if (serializedParams) {
        var hashmarkIndex = url.indexOf("#");
        if (hashmarkIndex !== -1) {
          url = url.slice(0, hashmarkIndex);
        }
        url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
      }
      return url;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/InterceptorManager.js
var require_InterceptorManager = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/InterceptorManager.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    function InterceptorManager() {
      this.handlers = [];
    }
    InterceptorManager.prototype.use = function use(fulfilled, rejected, options) {
      this.handlers.push({
        fulfilled,
        rejected,
        synchronous: options ? options.synchronous : false,
        runWhen: options ? options.runWhen : null
      });
      return this.handlers.length - 1;
    };
    InterceptorManager.prototype.eject = function eject(id) {
      if (this.handlers[id]) {
        this.handlers[id] = null;
      }
    };
    InterceptorManager.prototype.forEach = function forEach(fn) {
      utils.forEach(this.handlers, function forEachHandler(h) {
        if (h !== null) {
          fn(h);
        }
      });
    };
    module2.exports = InterceptorManager;
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/normalizeHeaderName.js
var require_normalizeHeaderName = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/normalizeHeaderName.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = function normalizeHeaderName(headers, normalizedName) {
      utils.forEach(headers, function processHeader(value, name) {
        if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
          headers[normalizedName] = value;
          delete headers[name];
        }
      });
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/enhanceError.js
var require_enhanceError = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/enhanceError.js"(exports, module2) {
    "use strict";
    module2.exports = function enhanceError(error, config, code, request3, response) {
      error.config = config;
      if (code) {
        error.code = code;
      }
      error.request = request3;
      error.response = response;
      error.isAxiosError = true;
      error.toJSON = function toJSON() {
        return {
          message: this.message,
          name: this.name,
          description: this.description,
          number: this.number,
          fileName: this.fileName,
          lineNumber: this.lineNumber,
          columnNumber: this.columnNumber,
          stack: this.stack,
          config: this.config,
          code: this.code,
          status: this.response && this.response.status ? this.response.status : null
        };
      };
      return error;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/defaults/transitional.js
var require_transitional = __commonJS({
  "node_modules/openai/node_modules/axios/lib/defaults/transitional.js"(exports, module2) {
    "use strict";
    module2.exports = {
      silentJSONParsing: true,
      forcedJSONParsing: true,
      clarifyTimeoutError: false
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/createError.js
var require_createError = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/createError.js"(exports, module2) {
    "use strict";
    var enhanceError = require_enhanceError();
    module2.exports = function createError(message, config, code, request3, response) {
      var error = new Error(message);
      return enhanceError(error, config, code, request3, response);
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/settle.js
var require_settle = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/settle.js"(exports, module2) {
    "use strict";
    var createError = require_createError();
    module2.exports = function settle(resolve, reject, response) {
      var validateStatus = response.config.validateStatus;
      if (!response.status || !validateStatus || validateStatus(response.status)) {
        resolve(response);
      } else {
        reject(createError("Request failed with status code " + response.status, response.config, null, response.request, response));
      }
    };
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/cookies.js
var require_cookies = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/cookies.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = utils.isStandardBrowserEnv() ? function standardBrowserEnv() {
      return {
        write: function write(name, value, expires, path, domain, secure) {
          var cookie = [];
          cookie.push(name + "=" + encodeURIComponent(value));
          if (utils.isNumber(expires)) {
            cookie.push("expires=" + new Date(expires).toGMTString());
          }
          if (utils.isString(path)) {
            cookie.push("path=" + path);
          }
          if (utils.isString(domain)) {
            cookie.push("domain=" + domain);
          }
          if (secure === true) {
            cookie.push("secure");
          }
          document.cookie = cookie.join("; ");
        },
        read: function read(name) {
          var match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
          return match ? decodeURIComponent(match[3]) : null;
        },
        remove: function remove(name) {
          this.write(name, "", Date.now() - 864e5);
        }
      };
    }() : function nonStandardBrowserEnv() {
      return {
        write: function write() {
        },
        read: function read() {
          return null;
        },
        remove: function remove() {
        }
      };
    }();
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/isAbsoluteURL.js
var require_isAbsoluteURL = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/isAbsoluteURL.js"(exports, module2) {
    "use strict";
    module2.exports = function isAbsoluteURL(url) {
      return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
    };
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/combineURLs.js
var require_combineURLs = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/combineURLs.js"(exports, module2) {
    "use strict";
    module2.exports = function combineURLs(baseURL, relativeURL) {
      return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/buildFullPath.js
var require_buildFullPath = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/buildFullPath.js"(exports, module2) {
    "use strict";
    var isAbsoluteURL = require_isAbsoluteURL();
    var combineURLs = require_combineURLs();
    module2.exports = function buildFullPath(baseURL, requestedURL) {
      if (baseURL && !isAbsoluteURL(requestedURL)) {
        return combineURLs(baseURL, requestedURL);
      }
      return requestedURL;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/parseHeaders.js
var require_parseHeaders = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/parseHeaders.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var ignoreDuplicateOf = [
      "age",
      "authorization",
      "content-length",
      "content-type",
      "etag",
      "expires",
      "from",
      "host",
      "if-modified-since",
      "if-unmodified-since",
      "last-modified",
      "location",
      "max-forwards",
      "proxy-authorization",
      "referer",
      "retry-after",
      "user-agent"
    ];
    module2.exports = function parseHeaders(headers) {
      var parsed = {};
      var key;
      var val;
      var i;
      if (!headers) {
        return parsed;
      }
      utils.forEach(headers.split("\n"), function parser(line) {
        i = line.indexOf(":");
        key = utils.trim(line.substr(0, i)).toLowerCase();
        val = utils.trim(line.substr(i + 1));
        if (key) {
          if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
            return;
          }
          if (key === "set-cookie") {
            parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
          } else {
            parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
          }
        }
      });
      return parsed;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/isURLSameOrigin.js
var require_isURLSameOrigin = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/isURLSameOrigin.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = utils.isStandardBrowserEnv() ? function standardBrowserEnv() {
      var msie = /(msie|trident)/i.test(navigator.userAgent);
      var urlParsingNode = document.createElement("a");
      var originURL;
      function resolveURL(url) {
        var href = url;
        if (msie) {
          urlParsingNode.setAttribute("href", href);
          href = urlParsingNode.href;
        }
        urlParsingNode.setAttribute("href", href);
        return {
          href: urlParsingNode.href,
          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
          host: urlParsingNode.host,
          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
          hostname: urlParsingNode.hostname,
          port: urlParsingNode.port,
          pathname: urlParsingNode.pathname.charAt(0) === "/" ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
        };
      }
      originURL = resolveURL(window.location.href);
      return function isURLSameOrigin(requestURL) {
        var parsed = utils.isString(requestURL) ? resolveURL(requestURL) : requestURL;
        return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
      };
    }() : function nonStandardBrowserEnv() {
      return function isURLSameOrigin() {
        return true;
      };
    }();
  }
});

// node_modules/openai/node_modules/axios/lib/cancel/Cancel.js
var require_Cancel = __commonJS({
  "node_modules/openai/node_modules/axios/lib/cancel/Cancel.js"(exports, module2) {
    "use strict";
    function Cancel(message) {
      this.message = message;
    }
    Cancel.prototype.toString = function toString() {
      return "Cancel" + (this.message ? ": " + this.message : "");
    };
    Cancel.prototype.__CANCEL__ = true;
    module2.exports = Cancel;
  }
});

// node_modules/openai/node_modules/axios/lib/adapters/xhr.js
var require_xhr = __commonJS({
  "node_modules/openai/node_modules/axios/lib/adapters/xhr.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var settle = require_settle();
    var cookies = require_cookies();
    var buildURL = require_buildURL();
    var buildFullPath = require_buildFullPath();
    var parseHeaders = require_parseHeaders();
    var isURLSameOrigin = require_isURLSameOrigin();
    var createError = require_createError();
    var transitionalDefaults = require_transitional();
    var Cancel = require_Cancel();
    module2.exports = function xhrAdapter(config) {
      return new Promise(function dispatchXhrRequest(resolve, reject) {
        var requestData = config.data;
        var requestHeaders = config.headers;
        var responseType = config.responseType;
        var onCanceled;
        function done() {
          if (config.cancelToken) {
            config.cancelToken.unsubscribe(onCanceled);
          }
          if (config.signal) {
            config.signal.removeEventListener("abort", onCanceled);
          }
        }
        if (utils.isFormData(requestData)) {
          delete requestHeaders["Content-Type"];
        }
        var request3 = new XMLHttpRequest();
        if (config.auth) {
          var username = config.auth.username || "";
          var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : "";
          requestHeaders.Authorization = "Basic " + btoa(username + ":" + password);
        }
        var fullPath = buildFullPath(config.baseURL, config.url);
        request3.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);
        request3.timeout = config.timeout;
        function onloadend() {
          if (!request3) {
            return;
          }
          var responseHeaders = "getAllResponseHeaders" in request3 ? parseHeaders(request3.getAllResponseHeaders()) : null;
          var responseData = !responseType || responseType === "text" || responseType === "json" ? request3.responseText : request3.response;
          var response = {
            data: responseData,
            status: request3.status,
            statusText: request3.statusText,
            headers: responseHeaders,
            config,
            request: request3
          };
          settle(function _resolve(value) {
            resolve(value);
            done();
          }, function _reject(err) {
            reject(err);
            done();
          }, response);
          request3 = null;
        }
        if ("onloadend" in request3) {
          request3.onloadend = onloadend;
        } else {
          request3.onreadystatechange = function handleLoad() {
            if (!request3 || request3.readyState !== 4) {
              return;
            }
            if (request3.status === 0 && !(request3.responseURL && request3.responseURL.indexOf("file:") === 0)) {
              return;
            }
            setTimeout(onloadend);
          };
        }
        request3.onabort = function handleAbort() {
          if (!request3) {
            return;
          }
          reject(createError("Request aborted", config, "ECONNABORTED", request3));
          request3 = null;
        };
        request3.onerror = function handleError() {
          reject(createError("Network Error", config, null, request3));
          request3 = null;
        };
        request3.ontimeout = function handleTimeout() {
          var timeoutErrorMessage = config.timeout ? "timeout of " + config.timeout + "ms exceeded" : "timeout exceeded";
          var transitional = config.transitional || transitionalDefaults;
          if (config.timeoutErrorMessage) {
            timeoutErrorMessage = config.timeoutErrorMessage;
          }
          reject(createError(timeoutErrorMessage, config, transitional.clarifyTimeoutError ? "ETIMEDOUT" : "ECONNABORTED", request3));
          request3 = null;
        };
        if (utils.isStandardBrowserEnv()) {
          var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ? cookies.read(config.xsrfCookieName) : void 0;
          if (xsrfValue) {
            requestHeaders[config.xsrfHeaderName] = xsrfValue;
          }
        }
        if ("setRequestHeader" in request3) {
          utils.forEach(requestHeaders, function setRequestHeader(val, key) {
            if (typeof requestData === "undefined" && key.toLowerCase() === "content-type") {
              delete requestHeaders[key];
            } else {
              request3.setRequestHeader(key, val);
            }
          });
        }
        if (!utils.isUndefined(config.withCredentials)) {
          request3.withCredentials = !!config.withCredentials;
        }
        if (responseType && responseType !== "json") {
          request3.responseType = config.responseType;
        }
        if (typeof config.onDownloadProgress === "function") {
          request3.addEventListener("progress", config.onDownloadProgress);
        }
        if (typeof config.onUploadProgress === "function" && request3.upload) {
          request3.upload.addEventListener("progress", config.onUploadProgress);
        }
        if (config.cancelToken || config.signal) {
          onCanceled = function(cancel) {
            if (!request3) {
              return;
            }
            reject(!cancel || cancel && cancel.type ? new Cancel("canceled") : cancel);
            request3.abort();
            request3 = null;
          };
          config.cancelToken && config.cancelToken.subscribe(onCanceled);
          if (config.signal) {
            config.signal.aborted ? onCanceled() : config.signal.addEventListener("abort", onCanceled);
          }
        }
        if (!requestData) {
          requestData = null;
        }
        request3.send(requestData);
      });
    };
  }
});

// node_modules/openai/node_modules/axios/lib/defaults/index.js
var require_defaults = __commonJS({
  "node_modules/openai/node_modules/axios/lib/defaults/index.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var normalizeHeaderName = require_normalizeHeaderName();
    var enhanceError = require_enhanceError();
    var transitionalDefaults = require_transitional();
    var DEFAULT_CONTENT_TYPE = {
      "Content-Type": "application/x-www-form-urlencoded"
    };
    function setContentTypeIfUnset(headers, value) {
      if (!utils.isUndefined(headers) && utils.isUndefined(headers["Content-Type"])) {
        headers["Content-Type"] = value;
      }
    }
    function getDefaultAdapter() {
      var adapter;
      if (typeof XMLHttpRequest !== "undefined") {
        adapter = require_xhr();
      } else if (typeof process !== "undefined" && Object.prototype.toString.call(process) === "[object process]") {
        adapter = require_xhr();
      }
      return adapter;
    }
    function stringifySafely(rawValue, parser, encoder) {
      if (utils.isString(rawValue)) {
        try {
          (parser || JSON.parse)(rawValue);
          return utils.trim(rawValue);
        } catch (e) {
          if (e.name !== "SyntaxError") {
            throw e;
          }
        }
      }
      return (encoder || JSON.stringify)(rawValue);
    }
    var defaults = {
      transitional: transitionalDefaults,
      adapter: getDefaultAdapter(),
      transformRequest: [function transformRequest(data, headers) {
        normalizeHeaderName(headers, "Accept");
        normalizeHeaderName(headers, "Content-Type");
        if (utils.isFormData(data) || utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data)) {
          return data;
        }
        if (utils.isArrayBufferView(data)) {
          return data.buffer;
        }
        if (utils.isURLSearchParams(data)) {
          setContentTypeIfUnset(headers, "application/x-www-form-urlencoded;charset=utf-8");
          return data.toString();
        }
        if (utils.isObject(data) || headers && headers["Content-Type"] === "application/json") {
          setContentTypeIfUnset(headers, "application/json");
          return stringifySafely(data);
        }
        return data;
      }],
      transformResponse: [function transformResponse(data) {
        var transitional = this.transitional || defaults.transitional;
        var silentJSONParsing = transitional && transitional.silentJSONParsing;
        var forcedJSONParsing = transitional && transitional.forcedJSONParsing;
        var strictJSONParsing = !silentJSONParsing && this.responseType === "json";
        if (strictJSONParsing || forcedJSONParsing && utils.isString(data) && data.length) {
          try {
            return JSON.parse(data);
          } catch (e) {
            if (strictJSONParsing) {
              if (e.name === "SyntaxError") {
                throw enhanceError(e, this, "E_JSON_PARSE");
              }
              throw e;
            }
          }
        }
        return data;
      }],
      timeout: 0,
      xsrfCookieName: "XSRF-TOKEN",
      xsrfHeaderName: "X-XSRF-TOKEN",
      maxContentLength: -1,
      maxBodyLength: -1,
      validateStatus: function validateStatus(status) {
        return status >= 200 && status < 300;
      },
      headers: {
        common: {
          "Accept": "application/json, text/plain, */*"
        }
      }
    };
    utils.forEach(["delete", "get", "head"], function forEachMethodNoData(method) {
      defaults.headers[method] = {};
    });
    utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
      defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
    });
    module2.exports = defaults;
  }
});

// node_modules/openai/node_modules/axios/lib/core/transformData.js
var require_transformData = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/transformData.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var defaults = require_defaults();
    module2.exports = function transformData(data, headers, fns) {
      var context = this || defaults;
      utils.forEach(fns, function transform(fn) {
        data = fn.call(context, data, headers);
      });
      return data;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/cancel/isCancel.js
var require_isCancel = __commonJS({
  "node_modules/openai/node_modules/axios/lib/cancel/isCancel.js"(exports, module2) {
    "use strict";
    module2.exports = function isCancel(value) {
      return !!(value && value.__CANCEL__);
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/dispatchRequest.js
var require_dispatchRequest = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/dispatchRequest.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var transformData = require_transformData();
    var isCancel = require_isCancel();
    var defaults = require_defaults();
    var Cancel = require_Cancel();
    function throwIfCancellationRequested(config) {
      if (config.cancelToken) {
        config.cancelToken.throwIfRequested();
      }
      if (config.signal && config.signal.aborted) {
        throw new Cancel("canceled");
      }
    }
    module2.exports = function dispatchRequest(config) {
      throwIfCancellationRequested(config);
      config.headers = config.headers || {};
      config.data = transformData.call(config, config.data, config.headers, config.transformRequest);
      config.headers = utils.merge(config.headers.common || {}, config.headers[config.method] || {}, config.headers);
      utils.forEach(["delete", "get", "head", "post", "put", "patch", "common"], function cleanHeaderConfig(method) {
        delete config.headers[method];
      });
      var adapter = config.adapter || defaults.adapter;
      return adapter(config).then(function onAdapterResolution(response) {
        throwIfCancellationRequested(config);
        response.data = transformData.call(config, response.data, response.headers, config.transformResponse);
        return response;
      }, function onAdapterRejection(reason) {
        if (!isCancel(reason)) {
          throwIfCancellationRequested(config);
          if (reason && reason.response) {
            reason.response.data = transformData.call(config, reason.response.data, reason.response.headers, config.transformResponse);
          }
        }
        return Promise.reject(reason);
      });
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/mergeConfig.js
var require_mergeConfig = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/mergeConfig.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = function mergeConfig(config1, config2) {
      config2 = config2 || {};
      var config = {};
      function getMergedValue(target, source) {
        if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
          return utils.merge(target, source);
        } else if (utils.isPlainObject(source)) {
          return utils.merge({}, source);
        } else if (utils.isArray(source)) {
          return source.slice();
        }
        return source;
      }
      function mergeDeepProperties(prop) {
        if (!utils.isUndefined(config2[prop])) {
          return getMergedValue(config1[prop], config2[prop]);
        } else if (!utils.isUndefined(config1[prop])) {
          return getMergedValue(void 0, config1[prop]);
        }
      }
      function valueFromConfig2(prop) {
        if (!utils.isUndefined(config2[prop])) {
          return getMergedValue(void 0, config2[prop]);
        }
      }
      function defaultToConfig2(prop) {
        if (!utils.isUndefined(config2[prop])) {
          return getMergedValue(void 0, config2[prop]);
        } else if (!utils.isUndefined(config1[prop])) {
          return getMergedValue(void 0, config1[prop]);
        }
      }
      function mergeDirectKeys(prop) {
        if (prop in config2) {
          return getMergedValue(config1[prop], config2[prop]);
        } else if (prop in config1) {
          return getMergedValue(void 0, config1[prop]);
        }
      }
      var mergeMap = {
        "url": valueFromConfig2,
        "method": valueFromConfig2,
        "data": valueFromConfig2,
        "baseURL": defaultToConfig2,
        "transformRequest": defaultToConfig2,
        "transformResponse": defaultToConfig2,
        "paramsSerializer": defaultToConfig2,
        "timeout": defaultToConfig2,
        "timeoutMessage": defaultToConfig2,
        "withCredentials": defaultToConfig2,
        "adapter": defaultToConfig2,
        "responseType": defaultToConfig2,
        "xsrfCookieName": defaultToConfig2,
        "xsrfHeaderName": defaultToConfig2,
        "onUploadProgress": defaultToConfig2,
        "onDownloadProgress": defaultToConfig2,
        "decompress": defaultToConfig2,
        "maxContentLength": defaultToConfig2,
        "maxBodyLength": defaultToConfig2,
        "transport": defaultToConfig2,
        "httpAgent": defaultToConfig2,
        "httpsAgent": defaultToConfig2,
        "cancelToken": defaultToConfig2,
        "socketPath": defaultToConfig2,
        "responseEncoding": defaultToConfig2,
        "validateStatus": mergeDirectKeys
      };
      utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
        var merge = mergeMap[prop] || mergeDeepProperties;
        var configValue = merge(prop);
        utils.isUndefined(configValue) && merge !== mergeDirectKeys || (config[prop] = configValue);
      });
      return config;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/env/data.js
var require_data = __commonJS({
  "node_modules/openai/node_modules/axios/lib/env/data.js"(exports, module2) {
    module2.exports = {
      "version": "0.26.1"
    };
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/validator.js
var require_validator = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/validator.js"(exports, module2) {
    "use strict";
    var VERSION = require_data().version;
    var validators = {};
    ["object", "boolean", "number", "function", "string", "symbol"].forEach(function(type, i) {
      validators[type] = function validator(thing) {
        return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
      };
    });
    var deprecatedWarnings = {};
    validators.transitional = function transitional(validator, version, message) {
      function formatMessage(opt, desc) {
        return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
      }
      return function(value, opt, opts) {
        if (validator === false) {
          throw new Error(formatMessage(opt, " has been removed" + (version ? " in " + version : "")));
        }
        if (version && !deprecatedWarnings[opt]) {
          deprecatedWarnings[opt] = true;
          console.warn(formatMessage(opt, " has been deprecated since v" + version + " and will be removed in the near future"));
        }
        return validator ? validator(value, opt, opts) : true;
      };
    };
    function assertOptions(options, schema, allowUnknown) {
      if (typeof options !== "object") {
        throw new TypeError("options must be an object");
      }
      var keys = Object.keys(options);
      var i = keys.length;
      while (i-- > 0) {
        var opt = keys[i];
        var validator = schema[opt];
        if (validator) {
          var value = options[opt];
          var result = value === void 0 || validator(value, opt, options);
          if (result !== true) {
            throw new TypeError("option " + opt + " must be " + result);
          }
          continue;
        }
        if (allowUnknown !== true) {
          throw Error("Unknown option " + opt);
        }
      }
    }
    module2.exports = {
      assertOptions,
      validators
    };
  }
});

// node_modules/openai/node_modules/axios/lib/core/Axios.js
var require_Axios = __commonJS({
  "node_modules/openai/node_modules/axios/lib/core/Axios.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var buildURL = require_buildURL();
    var InterceptorManager = require_InterceptorManager();
    var dispatchRequest = require_dispatchRequest();
    var mergeConfig = require_mergeConfig();
    var validator = require_validator();
    var validators = validator.validators;
    function Axios(instanceConfig) {
      this.defaults = instanceConfig;
      this.interceptors = {
        request: new InterceptorManager(),
        response: new InterceptorManager()
      };
    }
    Axios.prototype.request = function request3(configOrUrl, config) {
      if (typeof configOrUrl === "string") {
        config = config || {};
        config.url = configOrUrl;
      } else {
        config = configOrUrl || {};
      }
      config = mergeConfig(this.defaults, config);
      if (config.method) {
        config.method = config.method.toLowerCase();
      } else if (this.defaults.method) {
        config.method = this.defaults.method.toLowerCase();
      } else {
        config.method = "get";
      }
      var transitional = config.transitional;
      if (transitional !== void 0) {
        validator.assertOptions(transitional, {
          silentJSONParsing: validators.transitional(validators.boolean),
          forcedJSONParsing: validators.transitional(validators.boolean),
          clarifyTimeoutError: validators.transitional(validators.boolean)
        }, false);
      }
      var requestInterceptorChain = [];
      var synchronousRequestInterceptors = true;
      this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
        if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
          return;
        }
        synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
        requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
      });
      var responseInterceptorChain = [];
      this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
        responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
      });
      var promise;
      if (!synchronousRequestInterceptors) {
        var chain = [dispatchRequest, void 0];
        Array.prototype.unshift.apply(chain, requestInterceptorChain);
        chain = chain.concat(responseInterceptorChain);
        promise = Promise.resolve(config);
        while (chain.length) {
          promise = promise.then(chain.shift(), chain.shift());
        }
        return promise;
      }
      var newConfig = config;
      while (requestInterceptorChain.length) {
        var onFulfilled = requestInterceptorChain.shift();
        var onRejected = requestInterceptorChain.shift();
        try {
          newConfig = onFulfilled(newConfig);
        } catch (error) {
          onRejected(error);
          break;
        }
      }
      try {
        promise = dispatchRequest(newConfig);
      } catch (error) {
        return Promise.reject(error);
      }
      while (responseInterceptorChain.length) {
        promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());
      }
      return promise;
    };
    Axios.prototype.getUri = function getUri(config) {
      config = mergeConfig(this.defaults, config);
      return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, "");
    };
    utils.forEach(["delete", "get", "head", "options"], function forEachMethodNoData(method) {
      Axios.prototype[method] = function(url, config) {
        return this.request(mergeConfig(config || {}, {
          method,
          url,
          data: (config || {}).data
        }));
      };
    });
    utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
      Axios.prototype[method] = function(url, data, config) {
        return this.request(mergeConfig(config || {}, {
          method,
          url,
          data
        }));
      };
    });
    module2.exports = Axios;
  }
});

// node_modules/openai/node_modules/axios/lib/cancel/CancelToken.js
var require_CancelToken = __commonJS({
  "node_modules/openai/node_modules/axios/lib/cancel/CancelToken.js"(exports, module2) {
    "use strict";
    var Cancel = require_Cancel();
    function CancelToken(executor) {
      if (typeof executor !== "function") {
        throw new TypeError("executor must be a function.");
      }
      var resolvePromise;
      this.promise = new Promise(function promiseExecutor(resolve) {
        resolvePromise = resolve;
      });
      var token = this;
      this.promise.then(function(cancel) {
        if (!token._listeners)
          return;
        var i;
        var l = token._listeners.length;
        for (i = 0; i < l; i++) {
          token._listeners[i](cancel);
        }
        token._listeners = null;
      });
      this.promise.then = function(onfulfilled) {
        var _resolve;
        var promise = new Promise(function(resolve) {
          token.subscribe(resolve);
          _resolve = resolve;
        }).then(onfulfilled);
        promise.cancel = function reject() {
          token.unsubscribe(_resolve);
        };
        return promise;
      };
      executor(function cancel(message) {
        if (token.reason) {
          return;
        }
        token.reason = new Cancel(message);
        resolvePromise(token.reason);
      });
    }
    CancelToken.prototype.throwIfRequested = function throwIfRequested() {
      if (this.reason) {
        throw this.reason;
      }
    };
    CancelToken.prototype.subscribe = function subscribe(listener) {
      if (this.reason) {
        listener(this.reason);
        return;
      }
      if (this._listeners) {
        this._listeners.push(listener);
      } else {
        this._listeners = [listener];
      }
    };
    CancelToken.prototype.unsubscribe = function unsubscribe(listener) {
      if (!this._listeners) {
        return;
      }
      var index = this._listeners.indexOf(listener);
      if (index !== -1) {
        this._listeners.splice(index, 1);
      }
    };
    CancelToken.source = function source() {
      var cancel;
      var token = new CancelToken(function executor(c) {
        cancel = c;
      });
      return {
        token,
        cancel
      };
    };
    module2.exports = CancelToken;
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/spread.js
var require_spread = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/spread.js"(exports, module2) {
    "use strict";
    module2.exports = function spread(callback) {
      return function wrap(arr) {
        return callback.apply(null, arr);
      };
    };
  }
});

// node_modules/openai/node_modules/axios/lib/helpers/isAxiosError.js
var require_isAxiosError = __commonJS({
  "node_modules/openai/node_modules/axios/lib/helpers/isAxiosError.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = function isAxiosError(payload) {
      return utils.isObject(payload) && payload.isAxiosError === true;
    };
  }
});

// node_modules/openai/node_modules/axios/lib/axios.js
var require_axios = __commonJS({
  "node_modules/openai/node_modules/axios/lib/axios.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var bind = require_bind();
    var Axios = require_Axios();
    var mergeConfig = require_mergeConfig();
    var defaults = require_defaults();
    function createInstance(defaultConfig) {
      var context = new Axios(defaultConfig);
      var instance = bind(Axios.prototype.request, context);
      utils.extend(instance, Axios.prototype, context);
      utils.extend(instance, context);
      instance.create = function create(instanceConfig) {
        return createInstance(mergeConfig(defaultConfig, instanceConfig));
      };
      return instance;
    }
    var axios = createInstance(defaults);
    axios.Axios = Axios;
    axios.Cancel = require_Cancel();
    axios.CancelToken = require_CancelToken();
    axios.isCancel = require_isCancel();
    axios.VERSION = require_data().version;
    axios.all = function all(promises) {
      return Promise.all(promises);
    };
    axios.spread = require_spread();
    axios.isAxiosError = require_isAxiosError();
    module2.exports = axios;
    module2.exports.default = axios;
  }
});

// node_modules/openai/node_modules/axios/index.js
var require_axios2 = __commonJS({
  "node_modules/openai/node_modules/axios/index.js"(exports, module2) {
    module2.exports = require_axios();
  }
});

// node_modules/openai/dist/base.js
var require_base = __commonJS({
  "node_modules/openai/dist/base.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.RequiredError = exports.BaseAPI = exports.COLLECTION_FORMATS = exports.BASE_PATH = void 0;
    var axios_1 = require_axios2();
    exports.BASE_PATH = "https://api.openai.com/v1".replace(/\/+$/, "");
    exports.COLLECTION_FORMATS = {
      csv: ",",
      ssv: " ",
      tsv: "	",
      pipes: "|"
    };
    var BaseAPI = class {
      constructor(configuration, basePath = exports.BASE_PATH, axios = axios_1.default) {
        this.basePath = basePath;
        this.axios = axios;
        if (configuration) {
          this.configuration = configuration;
          this.basePath = configuration.basePath || this.basePath;
        }
      }
    };
    exports.BaseAPI = BaseAPI;
    var RequiredError = class extends Error {
      constructor(field, msg) {
        super(msg);
        this.field = field;
        this.name = "RequiredError";
      }
    };
    exports.RequiredError = RequiredError;
  }
});

// node_modules/openai/dist/common.js
var require_common = __commonJS({
  "node_modules/openai/dist/common.js"(exports) {
    "use strict";
    var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.createRequestFunction = exports.toPathString = exports.serializeDataIfNeeded = exports.setSearchParams = exports.setOAuthToObject = exports.setBearerAuthToObject = exports.setBasicAuthToObject = exports.setApiKeyToObject = exports.assertParamExists = exports.DUMMY_BASE_URL = void 0;
    var base_1 = require_base();
    exports.DUMMY_BASE_URL = "https://example.com";
    exports.assertParamExists = function(functionName, paramName, paramValue) {
      if (paramValue === null || paramValue === void 0) {
        throw new base_1.RequiredError(paramName, `Required parameter ${paramName} was null or undefined when calling ${functionName}.`);
      }
    };
    exports.setApiKeyToObject = function(object, keyParamName, configuration) {
      return __awaiter(this, void 0, void 0, function* () {
        if (configuration && configuration.apiKey) {
          const localVarApiKeyValue = typeof configuration.apiKey === "function" ? yield configuration.apiKey(keyParamName) : yield configuration.apiKey;
          object[keyParamName] = localVarApiKeyValue;
        }
      });
    };
    exports.setBasicAuthToObject = function(object, configuration) {
      if (configuration && (configuration.username || configuration.password)) {
        object["auth"] = { username: configuration.username, password: configuration.password };
      }
    };
    exports.setBearerAuthToObject = function(object, configuration) {
      return __awaiter(this, void 0, void 0, function* () {
        if (configuration && configuration.accessToken) {
          const accessToken = typeof configuration.accessToken === "function" ? yield configuration.accessToken() : yield configuration.accessToken;
          object["Authorization"] = "Bearer " + accessToken;
        }
      });
    };
    exports.setOAuthToObject = function(object, name, scopes, configuration) {
      return __awaiter(this, void 0, void 0, function* () {
        if (configuration && configuration.accessToken) {
          const localVarAccessTokenValue = typeof configuration.accessToken === "function" ? yield configuration.accessToken(name, scopes) : yield configuration.accessToken;
          object["Authorization"] = "Bearer " + localVarAccessTokenValue;
        }
      });
    };
    function setFlattenedQueryParams(urlSearchParams, parameter, key = "") {
      if (parameter == null)
        return;
      if (typeof parameter === "object") {
        if (Array.isArray(parameter)) {
          parameter.forEach((item) => setFlattenedQueryParams(urlSearchParams, item, key));
        } else {
          Object.keys(parameter).forEach((currentKey) => setFlattenedQueryParams(urlSearchParams, parameter[currentKey], `${key}${key !== "" ? "." : ""}${currentKey}`));
        }
      } else {
        if (urlSearchParams.has(key)) {
          urlSearchParams.append(key, parameter);
        } else {
          urlSearchParams.set(key, parameter);
        }
      }
    }
    exports.setSearchParams = function(url, ...objects) {
      const searchParams = new URLSearchParams(url.search);
      setFlattenedQueryParams(searchParams, objects);
      url.search = searchParams.toString();
    };
    exports.serializeDataIfNeeded = function(value, requestOptions, configuration) {
      const nonString = typeof value !== "string";
      const needsSerialization = nonString && configuration && configuration.isJsonMime ? configuration.isJsonMime(requestOptions.headers["Content-Type"]) : nonString;
      return needsSerialization ? JSON.stringify(value !== void 0 ? value : {}) : value || "";
    };
    exports.toPathString = function(url) {
      return url.pathname + url.search + url.hash;
    };
    exports.createRequestFunction = function(axiosArgs, globalAxios, BASE_PATH, configuration) {
      return (axios = globalAxios, basePath = BASE_PATH) => {
        const axiosRequestArgs = Object.assign(Object.assign({}, axiosArgs.options), { url: ((configuration === null || configuration === void 0 ? void 0 : configuration.basePath) || basePath) + axiosArgs.url });
        return axios.request(axiosRequestArgs);
      };
    };
  }
});

// node_modules/openai/dist/api.js
var require_api = __commonJS({
  "node_modules/openai/dist/api.js"(exports) {
    "use strict";
    var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.OpenAIApi = exports.OpenAIApiFactory = exports.OpenAIApiFp = exports.OpenAIApiAxiosParamCreator = exports.CreateImageRequestResponseFormatEnum = exports.CreateImageRequestSizeEnum = exports.ChatCompletionResponseMessageRoleEnum = exports.ChatCompletionRequestMessageRoleEnum = void 0;
    var axios_1 = require_axios2();
    var common_1 = require_common();
    var base_1 = require_base();
    exports.ChatCompletionRequestMessageRoleEnum = {
      System: "system",
      User: "user",
      Assistant: "assistant"
    };
    exports.ChatCompletionResponseMessageRoleEnum = {
      System: "system",
      User: "user",
      Assistant: "assistant"
    };
    exports.CreateImageRequestSizeEnum = {
      _256x256: "256x256",
      _512x512: "512x512",
      _1024x1024: "1024x1024"
    };
    exports.CreateImageRequestResponseFormatEnum = {
      Url: "url",
      B64Json: "b64_json"
    };
    exports.OpenAIApiAxiosParamCreator = function(configuration) {
      return {
        cancelFineTune: (fineTuneId, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("cancelFineTune", "fineTuneId", fineTuneId);
          const localVarPath = `/fine-tunes/{fine_tune_id}/cancel`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createAnswer: (createAnswerRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createAnswer", "createAnswerRequest", createAnswerRequest);
          const localVarPath = `/answers`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createAnswerRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createChatCompletion: (createChatCompletionRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createChatCompletion", "createChatCompletionRequest", createChatCompletionRequest);
          const localVarPath = `/chat/completions`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createChatCompletionRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createClassification: (createClassificationRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createClassification", "createClassificationRequest", createClassificationRequest);
          const localVarPath = `/classifications`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createClassificationRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createCompletion: (createCompletionRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createCompletion", "createCompletionRequest", createCompletionRequest);
          const localVarPath = `/completions`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createCompletionRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createEdit: (createEditRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createEdit", "createEditRequest", createEditRequest);
          const localVarPath = `/edits`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createEditRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createEmbedding: (createEmbeddingRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createEmbedding", "createEmbeddingRequest", createEmbeddingRequest);
          const localVarPath = `/embeddings`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createEmbeddingRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createFile: (file, purpose, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createFile", "file", file);
          common_1.assertParamExists("createFile", "purpose", purpose);
          const localVarPath = `/files`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          const localVarFormParams = new (configuration && configuration.formDataCtor || FormData)();
          if (file !== void 0) {
            localVarFormParams.append("file", file);
          }
          if (purpose !== void 0) {
            localVarFormParams.append("purpose", purpose);
          }
          localVarHeaderParameter["Content-Type"] = "multipart/form-data";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = localVarFormParams;
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createFineTune: (createFineTuneRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createFineTune", "createFineTuneRequest", createFineTuneRequest);
          const localVarPath = `/fine-tunes`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createFineTuneRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createImage: (createImageRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createImage", "createImageRequest", createImageRequest);
          const localVarPath = `/images/generations`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createImageRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createImageEdit: (image, prompt, mask, n, size, responseFormat, user, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createImageEdit", "image", image);
          common_1.assertParamExists("createImageEdit", "prompt", prompt);
          const localVarPath = `/images/edits`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          const localVarFormParams = new (configuration && configuration.formDataCtor || FormData)();
          if (image !== void 0) {
            localVarFormParams.append("image", image);
          }
          if (mask !== void 0) {
            localVarFormParams.append("mask", mask);
          }
          if (prompt !== void 0) {
            localVarFormParams.append("prompt", prompt);
          }
          if (n !== void 0) {
            localVarFormParams.append("n", n);
          }
          if (size !== void 0) {
            localVarFormParams.append("size", size);
          }
          if (responseFormat !== void 0) {
            localVarFormParams.append("response_format", responseFormat);
          }
          if (user !== void 0) {
            localVarFormParams.append("user", user);
          }
          localVarHeaderParameter["Content-Type"] = "multipart/form-data";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = localVarFormParams;
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createImageVariation: (image, n, size, responseFormat, user, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createImageVariation", "image", image);
          const localVarPath = `/images/variations`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          const localVarFormParams = new (configuration && configuration.formDataCtor || FormData)();
          if (image !== void 0) {
            localVarFormParams.append("image", image);
          }
          if (n !== void 0) {
            localVarFormParams.append("n", n);
          }
          if (size !== void 0) {
            localVarFormParams.append("size", size);
          }
          if (responseFormat !== void 0) {
            localVarFormParams.append("response_format", responseFormat);
          }
          if (user !== void 0) {
            localVarFormParams.append("user", user);
          }
          localVarHeaderParameter["Content-Type"] = "multipart/form-data";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = localVarFormParams;
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createModeration: (createModerationRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createModeration", "createModerationRequest", createModerationRequest);
          const localVarPath = `/moderations`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createModerationRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createSearch: (engineId, createSearchRequest, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createSearch", "engineId", engineId);
          common_1.assertParamExists("createSearch", "createSearchRequest", createSearchRequest);
          const localVarPath = `/engines/{engine_id}/search`.replace(`{${"engine_id"}}`, encodeURIComponent(String(engineId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          localVarHeaderParameter["Content-Type"] = "application/json";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = common_1.serializeDataIfNeeded(createSearchRequest, localVarRequestOptions, configuration);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createTranscription: (file, model, prompt, responseFormat, temperature, language, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createTranscription", "file", file);
          common_1.assertParamExists("createTranscription", "model", model);
          const localVarPath = `/audio/transcriptions`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          const localVarFormParams = new (configuration && configuration.formDataCtor || FormData)();
          if (file !== void 0) {
            localVarFormParams.append("file", file);
          }
          if (model !== void 0) {
            localVarFormParams.append("model", model);
          }
          if (prompt !== void 0) {
            localVarFormParams.append("prompt", prompt);
          }
          if (responseFormat !== void 0) {
            localVarFormParams.append("response_format", responseFormat);
          }
          if (temperature !== void 0) {
            localVarFormParams.append("temperature", temperature);
          }
          if (language !== void 0) {
            localVarFormParams.append("language", language);
          }
          localVarHeaderParameter["Content-Type"] = "multipart/form-data";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = localVarFormParams;
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        createTranslation: (file, model, prompt, responseFormat, temperature, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("createTranslation", "file", file);
          common_1.assertParamExists("createTranslation", "model", model);
          const localVarPath = `/audio/translations`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          const localVarFormParams = new (configuration && configuration.formDataCtor || FormData)();
          if (file !== void 0) {
            localVarFormParams.append("file", file);
          }
          if (model !== void 0) {
            localVarFormParams.append("model", model);
          }
          if (prompt !== void 0) {
            localVarFormParams.append("prompt", prompt);
          }
          if (responseFormat !== void 0) {
            localVarFormParams.append("response_format", responseFormat);
          }
          if (temperature !== void 0) {
            localVarFormParams.append("temperature", temperature);
          }
          localVarHeaderParameter["Content-Type"] = "multipart/form-data";
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options.headers);
          localVarRequestOptions.data = localVarFormParams;
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        deleteFile: (fileId, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("deleteFile", "fileId", fileId);
          const localVarPath = `/files/{file_id}`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "DELETE" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        deleteModel: (model, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("deleteModel", "model", model);
          const localVarPath = `/models/{model}`.replace(`{${"model"}}`, encodeURIComponent(String(model)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "DELETE" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        downloadFile: (fileId, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("downloadFile", "fileId", fileId);
          const localVarPath = `/files/{file_id}/content`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        listEngines: (options = {}) => __awaiter(this, void 0, void 0, function* () {
          const localVarPath = `/engines`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        listFiles: (options = {}) => __awaiter(this, void 0, void 0, function* () {
          const localVarPath = `/files`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        listFineTuneEvents: (fineTuneId, stream, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("listFineTuneEvents", "fineTuneId", fineTuneId);
          const localVarPath = `/fine-tunes/{fine_tune_id}/events`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          if (stream !== void 0) {
            localVarQueryParameter["stream"] = stream;
          }
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        listFineTunes: (options = {}) => __awaiter(this, void 0, void 0, function* () {
          const localVarPath = `/fine-tunes`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        listModels: (options = {}) => __awaiter(this, void 0, void 0, function* () {
          const localVarPath = `/models`;
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        retrieveEngine: (engineId, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("retrieveEngine", "engineId", engineId);
          const localVarPath = `/engines/{engine_id}`.replace(`{${"engine_id"}}`, encodeURIComponent(String(engineId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        retrieveFile: (fileId, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("retrieveFile", "fileId", fileId);
          const localVarPath = `/files/{file_id}`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        retrieveFineTune: (fineTuneId, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("retrieveFineTune", "fineTuneId", fineTuneId);
          const localVarPath = `/fine-tunes/{fine_tune_id}`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        }),
        retrieveModel: (model, options = {}) => __awaiter(this, void 0, void 0, function* () {
          common_1.assertParamExists("retrieveModel", "model", model);
          const localVarPath = `/models/{model}`.replace(`{${"model"}}`, encodeURIComponent(String(model)));
          const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
          let baseOptions;
          if (configuration) {
            baseOptions = configuration.baseOptions;
          }
          const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options);
          const localVarHeaderParameter = {};
          const localVarQueryParameter = {};
          common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
          let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
          localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options.headers);
          return {
            url: common_1.toPathString(localVarUrlObj),
            options: localVarRequestOptions
          };
        })
      };
    };
    exports.OpenAIApiFp = function(configuration) {
      const localVarAxiosParamCreator = exports.OpenAIApiAxiosParamCreator(configuration);
      return {
        cancelFineTune(fineTuneId, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.cancelFineTune(fineTuneId, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createAnswer(createAnswerRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createAnswer(createAnswerRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createChatCompletion(createChatCompletionRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createChatCompletion(createChatCompletionRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createClassification(createClassificationRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createClassification(createClassificationRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createCompletion(createCompletionRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createCompletion(createCompletionRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createEdit(createEditRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createEdit(createEditRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createEmbedding(createEmbeddingRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createEmbedding(createEmbeddingRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createFile(file, purpose, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createFile(file, purpose, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createFineTune(createFineTuneRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createFineTune(createFineTuneRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createImage(createImageRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createImage(createImageRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createImageEdit(image, prompt, mask, n, size, responseFormat, user, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createImageEdit(image, prompt, mask, n, size, responseFormat, user, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createImageVariation(image, n, size, responseFormat, user, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createImageVariation(image, n, size, responseFormat, user, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createModeration(createModerationRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createModeration(createModerationRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createSearch(engineId, createSearchRequest, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createSearch(engineId, createSearchRequest, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createTranscription(file, model, prompt, responseFormat, temperature, language, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createTranscription(file, model, prompt, responseFormat, temperature, language, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        createTranslation(file, model, prompt, responseFormat, temperature, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.createTranslation(file, model, prompt, responseFormat, temperature, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        deleteFile(fileId, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.deleteFile(fileId, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        deleteModel(model, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.deleteModel(model, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        downloadFile(fileId, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.downloadFile(fileId, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        listEngines(options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.listEngines(options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        listFiles(options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.listFiles(options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        listFineTuneEvents(fineTuneId, stream, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.listFineTuneEvents(fineTuneId, stream, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        listFineTunes(options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.listFineTunes(options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        listModels(options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.listModels(options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        retrieveEngine(engineId, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveEngine(engineId, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        retrieveFile(fileId, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveFile(fileId, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        retrieveFineTune(fineTuneId, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveFineTune(fineTuneId, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        },
        retrieveModel(model, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveModel(model, options);
            return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_1.BASE_PATH, configuration);
          });
        }
      };
    };
    exports.OpenAIApiFactory = function(configuration, basePath, axios) {
      const localVarFp = exports.OpenAIApiFp(configuration);
      return {
        cancelFineTune(fineTuneId, options) {
          return localVarFp.cancelFineTune(fineTuneId, options).then((request3) => request3(axios, basePath));
        },
        createAnswer(createAnswerRequest, options) {
          return localVarFp.createAnswer(createAnswerRequest, options).then((request3) => request3(axios, basePath));
        },
        createChatCompletion(createChatCompletionRequest, options) {
          return localVarFp.createChatCompletion(createChatCompletionRequest, options).then((request3) => request3(axios, basePath));
        },
        createClassification(createClassificationRequest, options) {
          return localVarFp.createClassification(createClassificationRequest, options).then((request3) => request3(axios, basePath));
        },
        createCompletion(createCompletionRequest, options) {
          return localVarFp.createCompletion(createCompletionRequest, options).then((request3) => request3(axios, basePath));
        },
        createEdit(createEditRequest, options) {
          return localVarFp.createEdit(createEditRequest, options).then((request3) => request3(axios, basePath));
        },
        createEmbedding(createEmbeddingRequest, options) {
          return localVarFp.createEmbedding(createEmbeddingRequest, options).then((request3) => request3(axios, basePath));
        },
        createFile(file, purpose, options) {
          return localVarFp.createFile(file, purpose, options).then((request3) => request3(axios, basePath));
        },
        createFineTune(createFineTuneRequest, options) {
          return localVarFp.createFineTune(createFineTuneRequest, options).then((request3) => request3(axios, basePath));
        },
        createImage(createImageRequest, options) {
          return localVarFp.createImage(createImageRequest, options).then((request3) => request3(axios, basePath));
        },
        createImageEdit(image, prompt, mask, n, size, responseFormat, user, options) {
          return localVarFp.createImageEdit(image, prompt, mask, n, size, responseFormat, user, options).then((request3) => request3(axios, basePath));
        },
        createImageVariation(image, n, size, responseFormat, user, options) {
          return localVarFp.createImageVariation(image, n, size, responseFormat, user, options).then((request3) => request3(axios, basePath));
        },
        createModeration(createModerationRequest, options) {
          return localVarFp.createModeration(createModerationRequest, options).then((request3) => request3(axios, basePath));
        },
        createSearch(engineId, createSearchRequest, options) {
          return localVarFp.createSearch(engineId, createSearchRequest, options).then((request3) => request3(axios, basePath));
        },
        createTranscription(file, model, prompt, responseFormat, temperature, language, options) {
          return localVarFp.createTranscription(file, model, prompt, responseFormat, temperature, language, options).then((request3) => request3(axios, basePath));
        },
        createTranslation(file, model, prompt, responseFormat, temperature, options) {
          return localVarFp.createTranslation(file, model, prompt, responseFormat, temperature, options).then((request3) => request3(axios, basePath));
        },
        deleteFile(fileId, options) {
          return localVarFp.deleteFile(fileId, options).then((request3) => request3(axios, basePath));
        },
        deleteModel(model, options) {
          return localVarFp.deleteModel(model, options).then((request3) => request3(axios, basePath));
        },
        downloadFile(fileId, options) {
          return localVarFp.downloadFile(fileId, options).then((request3) => request3(axios, basePath));
        },
        listEngines(options) {
          return localVarFp.listEngines(options).then((request3) => request3(axios, basePath));
        },
        listFiles(options) {
          return localVarFp.listFiles(options).then((request3) => request3(axios, basePath));
        },
        listFineTuneEvents(fineTuneId, stream, options) {
          return localVarFp.listFineTuneEvents(fineTuneId, stream, options).then((request3) => request3(axios, basePath));
        },
        listFineTunes(options) {
          return localVarFp.listFineTunes(options).then((request3) => request3(axios, basePath));
        },
        listModels(options) {
          return localVarFp.listModels(options).then((request3) => request3(axios, basePath));
        },
        retrieveEngine(engineId, options) {
          return localVarFp.retrieveEngine(engineId, options).then((request3) => request3(axios, basePath));
        },
        retrieveFile(fileId, options) {
          return localVarFp.retrieveFile(fileId, options).then((request3) => request3(axios, basePath));
        },
        retrieveFineTune(fineTuneId, options) {
          return localVarFp.retrieveFineTune(fineTuneId, options).then((request3) => request3(axios, basePath));
        },
        retrieveModel(model, options) {
          return localVarFp.retrieveModel(model, options).then((request3) => request3(axios, basePath));
        }
      };
    };
    var OpenAIApi2 = class extends base_1.BaseAPI {
      cancelFineTune(fineTuneId, options) {
        return exports.OpenAIApiFp(this.configuration).cancelFineTune(fineTuneId, options).then((request3) => request3(this.axios, this.basePath));
      }
      createAnswer(createAnswerRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createAnswer(createAnswerRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createChatCompletion(createChatCompletionRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createChatCompletion(createChatCompletionRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createClassification(createClassificationRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createClassification(createClassificationRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createCompletion(createCompletionRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createCompletion(createCompletionRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createEdit(createEditRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createEdit(createEditRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createEmbedding(createEmbeddingRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createEmbedding(createEmbeddingRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createFile(file, purpose, options) {
        return exports.OpenAIApiFp(this.configuration).createFile(file, purpose, options).then((request3) => request3(this.axios, this.basePath));
      }
      createFineTune(createFineTuneRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createFineTune(createFineTuneRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createImage(createImageRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createImage(createImageRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createImageEdit(image, prompt, mask, n, size, responseFormat, user, options) {
        return exports.OpenAIApiFp(this.configuration).createImageEdit(image, prompt, mask, n, size, responseFormat, user, options).then((request3) => request3(this.axios, this.basePath));
      }
      createImageVariation(image, n, size, responseFormat, user, options) {
        return exports.OpenAIApiFp(this.configuration).createImageVariation(image, n, size, responseFormat, user, options).then((request3) => request3(this.axios, this.basePath));
      }
      createModeration(createModerationRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createModeration(createModerationRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createSearch(engineId, createSearchRequest, options) {
        return exports.OpenAIApiFp(this.configuration).createSearch(engineId, createSearchRequest, options).then((request3) => request3(this.axios, this.basePath));
      }
      createTranscription(file, model, prompt, responseFormat, temperature, language, options) {
        return exports.OpenAIApiFp(this.configuration).createTranscription(file, model, prompt, responseFormat, temperature, language, options).then((request3) => request3(this.axios, this.basePath));
      }
      createTranslation(file, model, prompt, responseFormat, temperature, options) {
        return exports.OpenAIApiFp(this.configuration).createTranslation(file, model, prompt, responseFormat, temperature, options).then((request3) => request3(this.axios, this.basePath));
      }
      deleteFile(fileId, options) {
        return exports.OpenAIApiFp(this.configuration).deleteFile(fileId, options).then((request3) => request3(this.axios, this.basePath));
      }
      deleteModel(model, options) {
        return exports.OpenAIApiFp(this.configuration).deleteModel(model, options).then((request3) => request3(this.axios, this.basePath));
      }
      downloadFile(fileId, options) {
        return exports.OpenAIApiFp(this.configuration).downloadFile(fileId, options).then((request3) => request3(this.axios, this.basePath));
      }
      listEngines(options) {
        return exports.OpenAIApiFp(this.configuration).listEngines(options).then((request3) => request3(this.axios, this.basePath));
      }
      listFiles(options) {
        return exports.OpenAIApiFp(this.configuration).listFiles(options).then((request3) => request3(this.axios, this.basePath));
      }
      listFineTuneEvents(fineTuneId, stream, options) {
        return exports.OpenAIApiFp(this.configuration).listFineTuneEvents(fineTuneId, stream, options).then((request3) => request3(this.axios, this.basePath));
      }
      listFineTunes(options) {
        return exports.OpenAIApiFp(this.configuration).listFineTunes(options).then((request3) => request3(this.axios, this.basePath));
      }
      listModels(options) {
        return exports.OpenAIApiFp(this.configuration).listModels(options).then((request3) => request3(this.axios, this.basePath));
      }
      retrieveEngine(engineId, options) {
        return exports.OpenAIApiFp(this.configuration).retrieveEngine(engineId, options).then((request3) => request3(this.axios, this.basePath));
      }
      retrieveFile(fileId, options) {
        return exports.OpenAIApiFp(this.configuration).retrieveFile(fileId, options).then((request3) => request3(this.axios, this.basePath));
      }
      retrieveFineTune(fineTuneId, options) {
        return exports.OpenAIApiFp(this.configuration).retrieveFineTune(fineTuneId, options).then((request3) => request3(this.axios, this.basePath));
      }
      retrieveModel(model, options) {
        return exports.OpenAIApiFp(this.configuration).retrieveModel(model, options).then((request3) => request3(this.axios, this.basePath));
      }
    };
    exports.OpenAIApi = OpenAIApi2;
  }
});

// node_modules/openai/package.json
var require_package = __commonJS({
  "node_modules/openai/package.json"(exports, module2) {
    module2.exports = {
      name: "openai",
      version: "3.2.1",
      description: "Node.js library for the OpenAI API",
      repository: {
        type: "git",
        url: "git@github.com:openai/openai-node.git"
      },
      keywords: [
        "openai",
        "open",
        "ai",
        "gpt-3",
        "gpt3"
      ],
      author: "OpenAI",
      license: "MIT",
      main: "./dist/index.js",
      types: "./dist/index.d.ts",
      scripts: {
        build: "tsc --outDir dist/"
      },
      dependencies: {
        axios: "^0.26.0",
        "form-data": "^4.0.0"
      },
      devDependencies: {
        "@types/node": "^12.11.5",
        typescript: "^3.6.4"
      }
    };
  }
});

// node_modules/form-data/lib/browser.js
var require_browser = __commonJS({
  "node_modules/form-data/lib/browser.js"(exports, module2) {
    module2.exports = typeof self == "object" ? self.FormData : window.FormData;
  }
});

// node_modules/openai/dist/configuration.js
var require_configuration = __commonJS({
  "node_modules/openai/dist/configuration.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Configuration = void 0;
    var packageJson = require_package();
    var Configuration2 = class {
      constructor(param = {}) {
        this.apiKey = param.apiKey;
        this.organization = param.organization;
        this.username = param.username;
        this.password = param.password;
        this.accessToken = param.accessToken;
        this.basePath = param.basePath;
        this.baseOptions = param.baseOptions;
        this.formDataCtor = param.formDataCtor;
        if (!this.baseOptions) {
          this.baseOptions = {};
        }
        this.baseOptions.headers = Object.assign({ "User-Agent": `OpenAI/NodeJS/${packageJson.version}`, "Authorization": `Bearer ${this.apiKey}` }, this.baseOptions.headers);
        if (this.organization) {
          this.baseOptions.headers["OpenAI-Organization"] = this.organization;
        }
        if (!this.formDataCtor) {
          this.formDataCtor = require_browser();
        }
      }
      isJsonMime(mime) {
        const jsonMime = new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$", "i");
        return mime !== null && (jsonMime.test(mime) || mime.toLowerCase() === "application/json-patch+json");
      }
    };
    exports.Configuration = Configuration2;
  }
});

// node_modules/openai/dist/index.js
var require_dist = __commonJS({
  "node_modules/openai/dist/index.js"(exports) {
    "use strict";
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      Object.defineProperty(o, k2, { enumerable: true, get: function() {
        return m[k];
      } });
    } : function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      o[k2] = m[k];
    });
    var __exportStar = exports && exports.__exportStar || function(m, exports2) {
      for (var p in m)
        if (p !== "default" && !exports2.hasOwnProperty(p))
          __createBinding(exports2, m, p);
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    __exportStar(require_api(), exports);
    __exportStar(require_configuration(), exports);
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => VCCopilotPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// utils.ts
var import_obsidian = require("obsidian");
var url_affinity_organizations = "https://api.affinity.co/organizations";
var url_affinity_note = "https://api.affinity.co/notes";
var url_affinity_persons = "https://api.affinity.co/persons";
var url_affinity_field_values = "https://api.affinity.co/field-values";
var url_affinity_list = "https://api.affinity.co/lists";
function affinity_authorization(affinityAPIKey2) {
  let username = "";
  let pwd = affinityAPIKey2;
  let auth = "Basic " + Buffer.from(username + ":" + pwd).toString("base64");
  let headers = { Authorization: auth, "Content-Type": "application/json" };
  return headers;
}
async function add_notes_to_company(startup, note, affinityAPIKey2) {
  let headers = affinity_authorization(affinityAPIKey2);
  let organization_ids = [startup["id"]];
  console.log(organization_ids);
  console.log(note);
  let note_data = { organization_ids: [startup["id"]], content: note };
  let r = await (0, import_obsidian.request)({
    url: url_affinity_note,
    method: "POST",
    headers,
    body: JSON.stringify(note_data)
  }).then((data) => console.log(data)).catch((error) => {
    console.error(error);
    if (error) {
      return null;
    }
  });
  return "Success";
}
async function get_startup_by_name(affinityAPIKey2, owner_value2, startup_name) {
  let subnames = startup_name.split(" ");
  let search_term = subnames[0];
  if (subnames.length > 1) {
    for (let name of subnames.slice(1)) {
      search_term = search_term + "+" + name;
    }
  }
  console.log(search_term);
  let next_page_token = null;
  let headers = affinity_authorization(affinityAPIKey2);
  while (true) {
    let full_url = url_affinity_organizations + "?term=" + search_term + "&with_interaction_dates=true&with_interaction_persons=true";
    if (next_page_token != null) {
      full_url += "&page_token=" + next_page_token;
    }
    let r = await (0, import_obsidian.request)({
      url: full_url,
      method: "GET",
      headers
    });
    let response = JSON.parse(r);
    let organizations = response["organizations"];
    next_page_token = response["next_page_token"];
    for (let organization of organizations) {
      if (organization["interactions"]) {
        for (let [interaction_name, interaction_data] of Object.entries(organization["interactions"])) {
          if (interaction_data) {
            let people_involved = interaction_data["person_ids"].toString();
            if (people_involved.includes(owner_value2)) {
              return organization;
            }
          } else {
            break;
          }
        }
      }
    }
    if (next_page_token == null) {
      return null;
    }
  }
}
async function get_person_by_name(affinityAPIKey2, person_name) {
  let names = person_name.split(" ");
  if (names.length > 1) {
    let next_page_token = null;
    let headers = affinity_authorization(affinityAPIKey2);
    let first_name = names[0];
    let last_name = names[1];
    while (true) {
      let full_url = url_affinity_persons + "?term=" + last_name;
      if (next_page_token != null) {
        full_url += "&page_token=" + next_page_token;
      }
      let r = await (0, import_obsidian.request)({
        url: full_url,
        method: "GET",
        headers
      });
      let response = JSON.parse(r);
      let people = response["persons"];
      next_page_token = response["next_page_token"];
      for (let person of people) {
        if (person["first_name"] == first_name && person["last_name"] == last_name) {
          return person;
        }
      }
      if (next_page_token == null) {
        break;
      }
    }
    return null;
  } else {
    return null;
  }
  return null;
}
async function get_person_details(affinityAPIKey2, person_id) {
  let full_url = url_affinity_persons + "/" + person_id.toString();
  let headers = affinity_authorization(affinityAPIKey2);
  let r = await (0, import_obsidian.request)({
    url: full_url,
    method: "GET",
    headers
  });
  let response = JSON.parse(r);
  return response;
}
async function is_person_in_venture_network(affinityAPIKey2, person_details, venture_network_list_id) {
  let list_entries = person_details["list_entries"];
  for (let entry of list_entries) {
    if (entry["list_id"].toString() == venture_network_list_id.toString()) {
      return entry["id"];
    }
  }
  return null;
}
async function add_entry_to_list(affinityAPIKey2, list_id, entity_id) {
  let headers = affinity_authorization(affinityAPIKey2);
  let full_url = url_affinity_list + "/" + list_id + "/list-entries";
  let data = { entity_id };
  let r = await (0, import_obsidian.request)({
    url: full_url,
    method: "POST",
    headers,
    body: JSON.stringify(data)
  }).then((data2) => console.log(data2)).catch((error) => {
    console.error(error);
    if (error) {
      return null;
    }
  });
  return "Success";
}
async function add_field_value(affinityAPIKey2, field_id, entity_id, value, list_entry_id) {
  let headers = affinity_authorization(affinityAPIKey2);
  let full_url = url_affinity_field_values;
  let data = { field_id, entity_id, value, list_entry_id };
  let r = await (0, import_obsidian.request)({
    url: full_url,
    method: "POST",
    headers,
    body: JSON.stringify(data)
  }).then((data2) => console.log(data2)).catch((error) => {
    console.error(error);
    if (error) {
      return null;
    }
  });
  return "Success";
}
async function add_notes_to_person(affinityAPIKey2, person_id, notes) {
  let full_url = url_affinity_note;
  let headers = affinity_authorization(affinityAPIKey2);
  let data = { person_ids: [person_id], content: notes };
  let r = await (0, import_obsidian.request)({
    url: full_url,
    method: "POST",
    headers,
    body: JSON.stringify(data)
  }).then((data2) => console.log(data2)).catch((error) => {
    console.error(error);
    if (error) {
      return null;
    }
  });
  return "Success";
}

// modal.ts
var import_obsidian2 = require("obsidian");
var TextInputModal = class extends import_obsidian2.Modal {
  constructor(app, type, onsubmit) {
    super(app);
    this.onsubmit = onsubmit;
    this.type = type;
  }
  onOpen() {
    const { contentEl } = this;
    let title = "";
    if (this.type == "market-research") {
      title = "What industry do you want to research?";
    }
    if (this.type == "defensibility") {
      title = "Describe the startup whose defensibility is to be evaluated";
    }
    if (this.type == "evaluate") {
      title = "Describe the startup to be evaluated";
    }
    if (this.type == "fireflies-summary") {
      title = "Insert the name of the fireflies recording/meeting you would like to summarize";
    }
    if (this.type == "HackerNews Research") {
      title = "What topic would you like to research on Hackernews?";
      let query = new import_obsidian2.Setting(contentEl).setName("Search Query").addText((text) => {
      });
      let web = new import_obsidian2.Setting(contentEl).setName("Website to Search").addText((text) => {
      });
    }
    contentEl.createEl("h2", { text: title });
    const inputEl = contentEl.createEl("textarea");
    inputEl.addEventListener("input", (event) => {
      event.stopPropagation();
    });
    const submitButton = contentEl.createEl("button", { text: "Submit" });
    submitButton.style.position = "absolute";
    submitButton.style.bottom = "0";
    submitButton.style.right = "0";
    submitButton.addEventListener("click", () => {
      this.onsubmit(inputEl.value);
      this.close();
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};
var MultipleTextInputModal = class extends import_obsidian2.Modal {
  constructor(app, type, onsubmit) {
    super(app);
    this.onsubmit = onsubmit;
    this.type = type;
  }
  onOpen() {
    const { contentEl } = this;
    let title = "What topic would you like to research today?";
    contentEl.createEl("h2", { text: title });
    let query = new import_obsidian2.Setting(contentEl).setName("Search Query").addText((text) => text.onChange((value) => {
      this.query = value;
    }));
    let web = new import_obsidian2.Setting(contentEl).setName("Website to Search").addText((text) => text.onChange((value) => {
      this.website = value;
    }));
    new import_obsidian2.Setting(contentEl).setName("Task to do").addDropdown((menu) => {
      menu.addOption("competition", "Find & Analyze competitors");
      menu.setValue("....");
      menu.onChange((value) => {
        this.task = value;
      });
    });
    let button = new import_obsidian2.Setting(contentEl).addButton((btn) => {
      btn.setButtonText("Submit").setCta().onClick(() => {
        this.close();
        this.onsubmit(this.website + ", " + this.query + ", " + this.task);
      });
    });
  }
};

// main.ts
var { Configuration, OpenAIApi } = require_dist();
var you_api_key = "";
var affinityAPIKey = "";
var openaiAPIKey = "";
var owner_value = "10";
var connection_owner_field = "10";
var venture_network_list = "500";
var investor_names = [];
var fireflies_api_key = "";
var DEFAULT_SETTINGS = {
  affinityKey: "default",
  openAIKey: "default",
  owner_person_value: "10",
  connection_owner_field_id: "100",
  venture_network_list_id: "500",
  you_api: "<You.com-API-Key>",
  team_names: "Ben Horrowitz, Vinod Khosla",
  fireflies_api: "default"
};
async function openai_js(query, system_prompt, max_tokens = 256, temperature = 0.3) {
  const configuration = new Configuration({
    apiKey: openaiAPIKey
  });
  delete configuration.baseOptions.headers["User-Agent"];
  const openai = new OpenAIApi(configuration);
  const system_message = system_prompt;
  const response = await openai.createChatCompletion({
    model: "gpt-4-1106-preview",
    temperature,
    max_tokens,
    messages: [
      { role: "system", content: system_message },
      { role: "user", content: query }
    ]
  });
  let summary = response.data.choices[0].message.content;
  return summary;
}
async function openai_js_multiturn(queries, system_prompt, max_tokens = 256, temperature = 0.3) {
  const configuration = new Configuration({
    apiKey: openaiAPIKey
  });
  delete configuration.baseOptions.headers["User-Agent"];
  const openai = new OpenAIApi(configuration);
  const system_message = system_prompt;
  let messages = [{ role: "system", content: system_message }];
  let replies = [];
  for (let query of queries) {
    messages.push({ role: "user", content: query });
    console.log(messages);
    const response = await openai.createChatCompletion({
      model: "gpt-4-1106-preview",
      temperature,
      max_tokens,
      messages
    });
    let assistant_reply = response.data.choices[0].message.content;
    messages.push({ role: "assistant", content: assistant_reply });
    replies.push(assistant_reply);
  }
  return replies;
}
async function summarize_selected_startup_text(editor, view, status) {
  const sel = editor.getSelection();
  new import_obsidian3.Notice("Summarizing...");
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot summarizing...");
  status.setAttr("title", "Copilot is summarizing...");
  const system_prompt = "You are a summarizer for my notes about startups. Your job is to read through my notes and create a summary in the following schema:\n- **Team**:<the founder team behind the startup>\n\n- **Product**:<the product and the problem it solves>\n\n- **Traction**:<how much revenue has the startup generated so far, how many customers do they have>\n\n- **Round**:<how much money have they raised so far at what terms. How much money are they raising now>";
  let new_summary = await openai_js(sel, system_prompt);
  const replacement = "#gpt_summarized, #AddHashtags, #review_startup \n" + new_summary + "\n# Stop Indexing \n## Notes\n" + sel;
  editor.replaceSelection(replacement);
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
  status.setAttr("title", "Copilot is ready");
}
function startup_ready_for_affinity(file_content) {
  return file_content.includes("#startups/screened") && file_content.includes("#Affinity");
}
function extract_title_and_note(text) {
  let pattern = /^# .*\n/gm;
  let matches = text.match(pattern);
  let title = "";
  if (matches) {
    title = matches[0];
  }
  let substrings = text.split(pattern);
  console.log(`Title: ${title}`);
  console.log(substrings);
  return [title, substrings];
}
function clean_text(startup_name) {
  startup_name = startup_name.replace(/[^A-Za-z0-9\s.]/g, "");
  startup_name = startup_name.trim();
  return startup_name;
}
async function push_startups_to_affinity(status) {
  const files = this.app.vault.getMarkdownFiles();
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot syncing with Affinity...");
  status.setAttr("title", "Copilot is pushing startup info to Affinity...");
  for (let item of files) {
    let file_content = await this.app.vault.read(item);
    if (startup_ready_for_affinity(file_content)) {
      let [title, substrings] = extract_title_and_note(file_content);
      let startup_name = String(title);
      startup_name = clean_text(startup_name);
      let note = substrings[1];
      note = note.replace(/^(==|\*\*|#{2,})$/g, "");
      let startup = await get_startup_by_name(affinityAPIKey, owner_value, startup_name);
      if (startup) {
        let response = await add_notes_to_company(startup, note, affinityAPIKey);
        if (response == null) {
          new import_obsidian3.Notice(`Startup: ${startup_name} was NOT updated on Affinity`);
        } else {
          new import_obsidian3.Notice(`Startup: ${startup_name} was updated on Affinity`);
          file_content = file_content.replace(/#Affinity/g, "");
          this.app.vault.modify(item, file_content);
        }
      } else {
        new import_obsidian3.Notice(`Startup: ${startup_name} was NOT found on Affinity`);
      }
    }
  }
  new import_obsidian3.Notice("Done!");
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
  status.setAttr("title", "Copilot is ready");
}
function is_summarizable(file_content) {
  return file_content.includes("#network/connected") && (file_content.includes("#Entity/VC") || file_content.includes("#Person/VC")) && file_content.includes("#gpt_summarized") != true && file_content.includes("dataview") != true;
}
async function summarize_vc_text(text) {
  let [title, substrings] = extract_title_and_note(text);
  let hashtags;
  try {
    hashtags = substrings[0].split("Tags:")[1];
  } catch (e) {
    hashtags = substrings[0];
    new import_obsidian3.Notice(`${title}: Does not have any guiding hashtags, this could help the summarizer understand the VC better`, 3600);
  }
  let text_to_summarize = hashtags + "\n" + substrings[1];
  console.log(`Summarizing: ${title}`);
  const system_prompt = "You are a summarizer for my notes about VC Funds. Your job is to read through my notes and create a summary in the following schema:\n- Fund Size::<How big is the fund?>\n- Ticket Size::<How much does the fund invest per startup?>\n- Geography::<Where can the fund invest?>\n- Stage:: <Pre-seed, Seed, Series A, etc>\n- Industry::<In which industries does the fund invest?>\n- Special::<Any special information about the fund or the investor that I should remember>";
  const summary = await openai_js("Notes:\n" + text_to_summarize, system_prompt);
  let new_summary = String(summary);
  title = title.toString();
  let leading_text = "";
  let replacement = "";
  let tailing_text = "";
  if (substrings) {
    leading_text = substrings[0] + "\n" + title + "\n";
    for (let substring of substrings.slice(1)) {
      tailing_text = tailing_text + "\n" + substring;
    }
    replacement = leading_text + "#gpt_summarized, #review \n" + new_summary + "\n# Stop Indexing \n## Notes\n" + tailing_text;
    return [replacement, new_summary, title];
  } else {
    return [text, text, ""];
  }
}
async function summarize_all_vc(status) {
  const files = this.app.vault.getMarkdownFiles();
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot summarizing...");
  status.setAttr("title", "VC Copilot is summarizing all your VC connections...");
  for (let item of files) {
    let file_content = await this.app.vault.read(item);
    if (is_summarizable(file_content)) {
      console.log(`We are changing file: ${item.name}`);
      let [new_text, summary, title] = await summarize_vc_text(file_content);
      if (title != "") {
        this.app.vault.modify(item, new_text);
        new import_obsidian3.Notice(`${title} has been summarized`);
      }
    }
  }
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
  status.setAttr("title", "VC Copilot is ready");
}
function vc_ready_for_affinity(file_content) {
  return file_content.includes("#gpt_summarized") && file_content.includes("#Affinity");
}
async function push_vcs_to_affinity(status) {
  const files = this.app.vault.getMarkdownFiles();
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot syncing with Affinity...");
  status.setAttr("title", "Copilot is pushing VCs info to Affinity...");
  for (let item of files) {
    let file_content = await this.app.vault.read(item);
    if (vc_ready_for_affinity(file_content)) {
      let [title, substrings] = extract_title_and_note(file_content);
      let summary = substrings[1];
      let person_name = String(title);
      person_name = clean_text(person_name);
      let note = substrings[1];
      note = note.replace(/^(==|\*\*|#{2,})$/g, "");
      let person = await get_person_by_name(affinityAPIKey, person_name);
      if (person) {
        let person_id = person["id"];
        let person_details = await get_person_details(affinityAPIKey, person_id);
        let list_entry_id = await is_person_in_venture_network(affinityAPIKey, person_details, venture_network_list);
        if (list_entry_id != null) {
        } else {
          await add_entry_to_list(affinityAPIKey, venture_network_list, person_id);
          let person_details2 = await get_person_details(affinityAPIKey, person_id);
          list_entry_id = await is_person_in_venture_network(affinityAPIKey, person_details2, venture_network_list);
          await add_field_value(affinityAPIKey, connection_owner_field, person_id, owner_value, list_entry_id);
        }
        let result = await add_notes_to_person(affinityAPIKey, person_id, note);
        if (result) {
          new import_obsidian3.Notice(`VC: ${person_name} was updated on Affinity`);
          file_content = file_content.replace(/#Affinity/g, "");
          this.app.vault.modify(item, file_content);
        } else {
          new import_obsidian3.Notice(`VC: ${person_name} was FOUND but NOT updated on Affinity`);
        }
      } else {
        new import_obsidian3.Notice(`VC: ${person_name} was NOT FOUND on Affinity`);
      }
    }
  }
  status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
  status.setAttr("title", "Copilot is ready");
}
async function get_meeting_id(meeting_name) {
  let meetings = await fetch("https://api.fireflies.ai/graphql", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${fireflies_api_key}`
    },
    body: JSON.stringify({
      query: `
            query {
                transcripts {
                    id
                    title
                    fireflies_users
                    participants
                    date
                    transcript_url
                    duration
                }
            }
        `
    })
  }).then((result) => {
    return result.json();
  }).then((result) => {
    return result.data;
  });
  let meetings_list = meetings["transcripts"];
  let meeting_id = "";
  for (let meeting of meetings_list) {
    if (meeting["title"] == meeting_name) {
      meeting_id = meeting["id"];
      break;
    }
  }
  return meeting_id;
}
async function get_meeting_transcript_by_id(id) {
  let transcript = await fetch("https://api.fireflies.ai/graphql", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer 853462ce-ee32-4aef-b840-ea9883cc38b3"
    },
    body: JSON.stringify({
      query: `
              query {
                transcript(id: "${id}"){ title date sentences {text speaker_name} }
              }
          `
    })
  }).then((result) => {
    return result.json();
  }).then((result) => {
    return result.data;
  });
  let current_sentence = "";
  let useful_paragraphs = [];
  let current_speaker = transcript["transcript"]["sentences"][0]["speaker_name"];
  for (let sentence of transcript["transcript"]["sentences"]) {
    if (sentence["speaker_name"] == current_speaker) {
      current_sentence += sentence["text"];
    } else {
      if (current_sentence.length != 0) {
        if (investor_names.includes(current_speaker)) {
          current_speaker += " (Investor)";
          console.log(current_speaker);
        } else {
          current_speaker += " (Founder)";
        }
        current_sentence = current_speaker + ": " + current_sentence + "\n";
        useful_paragraphs.push(current_sentence);
        current_sentence = sentence["text"];
        current_speaker = sentence["speaker_name"];
      }
    }
  }
  if (current_sentence.length != 0) {
    useful_paragraphs.push(current_sentence);
  }
  return useful_paragraphs;
}
function countWords(str) {
  let words = str.match(/\b[a-z\d]+\b/gi);
  return words ? words.length : 0;
}
async function summarize_paragraph(paragraph) {
  const configuration = new Configuration({ apiKey: openaiAPIKey });
  delete configuration.baseOptions.headers["User-Agent"];
  const openai = new OpenAIApi(configuration);
  const response = await openai.createChatCompletion({
    model: "gpt-4-1106-preview",
    messages: [
      {
        "role": "system",
        "content": 'You are a helpful note-taking assistant for a venture capital investor. You will be given a part of a transcript for the call between the investor and the startup founder. Your task is to extract information covering the following aspects:\n- **Team**:<Who is the team behind the startup. Answer in bullet points!>\n- **Problem**:<What is the problem the startup is solving and for whom. Answer in bullet points!>\n- **Product**:<How does their product solve this problem. Answer in bullet points!>\n- **Traction**:<How does their customer traction look like. Answer in bullet points!>\n- **Competition**:<How does the competitive landscape look like. Answer in bullet points!>\n- **Round Info**:<How much money are they raising from investors currently? How much have they raised before? Answer in bullet points!>\n- **Other**: <Other important points about the founders OR the startup that do not fit in the above sections. Answer in bullet points!>\n\nFor every section, always give your answers in bullet points! Otherwise, say "No Relevant Information"'
      },
      {
        "role": "user",
        "content": `${paragraph}`
      }
    ],
    temperature: 0,
    max_tokens: 1024,
    top_p: 1,
    frequency_penalty: 0,
    presence_penalty: 0
  });
  return response.data.choices[0].message.content;
}
async function summarize_all_paragraphs_together(paragraphs) {
  let input_text = "";
  for (let i = 0; i < paragraphs.length; i++) {
    input_text += `Summary #${i + 1}:
`;
    input_text += paragraphs[i] + "\n\n";
  }
  const configuration = new Configuration({ apiKey: openaiAPIKey });
  delete configuration.baseOptions.headers["User-Agent"];
  const openai = new OpenAIApi(configuration);
  const response = await openai.createChatCompletion({
    model: "gpt-4-1106-preview",
    messages: [
      {
        "role": "system",
        "content": `You are a helpful assistant. Your task is to expand the first summary you are given by the information in all the subsequent summaries. The final summary you provide should cover ALL following sections:
- **Team**: <Who is the team behind the startup>
- **Problem**: <What is the problem the startup is solving and for whom>
- **Product**: <How does their product solve this problem>
- **Traction**: <How does their customer traction look like>
- **Competition**: <How does the competitive landscape look like>
- **Round Info**: <How much money are they raising from investors currently? How much have they raised before?>
- **Other**: <Other important points about the founders OR the startup that do not fit in the above sections>

Do not leave any empty sections. For every section always give your answers in bullet points! Otherwise say "No Relevant Information" infront of the section's name.`
      },
      {
        "role": "user",
        "content": `${input_text}`
      }
    ],
    temperature: 0,
    max_tokens: 2048,
    top_p: 1,
    frequency_penalty: 0,
    presence_penalty: 0
  });
  return response.data.choices[0].message.content;
}
var VCCopilotPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new VCCopilotSettingsTab(this.app, this));
    this.status = this.addStatusBarItem();
    this.addCommand({ id: "summarize-startup-command", name: "Summarize This Startup", editorCallback: (editor, view) => summarize_selected_startup_text(editor, view, this.status) });
    this.addCommand({ id: "affinity-startup", name: "Push Startups to Affinity", callback: () => push_startups_to_affinity(this.status) });
    this.addCommand({ id: "summarize-all-vc-command", name: "Summarize All VC Notes", callback: () => summarize_all_vc(this.status) });
    this.addCommand({ id: "affinity-vc", name: "Push VCs to Affinity", callback: () => push_vcs_to_affinity(this.status) });
    this.addCommand({
      id: "startup-defensibility",
      name: "Evaluate Startup Defensibility",
      editorCallback: (editor) => {
        const inputModal = new TextInputModal(this.app, "defensibility", (input) => {
          console.log("Submitted text:", input);
          this.defensibility_analysis(input, editor);
        });
        inputModal.open();
      }
    });
    this.addCommand({
      id: "startup-workflow",
      name: "Startup Guidance Workflow",
      editorCallback: (editor) => {
        const inputModal = new TextInputModal(this.app, "evaluate", (input) => {
          console.log("Submitted text:", input);
          this.guidance_workflow(input, editor);
        });
        inputModal.open();
      }
    });
    this.addCommand({
      id: "market-research-command",
      name: "Market Research",
      editorCallback: (editor) => {
        const inputModal = new TextInputModal(this.app, "market-research", (input) => {
          console.log("Submitted text:", input);
          this.market_research(input, editor);
        });
        inputModal.open();
      }
    });
    this.addCommand({
      id: "url-research-command",
      name: "Url Research",
      editorCallback: (editor) => {
        const inputModal = new TextInputModal(this.app, "Url Research", (input) => {
          console.log("Submitted text:", input);
          this.url_research(input, editor);
        });
        inputModal.open();
      }
    });
    this.addCommand({
      id: "competition-research-command",
      name: "Competition Research",
      editorCallback: (editor) => {
        const inputModal = new TextInputModal(this.app, "Describe the startup or the industry for competition research", (input) => {
          console.log("Submitted text:", input);
          this.competition_research(input, editor);
        });
        inputModal.open();
      }
    });
    this.addCommand({
      id: "custom-research",
      name: "Custom Research",
      editorCallback: (editor) => {
        const inputModal = new MultipleTextInputModal(this.app, "", (input) => {
          let result = input.split(", ");
          let website = result[0];
          let query = result[1];
          let task = result[2];
          console.log("Submitted text:", input);
          this.specific_web_research(task, website, query, editor);
        });
        inputModal.open();
      }
    });
    this.addCommand({
      id: "fireflies-summary",
      name: "Fireflies Call Summary",
      editorCallback: (editor) => {
        const inputModal = new TextInputModal(this.app, "fireflies-summary", (input) => {
          console.log("Submitted text:", input);
          this.fireflies_summary(input, editor);
        });
        inputModal.open();
      }
    });
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot loading....");
    this.status.setAttr("title", "VC Copilot is loading...");
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
    this.status.setAttr("title", "VC Copilot is ready");
  }
  onunload() {
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot left");
    this.status.setAttr("title", "VC Copilot says \u{1F44B}");
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    openaiAPIKey = this.settings.openAIKey;
    affinityAPIKey = this.settings.affinityKey;
    owner_value = this.settings.owner_person_value;
    connection_owner_field = this.settings.connection_owner_field_id;
    venture_network_list = this.settings.venture_network_list_id;
    you_api_key = this.settings.you_api;
    fireflies_api_key = this.settings.fireflies_api;
    this.settings.team_names.split(",").forEach((element) => {
      investor_names.push(element.trim());
    });
  }
  async saveSettings() {
    await this.saveData(this.settings);
    openaiAPIKey = this.settings.openAIKey;
    affinityAPIKey = this.settings.affinityKey;
    owner_value = this.settings.owner_person_value;
    connection_owner_field = this.settings.connection_owner_field_id;
    venture_network_list = this.settings.venture_network_list_id;
    you_api_key = this.settings.you_api;
    fireflies_api_key = this.settings.fireflies_api;
    this.settings.team_names.split(",").forEach((element) => {
      investor_names.push(element.trim());
    });
  }
  async url_research(url, editor) {
    this.status.setText(`\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot researching ${url}...`);
    this.status.setAttr("title", "Copilot is researching the url");
    let final_text = "";
    try {
      const res = await fetch("https://url-researcher-container-xm5lmdnsxq-ey.a.run.app", {
        method: "post",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          url,
          openai_key: openaiAPIKey
        })
      });
      final_text = await res.text();
      final_text = `## ${url} Research
` + final_text;
      final_text = final_text.replace("Problem to be solved:", "#### Problem to be solved");
      final_text = final_text.replace("Product:", "#### Product");
      final_text = final_text.replace("Features:", "#### Features");
      final_text = final_text.replace("Business Model:", "#### Business Model");
      final_text = final_text.replace("Competition:", "#### Competition");
      final_text = final_text.replace("Vision:", "#### Vision");
      final_text = final_text.replace("Extras:", "#### Extras");
    } catch (error) {
      console.log(`Error when doing url research: ${error}`);
      new import_obsidian3.Notice(`Error when doing url research`);
    }
    editor.replaceRange(final_text, editor.getCursor());
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
    this.status.setAttr("title", "Copilot is ready");
  }
  async fireflies_summary(meeting_name, editor) {
    this.status.setText(`\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot reading the transcript of ${meeting_name}...`);
    this.status.setAttr("title", "Copilot is reading the transcript");
    let final_summary = "";
    let cursor_position = editor.getCursor();
    try {
      let id = await get_meeting_id(meeting_name);
      let paragraphs = await get_meeting_transcript_by_id(id);
      let summaries = [];
      let long_paragraph = "";
      let extended_paragraphs = [];
      for (let paragraph of paragraphs) {
        let number_of_words = countWords(paragraph);
        if (number_of_words >= 12) {
          if (number_of_words + countWords(long_paragraph) <= 2500) {
            long_paragraph += paragraph;
          } else {
            extended_paragraphs.push(long_paragraph);
            long_paragraph = paragraph;
          }
        }
      }
      if (long_paragraph.length != 0) {
        extended_paragraphs.push(long_paragraph);
      }
      this.status.setText(`\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot summarizing sections of the transcript of ${meeting_name}...`);
      this.status.setAttr("title", "Copilot is summarizing sections of the transcript");
      for (let paragraph of extended_paragraphs) {
        let summary = await summarize_paragraph(paragraph);
        summaries.push(summary);
      }
      this.status.setText(`\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot summarizing the full transcript of ${meeting_name}...`);
      this.status.setAttr("title", "Copilot is summarizing the full transcript");
      final_summary = await summarize_all_paragraphs_together(summaries);
      final_summary = final_summary.replace(/\*\*Team(:)?\*\*/g, "#### Team");
      final_summary = final_summary.replace(/\*\*Problem(:)?\*\*/g, "#### Problem");
      final_summary = final_summary.replace(/\*\*Product(:)?\*\*/g, "#### Product");
      final_summary = final_summary.replace(/\*\*Traction(:)?\*\*/g, "#### Traction");
      final_summary = final_summary.replace(/\*\*Competition(:)?\*\*/g, "#### Competition");
      final_summary = final_summary.replace(/\*\*Round Info(:)?\*\*/g, "#### Round Info");
      final_summary = final_summary.replace(/\*\*Other(:)?\*\*/g, "#### Other");
      final_summary = final_summary.replace("- #### Team", "#### Team");
      final_summary = final_summary.replace("- #### Problem", "#### Problem");
      final_summary = final_summary.replace("- #### Product", "#### Product");
      final_summary = final_summary.replace("- #### Traction", "#### Traction");
      final_summary = final_summary.replace("- #### Competition", "#### Competition");
      final_summary = final_summary.replace("- #### Round Info", "#### Round Info");
      final_summary = final_summary.replace("- #### Other", "#### Other");
      final_summary = `## ${meeting_name} call summary
#review_startup
` + final_summary;
    } catch (error) {
      console.log(`Error during fireflies summary: ${error}`);
      new import_obsidian3.Notice(`Error during fireflies summary`);
    }
    editor.replaceRange(final_summary, cursor_position);
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
    this.status.setAttr("title", "Copilot is ready");
  }
  async you_research(query) {
    let results = await (0, import_obsidian3.request)({
      url: `https://api.ydc-index.io/search?query=${query}`,
      method: "GET",
      headers: { "X-API-Key": you_api_key }
    }).then((response) => {
      return response;
    }).catch((err) => console.error(err));
    return JSON.parse(results)["hits"];
  }
  async market_research(industry, editor) {
    this.status.setText("\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot researching the market...");
    this.status.setAttr("title", "Copilot is researching the market...");
    let res;
    try {
      const configuration = new Configuration({
        apiKey: openaiAPIKey
      });
      delete configuration.baseOptions.headers["User-Agent"];
      const openai = new OpenAIApi(configuration);
      let message = "## Market Research\n";
      let websites = ["", "globenewswire.com", "statista.com"];
      for (let website of websites) {
        this.status.setText(`\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot ${website} research...`);
        this.status.setAttr("title", `Copilot is researching ${website}...`);
        let summaries = [];
        let sources = [];
        let query2 = `site:${website} ${industry} industry market report.`;
        let result = await this.you_research(query2);
        let counter = 0;
        let user_prompt = `What facts about the ${industry} market can an investor learn from the following paragraphs? If there are no facts to learn simply output "Nothing"`;
        for (let element of result) {
          let snippets = element["snippets"];
          let title = element["title"];
          let url = element["url"];
          let summary = "";
          for (let i = 0; i < snippets.length; i += 5) {
            let paragraphs = snippets.slice(i, i + 5);
            paragraphs[0] = "- " + paragraphs[0];
            let string_paragraphs = paragraphs.join("\n\n- ");
            const response = await openai.createChatCompletion({
              model: "gpt-4-1106-preview",
              messages: [
                {
                  "role": "system",
                  "content": "Act as an investigative journalist who is obsessed with the truth and accuracy. You always give answers in bullet points."
                },
                {
                  "role": "user",
                  "content": `${user_prompt}
Paragraphs:
` + string_paragraphs
                }
              ],
              temperature: 0,
              max_tokens: 1024,
              top_p: 1,
              frequency_penalty: 0,
              presence_penalty: 0
            });
            summary += response.data.choices[0].message.content + "\n";
          }
          summaries.push(summary);
          let source = `[${title}](${url})`;
          sources.push(source);
          counter++;
          if (counter == 2) {
            break;
          }
        }
        for (let i = 0; i < summaries.length; i++) {
          message += `#### ${sources[i]}
`;
          message += summaries[i] + "\n\n";
        }
      }
      message += "#### Further Material\n";
      message += "Here are some reading material for further information\n\n";
      let query = `${industry} industry primer pdf`;
      let pdfs = await this.you_research(query);
      for (let element of pdfs) {
        let snippets = element["snippets"];
        let title = element["title"];
        let url = element["url"];
        message += `- [${title}](${url})
`;
      }
      editor.replaceRange(message, editor.getCursor());
      this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
      this.status.setAttr("title", "Copilot is ready");
    } catch (error) {
      console.log(`Error when doing market research: ${error}`);
      new import_obsidian3.Notice(`Error when doing market research`);
    }
  }
  async websearch_and_summary(task, website, search_query, presentation_prompt, editor) {
    this.status.setText("\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot surfing the internet...");
    this.status.setAttr("title", "Copilot is surfing...");
    try {
      const configuration = new Configuration({
        apiKey: openaiAPIKey
      });
      delete configuration.baseOptions.headers["User-Agent"];
      const openai = new OpenAIApi(configuration);
      let message = `## ${task}
`;
      this.status.setText(`\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot ${website} research...`);
      this.status.setAttr("title", `Copilot is researching ${website}...`);
      let summaries = [];
      let sources = [];
      let query = `site:${website} ${search_query}`;
      let result = await this.you_research(query);
      let counter = 0;
      let user_prompt = presentation_prompt;
      for (let element of result) {
        let snippets = element["snippets"];
        let title = element["title"];
        let url = element["url"];
        let summary = "";
        let paragraphs = snippets;
        paragraphs[0] = "- " + paragraphs[0];
        let string_paragraphs = paragraphs.join("\n\n- ");
        if (string_paragraphs && string_paragraphs.length > 1) {
          const response = await openai.createChatCompletion({
            model: "gpt-4-1106-preview",
            messages: [
              {
                "role": "system",
                "content": "Act as an investigative journalist who is obsessed with the truth and accuracy. You always give answers in bullet points."
              },
              {
                "role": "user",
                "content": `${user_prompt}
Paragraphs:
` + string_paragraphs
              }
            ],
            temperature: 0,
            max_tokens: 1024,
            top_p: 1,
            frequency_penalty: 0,
            presence_penalty: 0
          });
          summary += response.data.choices[0].message.content + "\n";
        }
        summaries.push(summary);
        let source = `[${title}](${url})`;
        sources.push(source);
        counter++;
        if (counter == 5) {
          break;
        }
      }
      for (let i = 0; i < summaries.length; i++) {
        message += `#### ${sources[i]}
`;
        message += summaries[i] + "\n\n";
      }
      editor.replaceRange(message, editor.getCursor());
      this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
      this.status.setAttr("title", "Copilot is ready");
    } catch (error) {
      console.log(`Error while doing research: ${error}`);
      new import_obsidian3.Notice(`Error while doing research`);
    }
  }
  async competition_research(description, editor) {
    this.status.setText("\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot researching the competition...");
    this.status.setAttr("title", "Copilot is researching the competition...");
    try {
      const options = { method: "GET", headers: { "X-API-Key": "3bb35f4b-02de-4365-8607-8b6f80c04f27<__>1OCpXKETU8N2v5f4W7kXsPrt" } };
      const configuration = new Configuration({
        apiKey: openaiAPIKey
      });
      delete configuration.baseOptions.headers["User-Agent"];
      const openai = new OpenAIApi(configuration);
      let message = "## Competition Research\n";
      let websites = ["techcrunch.com", "businessinsider.com"];
      for (let website of websites) {
        this.status.setText(`\u{1F9D1}\u200D\u{1F680} \u{1F50E}: VC Copilot ${website} research...`);
        this.status.setAttr("title", `Copilot is researching ${website}...`);
        let summaries = [];
        let sources = [];
        let query = `site:${website} ${description}`;
        let result = await this.you_research(query);
        let counter = 0;
        let user_prompt = `Highlight the most important facts for an investor from the following paragraphs. Always respond in the following format: 
                - problems to be solved
                - product and technology
                - money raised
                - team
                - other important points`;
        for (let element of result) {
          let snippets = element["snippets"];
          let title = element["title"];
          let url = element["url"];
          let summary = "";
          let paragraphs = snippets;
          paragraphs[0] = "- " + paragraphs[0];
          let string_paragraphs = paragraphs.join("\n\n- ");
          const response = await openai.createChatCompletion({
            model: "gpt-4-1106-preview",
            messages: [
              {
                "role": "system",
                "content": "Act as an investigative journalist who is obsessed with the truth and accuracy. You always give answers in bullet points."
              },
              {
                "role": "user",
                "content": `${user_prompt}
Paragraphs:
` + string_paragraphs
              }
            ],
            temperature: 0,
            max_tokens: 1024,
            top_p: 1,
            frequency_penalty: 0,
            presence_penalty: 0
          });
          summary += response.data.choices[0].message.content + "\n";
          summaries.push(summary);
          let source = `[${title}](${url})`;
          sources.push(source);
          counter++;
          if (counter == 5) {
            break;
          }
        }
        for (let i = 0; i < summaries.length; i++) {
          message += `#### ${sources[i]}
`;
          message += summaries[i] + "\n\n";
        }
      }
      editor.replaceRange(message, editor.getCursor());
      this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
      this.status.setAttr("title", "Copilot is ready");
    } catch (error) {
      console.log(`Error while doing competitive research: ${error}`);
      new import_obsidian3.Notice(`Error while doing competitive research`);
    }
  }
  async specific_web_research(task, website, search_query, editor) {
    let presentation_prompt = "Summarize the following paragraphs.";
    let title = "New Section";
    if (task.toLowerCase() == "competition") {
      title = "Competition Research";
      presentation_prompt = `Highlight the most important facts for an investor from the following paragraphs. If there are none, say "Nothing". Otherwise always respond in the following format: 
            - Problems to be solved
            - Product and Technology
            - Money raised
            - Team
            - Other important points`;
    }
    this.websearch_and_summary(title, website, search_query, presentation_prompt, editor);
  }
  async defensibility_analysis(startup_description, editor) {
    let system_prompt = "Use the following guidelines to determine what kinds of defensibility a startup can build with time:\n        - **Network effect**: When every user creates more value for other users, forming a positive feedback loop. This can be local or global, and is one of the few forms of defensibility that can arise immediately upon launch of a company.\n        - **Platform effect**: When a company becomes a sticky product because so many other companies have integrated against it. This usually comes after a company has enough users that others want to build against its platform to reach them.\n        - **Integrations**: When a company integrates against many other APIs, code bases, etc. that are hard to reproduce, or when a company's services do integrations for the company against other vendors. This makes it hard to displace the company as each implementation is a unique and complex process.\n        - **Building a ton of stuff**: When a company bundles and cross sells products that prevent other companies from finding a wedge to compete with them, or when a company has a big product footprint that makes it hard for new entrants to reach feature parity.\n        - **Deals**: When a company secures early access, exclusive provider or distribution, or backend deals that give it scale, brand, or access advantages over competitors. This may include deals with APIs, data sources, regulators, or customers.\n        - **Sales as moat**: When a company locks in customers with long term contracts, or has a sales process that makes it easier for enterprises to buy from them than from new suppliers. This may include security reviews, procurement processes, or pricing strategies.\n        - **Regulatory**: When a company receives regulatory approvals that provide a moat. This may include licenses, permits, or exemptions that are hard to obtain or replicate by competitors.\n        - **Data or system of record effect**: When a company has unique or proprietary data, or owns a customer's data or has a long historical record of it. This can create defensibility by making the data more valuable and harder to switch away from. Similarly, being a system of record for a user, entity, etc. can be a powerful position to be in.\n        - **Scale effects**: When a company has access to large sums of money or business volume that allows it to do things that will make it difficult for competitors to upend them. This may include capital scale, business scale and negotiation, or pricing advantages.\n        - **Open source**: When a company benefits from being the creator or contributor of an open source software project that is widely used or adopted by developers. This can create defensibility by giving the company brand recognition, community influence, and talent access.\n        - **Brand**: When a company becomes synonymous with the thing they do, often by creating a new product category, or doing something vastly better than competitors. This can create defensibility by making the company the default choice for customers and creating loyalty and trust.\n        - **IP moat**: When a company has intellectual property that protects its product or technology from being copied or infringed by competitors. This tends to be more effective in hard tech or biotech companies than most consumer or SaaS products.\n        - **Speed**: When a company can execute faster and better than competitors, especially incumbents. This can create defensibility by allowing the company to iterate quickly, respond to customer feedback, and hire and close candidates faster.\n        - **Pricing**: When a company can offer a lower price than competitors due to a lower cost structure, a lack of an existing product to cannibalize, or a different business model. This can create defensibility by attracting more customers and creating higher margins.\n        - **New business models**: When a company can innovate on business model to create a higher leverage business or different incentive structure. This can create defensibility by disrupting incumbents who are used to traditional ways of doing things.\nAlways think step by step!";
    let query = "Startup Description:\n" + startup_description + "\nWhat types of defensibility does this startup have? Which types of defensibility does it lack or could improve upon? Let us think step by step";
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot analyzing defensibility...");
    this.status.setAttr("title", "VC Copilot is analyzing defensibility of the startup...");
    let analysis = await openai_js(query, system_prompt, 1024, 1);
    analysis = "## Defensibility Analysis\n" + analysis;
    editor.replaceRange(analysis, editor.getCursor());
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
    this.status.setAttr("title", "VC Copilot is ready");
  }
  async guidance_workflow(startup_description, editor) {
    let system_prompt = "You are a helpful assistant to a venture capital investor. Your main job is guiding the investor to always focus on the bigger picture and find the core arguments they should focus us. Your arguments are always concise and to the point. When needed, you can guide the investor by asking questions that help them focus on the essentials.\nIn your analysis, you should always be customer-centric and focused on the target customer of the startup.\nThe following aspects are extremely crucial to the investor:\n- Who is the target customer for the startup?\n- What is the hardest part about the job of the target customer?\n- What is the startup's unique value proposition for the target customer?";
    let query = "Startup Description:\n" + startup_description + "\nWhat is the core problem this startup is solving?";
    let user_queries = [];
    user_queries.push(query);
    let hypothesis = "What are the core hypotheses the startup has to validate to prove that solving this core problem is important enough to allow them to build a unicorn?";
    user_queries.push(hypothesis);
    let classify = "Recommend some suitable product categories to classify the product";
    user_queries.push(classify);
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot analyzing startup...");
    this.status.setAttr("title", "VC Copilot is analyzing the startup...");
    let replies = await openai_js_multiturn(user_queries, system_prompt, 1024, 1);
    replies[0] = "#### Core Problem\n" + replies[0] + "\n";
    replies[1] = "#### Hypotheses\n" + replies[1] + "\n";
    replies[2] = "#### Categories\n" + replies[2] + "\n";
    let final_text = replies[0] + replies[1] + replies[2];
    editor.replaceRange(final_text, editor.getCursor());
    this.status.setText("\u{1F9D1}\u200D\u{1F680}: VC Copilot ready");
    this.status.setAttr("title", "VC Copilot is ready");
  }
};
var VCCopilotSettingsTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for your copilot" });
    new import_obsidian3.Setting(containerEl).setName("OpenAI API Key").setDesc("Your OpenAI API Key").addText((text) => text.setPlaceholder("Enter key").setValue(this.plugin.settings.openAIKey).onChange(async (value) => {
      this.plugin.settings.openAIKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Affinity: API Key").setDesc("Your Affinity API Key").addText((text) => text.setPlaceholder("Enter key").setValue(this.plugin.settings.affinityKey).onChange(async (value) => {
      this.plugin.settings.affinityKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Affinity: Owner Value").setDesc("Every person has a code on Affinity. Please give in the code for the person that should be added as owner of startups and VCs that gets pushed").addText((text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.owner_person_value).onChange(async (value) => {
      this.plugin.settings.owner_person_value = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Affinity: Connection Owner Field ID").setDesc("Depending on the list you save fellow VCs in, there is a field that represent the 'connection owner with the fund', enter the field id here").addText((text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.connection_owner_field_id).onChange(async (value) => {
      this.plugin.settings.connection_owner_field_id = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Affinity: Venture Network List ID").setDesc("Please enter the list id for the list you save your relationships with VCs in").addText((text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.venture_network_list_id).onChange(async (value) => {
      this.plugin.settings.venture_network_list_id = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Investor Names").setDesc("Enter the names of your team members (investors) separated by a comma. This helps the Fireflies summarizer to focus more on the founder").addText((text) => text.setValue(this.plugin.settings.team_names).onChange(async (value) => {
      this.plugin.settings.team_names = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Fireflies API Key").setDesc("Enter the Fireflies API Key").addText((text) => text.setValue(this.plugin.settings.fireflies_api).onChange(async (value) => {
      this.plugin.settings.fireflies_api = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("You.com API Key").setDesc("Enter the You.com API Key").addText((text) => text.setValue(this.plugin.settings.you_api).onChange(async (value) => {
      this.plugin.settings.you_api = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZW5oYW5jZUVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy90cmFuc2l0aW9uYWwuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2Nvb2tpZXMuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9idWlsZEZ1bGxQYXRoLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWwuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL2lzQ2FuY2VsLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9tZXJnZUNvbmZpZy5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvZW52L2RhdGEuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdmFsaWRhdG9yLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQXhpb3NFcnJvci5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy9heGlvcy9saWIvYXhpb3MuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvYXhpb3MvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9kaXN0L2Jhc2UuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9kaXN0L2NvbW1vbi5qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL2Rpc3QvYXBpLmpzIiwgIm5vZGVfbW9kdWxlcy9mb3JtLWRhdGEvbGliL2Jyb3dzZXIuanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9kaXN0L2NvbmZpZ3VyYXRpb24uanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9kaXN0L2luZGV4LmpzIiwgIm1haW4udHMiLCAidXRpbHMudHMiLCAibW9kYWwudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpXG4gICAgJiYgdHlwZW9mIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGb3JtRGF0YV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcpKSB7XG4gICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHZhbCkgJiYgKHZhbC5idWZmZXIpICYmIChpc0FycmF5QnVmZmVyKHZhbC5idWZmZXIpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgcGxhaW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7XG4gIGlmICh0b1N0cmluZy5jYWxsKHZhbCkgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpO1xuICByZXR1cm4gcHJvdG90eXBlID09PSBudWxsIHx8IHByb3RvdHlwZSA9PT0gT2JqZWN0LnByb3RvdHlwZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ZpbGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyZWFtKHZhbCkge1xuICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgVVJMU2VhcmNoUGFyYW1zXSc7XG59XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIChuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmIChpc1BsYWluT2JqZWN0KHJlc3VsdFtrZXldKSAmJiBpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2Uoe30sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG4gIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYnl0ZSBvcmRlciBtYXJrZXIuIFRoaXMgY2F0Y2hlcyBFRiBCQiBCRiAodGhlIFVURi04IEJPTSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCB3aXRoIEJPTVxuICogQHJldHVybiB7c3RyaW5nfSBjb250ZW50IHZhbHVlIHdpdGhvdXQgQk9NXG4gKi9cbmZ1bmN0aW9uIHN0cmlwQk9NKGNvbnRlbnQpIHtcbiAgaWYgKGNvbnRlbnQuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMSk7XG4gIH1cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcjogaXNCdWZmZXIsXG4gIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcbiAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuICBpc051bWJlcjogaXNOdW1iZXIsXG4gIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgaXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc0RhdGU6IGlzRGF0ZSxcbiAgaXNGaWxlOiBpc0ZpbGUsXG4gIGlzQmxvYjogaXNCbG9iLFxuICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbTogaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBmb3JFYWNoOiBmb3JFYWNoLFxuICBtZXJnZTogbWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltLFxuICBzdHJpcEJPTTogc3RyaXBCT01cbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG4gICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnRzID0gW107XG5cbiAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHZhciBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG5cbiAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkLCBvcHRpb25zKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkLFxuICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLFxuICAgIHJ1bldoZW46IG9wdGlvbnMgPyBvcHRpb25zLnJ1bldoZW4gOiBudWxsXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG5cbiAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIGVycm9yLmlzQXhpb3NFcnJvciA9IHRydWU7XG5cbiAgZXJyb3IudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBTdGFuZGFyZFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgLy8gTWljcm9zb2Z0XG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG4gICAgICAvLyBNb3ppbGxhXG4gICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSxcbiAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcbiAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIC8vIEF4aW9zXG4gICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgc3RhdHVzOiB0aGlzLnJlc3BvbnNlICYmIHRoaXMucmVzcG9uc2Uuc3RhdHVzID8gdGhpcy5yZXNwb25zZS5zdGF0dXMgOiBudWxsXG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIGVycm9yO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzaWxlbnRKU09OUGFyc2luZzogdHJ1ZSxcbiAgZm9yY2VkSlNPTlBhcnNpbmc6IHRydWUsXG4gIGNsYXJpZnlUaW1lb3V0RXJyb3I6IGZhbHNlXG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuL2NyZWF0ZUVycm9yJyk7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcbiAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChjcmVhdGVFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICBudWxsLFxuICAgICAgcmVzcG9uc2UucmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICAgIHZhciBjb29raWUgPSBbXTtcbiAgICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7IHJldHVybiBudWxsOyB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgICB9O1xuICAgIH0pKClcbik7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcbiAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gIHJldHVybiAvXihbYS16XVthLXpcXGQrXFwtLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkge1xuICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuICAgIDogYmFzZVVSTDtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNBYnNvbHV0ZVVSTCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTCcpO1xudmFyIGNvbWJpbmVVUkxzID0gcmVxdWlyZSgnLi4vaGVscGVycy9jb21iaW5lVVJMcycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgYmFzZVVSTCB3aXRoIHRoZSByZXF1ZXN0ZWRVUkwsXG4gKiBvbmx5IHdoZW4gdGhlIHJlcXVlc3RlZFVSTCBpcyBub3QgYWxyZWFkeSBhbiBhYnNvbHV0ZSBVUkwuXG4gKiBJZiB0aGUgcmVxdWVzdFVSTCBpcyBhYnNvbHV0ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSByZXF1ZXN0ZWRVUkwgdW50b3VjaGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFVSTCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgdG8gY29tYmluZVxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIGZ1bGwgcGF0aFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKSB7XG4gIGlmIChiYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCkpIHtcbiAgICByZXR1cm4gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKTtcbiAgfVxuICByZXR1cm4gcmVxdWVzdGVkVVJMO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLy8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbnZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGtleTtcbiAgdmFyIHZhbDtcbiAgdmFyIGk7XG5cbiAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblxuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4gIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLlxuICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICB2YXIgb3JpZ2luVVJMO1xuXG4gICAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7XG4gICAgICAgIHZhciBocmVmID0gdXJsO1xuXG4gICAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gICAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuICAgICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG4gICAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcbiAgICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6XG4gICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcbiAgICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcbiAgICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICAgIH07XG4gICAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgIH0pKClcbik7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufVxuXG5DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xufTtcblxuQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgc2V0dGxlID0gcmVxdWlyZSgnLi8uLi9jb3JlL3NldHRsZScpO1xudmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgYnVpbGRGdWxsUGF0aCA9IHJlcXVpcmUoJy4uL2NvcmUvYnVpbGRGdWxsUGF0aCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7XG52YXIgdHJhbnNpdGlvbmFsRGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cy90cmFuc2l0aW9uYWwnKTtcbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvQ2FuY2VsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcbiAgICB2YXIgcmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICB2YXIgb25DYW5jZWxlZDtcbiAgICBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgICAgICBjb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maWcuc2lnbmFsKSB7XG4gICAgICAgIGNvbmZpZy5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkNhbmNlbGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChjb25maWcuYXV0aC5wYXNzd29yZCkpIDogJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHZhciBmdWxsUGF0aCA9IGJ1aWxkRnVsbFBhdGgoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGZ1bGxQYXRoLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXG4gICAgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVNcbiAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblxuICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgfHwgIHJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nID9cbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKGZ1bmN0aW9uIF9yZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCBmdW5jdGlvbiBfcmVqZWN0KGVycikge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoJ29ubG9hZGVuZCcgaW4gcmVxdWVzdCkge1xuICAgICAgLy8gVXNlIG9ubG9hZGVuZCBpZiBhdmFpbGFibGVcbiAgICAgIHJlcXVlc3Qub25sb2FkZW5kID0gb25sb2FkZW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlIHRvIGVtdWxhdGUgb25sb2FkZW5kXG4gICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVhZHlzdGF0ZSBoYW5kbGVyIGlzIGNhbGxpbmcgYmVmb3JlIG9uZXJyb3Igb3Igb250aW1lb3V0IGhhbmRsZXJzLFxuICAgICAgICAvLyBzbyB3ZSBzaG91bGQgY2FsbCBvbmxvYWRlbmQgb24gdGhlIG5leHQgJ3RpY2snXG4gICAgICAgIHNldFRpbWVvdXQob25sb2FkZW5kKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxuICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIHZhciB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXQgPyAndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnIDogJ3RpbWVvdXQgZXhjZWVkZWQnO1xuICAgICAgdmFyIHRyYW5zaXRpb25hbCA9IGNvbmZpZy50cmFuc2l0aW9uYWwgfHwgdHJhbnNpdGlvbmFsRGVmYXVsdHM7XG4gICAgICBpZiAoY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSA9IGNvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlO1xuICAgICAgfVxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlLFxuICAgICAgICBjb25maWcsXG4gICAgICAgIHRyYW5zaXRpb25hbC5jbGFyaWZ5VGltZW91dEVycm9yID8gJ0VUSU1FRE9VVCcgOiAnRUNPTk5BQk9SVEVEJyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGZ1bGxQYXRoKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cbiAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSAhIWNvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChyZXNwb25zZVR5cGUgJiYgcmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuIHx8IGNvbmZpZy5zaWduYWwpIHtcbiAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgICBvbkNhbmNlbGVkID0gZnVuY3Rpb24oY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZWplY3QoIWNhbmNlbCB8fCAoY2FuY2VsICYmIGNhbmNlbC50eXBlKSA/IG5ldyBDYW5jZWwoJ2NhbmNlbGVkJykgOiBjYW5jZWwpO1xuICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgICAgfTtcblxuICAgICAgY29uZmlnLmNhbmNlbFRva2VuICYmIGNvbmZpZy5jYW5jZWxUb2tlbi5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICBpZiAoY29uZmlnLnNpZ25hbCkge1xuICAgICAgICBjb25maWcuc2lnbmFsLmFib3J0ZWQgPyBvbkNhbmNlbGVkKCkgOiBjb25maWcuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFyZXF1ZXN0RGF0YSkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xudmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSByZXF1aXJlKCcuLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2VuaGFuY2VFcnJvcicpO1xudmFyIHRyYW5zaXRpb25hbERlZmF1bHRzID0gcmVxdWlyZSgnLi90cmFuc2l0aW9uYWwnKTtcblxudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi4vYWRhcHRlcnMveGhyJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgLy8gRm9yIG5vZGUgdXNlIEhUVFAgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuLi9hZGFwdGVycy9odHRwJyk7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeVNhZmVseShyYXdWYWx1ZSwgcGFyc2VyLCBlbmNvZGVyKSB7XG4gIGlmICh1dGlscy5pc1N0cmluZyhyYXdWYWx1ZSkpIHtcbiAgICB0cnkge1xuICAgICAgKHBhcnNlciB8fCBKU09OLnBhcnNlKShyYXdWYWx1ZSk7XG4gICAgICByZXR1cm4gdXRpbHMudHJpbShyYXdWYWx1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUubmFtZSAhPT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoZW5jb2RlciB8fCBKU09OLnN0cmluZ2lmeSkocmF3VmFsdWUpO1xufVxuXG52YXIgZGVmYXVsdHMgPSB7XG5cbiAgdHJhbnNpdGlvbmFsOiB0cmFuc2l0aW9uYWxEZWZhdWx0cyxcblxuICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLFxuXG4gIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdBY2NlcHQnKTtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTtcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpIHx8IChoZWFkZXJzICYmIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID09PSAnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHJldHVybiBzdHJpbmdpZnlTYWZlbHkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICB2YXIgdHJhbnNpdGlvbmFsID0gdGhpcy50cmFuc2l0aW9uYWwgfHwgZGVmYXVsdHMudHJhbnNpdGlvbmFsO1xuICAgIHZhciBzaWxlbnRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuc2lsZW50SlNPTlBhcnNpbmc7XG4gICAgdmFyIGZvcmNlZEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5mb3JjZWRKU09OUGFyc2luZztcbiAgICB2YXIgc3RyaWN0SlNPTlBhcnNpbmcgPSAhc2lsZW50SlNPTlBhcnNpbmcgJiYgdGhpcy5yZXNwb25zZVR5cGUgPT09ICdqc29uJztcblxuICAgIGlmIChzdHJpY3RKU09OUGFyc2luZyB8fCAoZm9yY2VkSlNPTlBhcnNpbmcgJiYgdXRpbHMuaXNTdHJpbmcoZGF0YSkgJiYgZGF0YS5sZW5ndGgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKHN0cmljdEpTT05QYXJzaW5nKSB7XG4gICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgZW5oYW5jZUVycm9yKGUsIHRoaXMsICdFX0pTT05fUEFSU0UnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcbiAgbWF4Qm9keUxlbmd0aDogLTEsXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfSxcblxuICBoZWFkZXJzOiB7XG4gICAgY29tbW9uOiB7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcbiAgICB9XG4gIH1cbn07XG5cbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcbiAgdmFyIGNvbnRleHQgPSB0aGlzIHx8IGRlZmF1bHRzO1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuICAgIGRhdGEgPSBmbi5jYWxsKGNvbnRleHQsIGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgdHJhbnNmb3JtRGF0YSA9IHJlcXVpcmUoJy4vdHJhbnNmb3JtRGF0YScpO1xudmFyIGlzQ2FuY2VsID0gcmVxdWlyZSgnLi4vY2FuY2VsL2lzQ2FuY2VsJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cycpO1xudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9DYW5jZWwnKTtcblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5mdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykge1xuICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTtcbiAgfVxuXG4gIGlmIChjb25maWcuc2lnbmFsICYmIGNvbmZpZy5zaWduYWwuYWJvcnRlZCkge1xuICAgIHRocm93IG5ldyBDYW5jZWwoJ2NhbmNlbGVkJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgLy8gRW5zdXJlIGhlYWRlcnMgZXhpc3RcbiAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcblxuICAvLyBUcmFuc2Zvcm0gcmVxdWVzdCBkYXRhXG4gIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgIGNvbmZpZyxcbiAgICBjb25maWcuZGF0YSxcbiAgICBjb25maWcuaGVhZGVycyxcbiAgICBjb25maWcudHJhbnNmb3JtUmVxdWVzdFxuICApO1xuXG4gIC8vIEZsYXR0ZW4gaGVhZGVyc1xuICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKFxuICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vbiB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVyc1xuICApO1xuXG4gIHV0aWxzLmZvckVhY2goXG4gICAgWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAncG9zdCcsICdwdXQnLCAncGF0Y2gnLCAnY29tbW9uJ10sXG4gICAgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7XG4gICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTtcbiAgICB9XG4gICk7XG5cbiAgdmFyIGFkYXB0ZXIgPSBjb25maWcuYWRhcHRlciB8fCBkZWZhdWx0cy5hZGFwdGVyO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgICAgY29uZmlnLFxuICAgICAgcmVzcG9uc2UuZGF0YSxcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEsXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbi8qKlxuICogQ29uZmlnLXNwZWNpZmljIG1lcmdlLWZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYSBuZXcgY29uZmlnLW9iamVjdFxuICogYnkgbWVyZ2luZyB0d28gY29uZmlndXJhdGlvbiBvYmplY3RzIHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcxXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMlxuICogQHJldHVybnMge09iamVjdH0gTmV3IG9iamVjdCByZXN1bHRpbmcgZnJvbSBtZXJnaW5nIGNvbmZpZzIgdG8gY29uZmlnMVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9O1xuICB2YXIgY29uZmlnID0ge307XG5cbiAgZnVuY3Rpb24gZ2V0TWVyZ2VkVmFsdWUodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdCh0YXJnZXQpICYmIHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlKHRhcmdldCwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlKHt9LCBzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gc291cmNlLnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhwcm9wKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcyW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzFbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihwcm9wKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcyW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMltwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzFbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEaXJlY3RLZXlzKHByb3ApIHtcbiAgICBpZiAocHJvcCBpbiBjb25maWcyKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoY29uZmlnMVtwcm9wXSwgY29uZmlnMltwcm9wXSk7XG4gICAgfSBlbHNlIGlmIChwcm9wIGluIGNvbmZpZzEpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzFbcHJvcF0pO1xuICAgIH1cbiAgfVxuXG4gIHZhciBtZXJnZU1hcCA9IHtcbiAgICAndXJsJzogdmFsdWVGcm9tQ29uZmlnMixcbiAgICAnbWV0aG9kJzogdmFsdWVGcm9tQ29uZmlnMixcbiAgICAnZGF0YSc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ2Jhc2VVUkwnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd0cmFuc2Zvcm1SZXF1ZXN0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNmb3JtUmVzcG9uc2UnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdwYXJhbXNTZXJpYWxpemVyJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndGltZW91dCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RpbWVvdXRNZXNzYWdlJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnd2l0aENyZWRlbnRpYWxzJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnYWRhcHRlcic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3Jlc3BvbnNlVHlwZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3hzcmZDb29raWVOYW1lJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAneHNyZkhlYWRlck5hbWUnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdvblVwbG9hZFByb2dyZXNzJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnb25Eb3dubG9hZFByb2dyZXNzJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnZGVjb21wcmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ21heENvbnRlbnRMZW5ndGgnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdtYXhCb2R5TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNwb3J0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cEFnZW50JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cHNBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2NhbmNlbFRva2VuJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnc29ja2V0UGF0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3Jlc3BvbnNlRW5jb2RpbmcnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd2YWxpZGF0ZVN0YXR1cyc6IG1lcmdlRGlyZWN0S2V5c1xuICB9O1xuXG4gIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoY29uZmlnMSkuY29uY2F0KE9iamVjdC5rZXlzKGNvbmZpZzIpKSwgZnVuY3Rpb24gY29tcHV0ZUNvbmZpZ1ZhbHVlKHByb3ApIHtcbiAgICB2YXIgbWVyZ2UgPSBtZXJnZU1hcFtwcm9wXSB8fCBtZXJnZURlZXBQcm9wZXJ0aWVzO1xuICAgIHZhciBjb25maWdWYWx1ZSA9IG1lcmdlKHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG4iLCAibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwidmVyc2lvblwiOiBcIjAuMjYuMVwiXG59OyIsICIndXNlIHN0cmljdCc7XG5cbnZhciBWRVJTSU9OID0gcmVxdWlyZSgnLi4vZW52L2RhdGEnKS52ZXJzaW9uO1xuXG52YXIgdmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuWydvYmplY3QnLCAnYm9vbGVhbicsICdudW1iZXInLCAnZnVuY3Rpb24nLCAnc3RyaW5nJywgJ3N5bWJvbCddLmZvckVhY2goZnVuY3Rpb24odHlwZSwgaSkge1xuICB2YWxpZGF0b3JzW3R5cGVdID0gZnVuY3Rpb24gdmFsaWRhdG9yKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gdHlwZSB8fCAnYScgKyAoaSA8IDEgPyAnbiAnIDogJyAnKSArIHR5cGU7XG4gIH07XG59KTtcblxudmFyIGRlcHJlY2F0ZWRXYXJuaW5ncyA9IHt9O1xuXG4vKipcbiAqIFRyYW5zaXRpb25hbCBvcHRpb24gdmFsaWRhdG9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufGJvb2xlYW4/fSB2YWxpZGF0b3IgLSBzZXQgdG8gZmFsc2UgaWYgdGhlIHRyYW5zaXRpb25hbCBvcHRpb24gaGFzIGJlZW4gcmVtb3ZlZFxuICogQHBhcmFtIHtzdHJpbmc/fSB2ZXJzaW9uIC0gZGVwcmVjYXRlZCB2ZXJzaW9uIC8gcmVtb3ZlZCBzaW5jZSB2ZXJzaW9uXG4gKiBAcGFyYW0ge3N0cmluZz99IG1lc3NhZ2UgLSBzb21lIG1lc3NhZ2Ugd2l0aCBhZGRpdGlvbmFsIGluZm9cbiAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAqL1xudmFsaWRhdG9ycy50cmFuc2l0aW9uYWwgPSBmdW5jdGlvbiB0cmFuc2l0aW9uYWwodmFsaWRhdG9yLCB2ZXJzaW9uLCBtZXNzYWdlKSB7XG4gIGZ1bmN0aW9uIGZvcm1hdE1lc3NhZ2Uob3B0LCBkZXNjKSB7XG4gICAgcmV0dXJuICdbQXhpb3MgdicgKyBWRVJTSU9OICsgJ10gVHJhbnNpdGlvbmFsIG9wdGlvbiBcXCcnICsgb3B0ICsgJ1xcJycgKyBkZXNjICsgKG1lc3NhZ2UgPyAnLiAnICsgbWVzc2FnZSA6ICcnKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3B0LCBvcHRzKSB7XG4gICAgaWYgKHZhbGlkYXRvciA9PT0gZmFsc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihmb3JtYXRNZXNzYWdlKG9wdCwgJyBoYXMgYmVlbiByZW1vdmVkJyArICh2ZXJzaW9uID8gJyBpbiAnICsgdmVyc2lvbiA6ICcnKSkpO1xuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uICYmICFkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSkge1xuICAgICAgZGVwcmVjYXRlZFdhcm5pbmdzW29wdF0gPSB0cnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgZm9ybWF0TWVzc2FnZShcbiAgICAgICAgICBvcHQsXG4gICAgICAgICAgJyBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYnICsgdmVyc2lvbiArICcgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmVhciBmdXR1cmUnXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRvciA/IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRzKSA6IHRydWU7XG4gIH07XG59O1xuXG4vKipcbiAqIEFzc2VydCBvYmplY3QncyBwcm9wZXJ0aWVzIHR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge29iamVjdH0gc2NoZW1hXG4gKiBAcGFyYW0ge2Jvb2xlYW4/fSBhbGxvd1Vua25vd25cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRPcHRpb25zKG9wdGlvbnMsIHNjaGVtYSwgYWxsb3dVbmtub3duKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gIH1cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSA+IDApIHtcbiAgICB2YXIgb3B0ID0ga2V5c1tpXTtcbiAgICB2YXIgdmFsaWRhdG9yID0gc2NoZW1hW29wdF07XG4gICAgaWYgKHZhbGlkYXRvcikge1xuICAgICAgdmFyIHZhbHVlID0gb3B0aW9uc1tvcHRdO1xuICAgICAgdmFyIHJlc3VsdCA9IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdGlvbnMpO1xuICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gJyArIG9wdCArICcgbXVzdCBiZSAnICsgcmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoYWxsb3dVbmtub3duICE9PSB0cnVlKSB7XG4gICAgICB0aHJvdyBFcnJvcignVW5rbm93biBvcHRpb24gJyArIG9wdCk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhc3NlcnRPcHRpb25zOiBhc3NlcnRPcHRpb25zLFxuICB2YWxpZGF0b3JzOiB2YWxpZGF0b3JzXG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIEludGVyY2VwdG9yTWFuYWdlciA9IHJlcXVpcmUoJy4vSW50ZXJjZXB0b3JNYW5hZ2VyJyk7XG52YXIgZGlzcGF0Y2hSZXF1ZXN0ID0gcmVxdWlyZSgnLi9kaXNwYXRjaFJlcXVlc3QnKTtcbnZhciBtZXJnZUNvbmZpZyA9IHJlcXVpcmUoJy4vbWVyZ2VDb25maWcnKTtcbnZhciB2YWxpZGF0b3IgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3ZhbGlkYXRvcicpO1xuXG52YXIgdmFsaWRhdG9ycyA9IHZhbGlkYXRvci52YWxpZGF0b3JzO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnT3JVcmwsIGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZ09yVXJsID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICBjb25maWcudXJsID0gY29uZmlnT3JVcmw7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnID0gY29uZmlnT3JVcmwgfHwge307XG4gIH1cblxuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuXG4gIC8vIFNldCBjb25maWcubWV0aG9kXG4gIGlmIChjb25maWcubWV0aG9kKSB7XG4gICAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRzLm1ldGhvZCkge1xuICAgIGNvbmZpZy5tZXRob2QgPSB0aGlzLmRlZmF1bHRzLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZy5tZXRob2QgPSAnZ2V0JztcbiAgfVxuXG4gIHZhciB0cmFuc2l0aW9uYWwgPSBjb25maWcudHJhbnNpdGlvbmFsO1xuXG4gIGlmICh0cmFuc2l0aW9uYWwgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHRyYW5zaXRpb25hbCwge1xuICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICBmb3JjZWRKU09OUGFyc2luZzogdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwodmFsaWRhdG9ycy5ib29sZWFuKSxcbiAgICAgIGNsYXJpZnlUaW1lb3V0RXJyb3I6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbilcbiAgICB9LCBmYWxzZSk7XG4gIH1cblxuICAvLyBmaWx0ZXIgb3V0IHNraXBwZWQgaW50ZXJjZXB0b3JzXG4gIHZhciByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICB2YXIgc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzID0gdHJ1ZTtcbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAnZnVuY3Rpb24nICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgPSBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgJiYgaW50ZXJjZXB0b3Iuc3luY2hyb25vdXM7XG5cbiAgICByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB2YXIgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluID0gW107XG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHZhciBwcm9taXNlO1xuXG4gIGlmICghc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzKSB7XG4gICAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcblxuICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGNoYWluLCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbik7XG4gICAgY2hhaW4gPSBjaGFpbi5jb25jYXQocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcblxuICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcbiAgICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cblxuICB2YXIgbmV3Q29uZmlnID0gY29uZmlnO1xuICB3aGlsZSAocmVxdWVzdEludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgdmFyIG9uRnVsZmlsbGVkID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKTtcbiAgICB2YXIgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCk7XG4gICAgdHJ5IHtcbiAgICAgIG5ld0NvbmZpZyA9IG9uRnVsZmlsbGVkKG5ld0NvbmZpZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG9uUmVqZWN0ZWQoZXJyb3IpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBwcm9taXNlID0gZGlzcGF0Y2hSZXF1ZXN0KG5ld0NvbmZpZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfVxuXG4gIHdoaWxlIChyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5BeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykge1xuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICByZXR1cm4gYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cXD8vLCAnJyk7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiAoY29uZmlnIHx8IHt9KS5kYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG5cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4oZnVuY3Rpb24oY2FuY2VsKSB7XG4gICAgaWYgKCF0b2tlbi5fbGlzdGVuZXJzKSByZXR1cm47XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgbCA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4uX2xpc3RlbmVyc1tpXShjYW5jZWwpO1xuICAgIH1cbiAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgfSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4gPSBmdW5jdGlvbihvbmZ1bGZpbGxlZCkge1xuICAgIHZhciBfcmVzb2x2ZTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgdG9rZW4uc3Vic2NyaWJlKHJlc29sdmUpO1xuICAgICAgX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgcHJvbWlzZS5jYW5jZWwgPSBmdW5jdGlvbiByZWplY3QoKSB7XG4gICAgICB0b2tlbi51bnN1YnNjcmliZShfcmVzb2x2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xuXG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcbiAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG4gIGlmICh0aGlzLnJlYXNvbikge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xuICB9XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbFxuICovXG5cbkNhbmNlbFRva2VuLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgbGlzdGVuZXIodGhpcy5yZWFzb24pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0gW2xpc3RlbmVyXTtcbiAgfVxufTtcblxuLyoqXG4gKiBVbnN1YnNjcmliZSBmcm9tIHRoZSBjYW5jZWwgc2lnbmFsXG4gKi9cblxuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgaWYgKCF0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGluZGV4ID0gdGhpcy5fbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cbiAqL1xuQ2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkge1xuICB2YXIgY2FuY2VsO1xuICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgIGNhbmNlbCA9IGM7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHRva2VuOiB0b2tlbixcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcbiAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTtcbiAgfTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvc1xuICpcbiAqIEBwYXJhbSB7Kn0gcGF5bG9hZCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBheWxvYWQgaXMgYW4gZXJyb3IgdGhyb3duIGJ5IEF4aW9zLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0F4aW9zRXJyb3IocGF5bG9hZCkge1xuICByZXR1cm4gdXRpbHMuaXNPYmplY3QocGF5bG9hZCkgJiYgKHBheWxvYWQuaXNBeGlvc0Vycm9yID09PSB0cnVlKTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG52YXIgQXhpb3MgPSByZXF1aXJlKCcuL2NvcmUvQXhpb3MnKTtcbnZhciBtZXJnZUNvbmZpZyA9IHJlcXVpcmUoJy4vY29yZS9tZXJnZUNvbmZpZycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIC8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbiAgaW5zdGFuY2UuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGRlZmF1bHRDb25maWcsIGluc3RhbmNlQ29uZmlnKSk7XG4gIH07XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbnZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblxuLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5heGlvcy5BeGlvcyA9IEF4aW9zO1xuXG4vLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW5cbmF4aW9zLkNhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbCcpO1xuYXhpb3MuQ2FuY2VsVG9rZW4gPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWxUb2tlbicpO1xuYXhpb3MuaXNDYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9pc0NhbmNlbCcpO1xuYXhpb3MuVkVSU0lPTiA9IHJlcXVpcmUoJy4vZW52L2RhdGEnKS52ZXJzaW9uO1xuXG4vLyBFeHBvc2UgYWxsL3NwcmVhZFxuYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59O1xuYXhpb3Muc3ByZWFkID0gcmVxdWlyZSgnLi9oZWxwZXJzL3NwcmVhZCcpO1xuXG4vLyBFeHBvc2UgaXNBeGlvc0Vycm9yXG5heGlvcy5pc0F4aW9zRXJyb3IgPSByZXF1aXJlKCcuL2hlbHBlcnMvaXNBeGlvc0Vycm9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuIiwgIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvYXhpb3MnKTsiLCAiXCJ1c2Ugc3RyaWN0XCI7XG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogT3BlbkFJIEFQSVxuICogQVBJcyBmb3Igc2FtcGxpbmcgZnJvbSBhbmQgZmluZS10dW5pbmcgbGFuZ3VhZ2UgbW9kZWxzXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDEuMi4wXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SZXF1aXJlZEVycm9yID0gZXhwb3J0cy5CYXNlQVBJID0gZXhwb3J0cy5DT0xMRUNUSU9OX0ZPUk1BVFMgPSBleHBvcnRzLkJBU0VfUEFUSCA9IHZvaWQgMDtcbmNvbnN0IGF4aW9zXzEgPSByZXF1aXJlKFwiYXhpb3NcIik7XG5leHBvcnRzLkJBU0VfUEFUSCA9IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MVwiLnJlcGxhY2UoL1xcLyskLywgXCJcIik7XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuQ09MTEVDVElPTl9GT1JNQVRTID0ge1xuICAgIGNzdjogXCIsXCIsXG4gICAgc3N2OiBcIiBcIixcbiAgICB0c3Y6IFwiXFx0XCIsXG4gICAgcGlwZXM6IFwifFwiLFxufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBCYXNlQVBJXG4gKi9cbmNsYXNzIEJhc2VBUEkge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb24sIGJhc2VQYXRoID0gZXhwb3J0cy5CQVNFX1BBVEgsIGF4aW9zID0gYXhpb3NfMS5kZWZhdWx0KSB7XG4gICAgICAgIHRoaXMuYmFzZVBhdGggPSBiYXNlUGF0aDtcbiAgICAgICAgdGhpcy5heGlvcyA9IGF4aW9zO1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhdGggPSBjb25maWd1cmF0aW9uLmJhc2VQYXRoIHx8IHRoaXMuYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkJhc2VBUEkgPSBCYXNlQVBJO1xuO1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIFJlcXVpcmVkRXJyb3JcbiAqIEBleHRlbmRzIHtFcnJvcn1cbiAqL1xuY2xhc3MgUmVxdWlyZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZCwgbXNnKSB7XG4gICAgICAgIHN1cGVyKG1zZyk7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJSZXF1aXJlZEVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0cy5SZXF1aXJlZEVycm9yID0gUmVxdWlyZWRFcnJvcjtcbiIsICJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBPcGVuQUkgQVBJXG4gKiBBUElzIGZvciBzYW1wbGluZyBmcm9tIGFuZCBmaW5lLXR1bmluZyBsYW5ndWFnZSBtb2RlbHNcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS4yLjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uID0gZXhwb3J0cy50b1BhdGhTdHJpbmcgPSBleHBvcnRzLnNlcmlhbGl6ZURhdGFJZk5lZWRlZCA9IGV4cG9ydHMuc2V0U2VhcmNoUGFyYW1zID0gZXhwb3J0cy5zZXRPQXV0aFRvT2JqZWN0ID0gZXhwb3J0cy5zZXRCZWFyZXJBdXRoVG9PYmplY3QgPSBleHBvcnRzLnNldEJhc2ljQXV0aFRvT2JqZWN0ID0gZXhwb3J0cy5zZXRBcGlLZXlUb09iamVjdCA9IGV4cG9ydHMuYXNzZXJ0UGFyYW1FeGlzdHMgPSBleHBvcnRzLkRVTU1ZX0JBU0VfVVJMID0gdm9pZCAwO1xuY29uc3QgYmFzZV8xID0gcmVxdWlyZShcIi4vYmFzZVwiKTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5EVU1NWV9CQVNFX1VSTCA9ICdodHRwczovL2V4YW1wbGUuY29tJztcbi8qKlxuICpcbiAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuYXNzZXJ0UGFyYW1FeGlzdHMgPSBmdW5jdGlvbiAoZnVuY3Rpb25OYW1lLCBwYXJhbU5hbWUsIHBhcmFtVmFsdWUpIHtcbiAgICBpZiAocGFyYW1WYWx1ZSA9PT0gbnVsbCB8fCBwYXJhbVZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IGJhc2VfMS5SZXF1aXJlZEVycm9yKHBhcmFtTmFtZSwgYFJlcXVpcmVkIHBhcmFtZXRlciAke3BhcmFtTmFtZX0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyAke2Z1bmN0aW9uTmFtZX0uYCk7XG4gICAgfVxufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXRBcGlLZXlUb09iamVjdCA9IGZ1bmN0aW9uIChvYmplY3QsIGtleVBhcmFtTmFtZSwgY29uZmlndXJhdGlvbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckFwaUtleVZhbHVlID0gdHlwZW9mIGNvbmZpZ3VyYXRpb24uYXBpS2V5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyB5aWVsZCBjb25maWd1cmF0aW9uLmFwaUtleShrZXlQYXJhbU5hbWUpXG4gICAgICAgICAgICAgICAgOiB5aWVsZCBjb25maWd1cmF0aW9uLmFwaUtleTtcbiAgICAgICAgICAgIG9iamVjdFtrZXlQYXJhbU5hbWVdID0gbG9jYWxWYXJBcGlLZXlWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXRCYXNpY0F1dGhUb09iamVjdCA9IGZ1bmN0aW9uIChvYmplY3QsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICBpZiAoY29uZmlndXJhdGlvbiAmJiAoY29uZmlndXJhdGlvbi51c2VybmFtZSB8fCBjb25maWd1cmF0aW9uLnBhc3N3b3JkKSkge1xuICAgICAgICBvYmplY3RbXCJhdXRoXCJdID0geyB1c2VybmFtZTogY29uZmlndXJhdGlvbi51c2VybmFtZSwgcGFzc3dvcmQ6IGNvbmZpZ3VyYXRpb24ucGFzc3dvcmQgfTtcbiAgICB9XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNldEJlYXJlckF1dGhUb09iamVjdCA9IGZ1bmN0aW9uIChvYmplY3QsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHR5cGVvZiBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyB5aWVsZCBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuKClcbiAgICAgICAgICAgICAgICA6IHlpZWxkIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW47XG4gICAgICAgICAgICBvYmplY3RbXCJBdXRob3JpemF0aW9uXCJdID0gXCJCZWFyZXIgXCIgKyBhY2Nlc3NUb2tlbjtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXRPQXV0aFRvT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgc2NvcGVzLCBjb25maWd1cmF0aW9uKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBY2Nlc3NUb2tlblZhbHVlID0gdHlwZW9mIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW4gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IHlpZWxkIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW4obmFtZSwgc2NvcGVzKVxuICAgICAgICAgICAgICAgIDogeWllbGQgY29uZmlndXJhdGlvbi5hY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIG9iamVjdFtcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJlYXJlciBcIiArIGxvY2FsVmFyQWNjZXNzVG9rZW5WYWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIHNldEZsYXR0ZW5lZFF1ZXJ5UGFyYW1zKHVybFNlYXJjaFBhcmFtcywgcGFyYW1ldGVyLCBrZXkgPSBcIlwiKSB7XG4gICAgaWYgKHBhcmFtZXRlciA9PSBudWxsKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHR5cGVvZiBwYXJhbWV0ZXIgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyYW1ldGVyKSkge1xuICAgICAgICAgICAgcGFyYW1ldGVyLmZvckVhY2goaXRlbSA9PiBzZXRGbGF0dGVuZWRRdWVyeVBhcmFtcyh1cmxTZWFyY2hQYXJhbXMsIGl0ZW0sIGtleSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1ldGVyKS5mb3JFYWNoKGN1cnJlbnRLZXkgPT4gc2V0RmxhdHRlbmVkUXVlcnlQYXJhbXModXJsU2VhcmNoUGFyYW1zLCBwYXJhbWV0ZXJbY3VycmVudEtleV0sIGAke2tleX0ke2tleSAhPT0gJycgPyAnLicgOiAnJ30ke2N1cnJlbnRLZXl9YCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodXJsU2VhcmNoUGFyYW1zLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB1cmxTZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgcGFyYW1ldGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVybFNlYXJjaFBhcmFtcy5zZXQoa2V5LCBwYXJhbWV0ZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNldFNlYXJjaFBhcmFtcyA9IGZ1bmN0aW9uICh1cmwsIC4uLm9iamVjdHMpIHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybC5zZWFyY2gpO1xuICAgIHNldEZsYXR0ZW5lZFF1ZXJ5UGFyYW1zKHNlYXJjaFBhcmFtcywgb2JqZWN0cyk7XG4gICAgdXJsLnNlYXJjaCA9IHNlYXJjaFBhcmFtcy50b1N0cmluZygpO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXJpYWxpemVEYXRhSWZOZWVkZWQgPSBmdW5jdGlvbiAodmFsdWUsIHJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKSB7XG4gICAgY29uc3Qgbm9uU3RyaW5nID0gdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJztcbiAgICBjb25zdCBuZWVkc1NlcmlhbGl6YXRpb24gPSBub25TdHJpbmcgJiYgY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmlzSnNvbk1pbWVcbiAgICAgICAgPyBjb25maWd1cmF0aW9uLmlzSnNvbk1pbWUocmVxdWVzdE9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10pXG4gICAgICAgIDogbm9uU3RyaW5nO1xuICAgIHJldHVybiBuZWVkc1NlcmlhbGl6YXRpb25cbiAgICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiB7fSlcbiAgICAgICAgOiAodmFsdWUgfHwgXCJcIik7XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnRvUGF0aFN0cmluZyA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICByZXR1cm4gdXJsLnBhdGhuYW1lICsgdXJsLnNlYXJjaCArIHVybC5oYXNoO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24gPSBmdW5jdGlvbiAoYXhpb3NBcmdzLCBnbG9iYWxBeGlvcywgQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKSB7XG4gICAgcmV0dXJuIChheGlvcyA9IGdsb2JhbEF4aW9zLCBiYXNlUGF0aCA9IEJBU0VfUEFUSCkgPT4ge1xuICAgICAgICBjb25zdCBheGlvc1JlcXVlc3RBcmdzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBheGlvc0FyZ3Mub3B0aW9ucyksIHsgdXJsOiAoKGNvbmZpZ3VyYXRpb24gPT09IG51bGwgfHwgY29uZmlndXJhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlndXJhdGlvbi5iYXNlUGF0aCkgfHwgYmFzZVBhdGgpICsgYXhpb3NBcmdzLnVybCB9KTtcbiAgICAgICAgcmV0dXJuIGF4aW9zLnJlcXVlc3QoYXhpb3NSZXF1ZXN0QXJncyk7XG4gICAgfTtcbn07XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogT3BlbkFJIEFQSVxuICogQVBJcyBmb3Igc2FtcGxpbmcgZnJvbSBhbmQgZmluZS10dW5pbmcgbGFuZ3VhZ2UgbW9kZWxzXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDEuMi4wXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk9wZW5BSUFwaSA9IGV4cG9ydHMuT3BlbkFJQXBpRmFjdG9yeSA9IGV4cG9ydHMuT3BlbkFJQXBpRnAgPSBleHBvcnRzLk9wZW5BSUFwaUF4aW9zUGFyYW1DcmVhdG9yID0gZXhwb3J0cy5DcmVhdGVJbWFnZVJlcXVlc3RSZXNwb25zZUZvcm1hdEVudW0gPSBleHBvcnRzLkNyZWF0ZUltYWdlUmVxdWVzdFNpemVFbnVtID0gZXhwb3J0cy5DaGF0Q29tcGxldGlvblJlc3BvbnNlTWVzc2FnZVJvbGVFbnVtID0gZXhwb3J0cy5DaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlUm9sZUVudW0gPSB2b2lkIDA7XG5jb25zdCBheGlvc18xID0gcmVxdWlyZShcImF4aW9zXCIpO1xuLy8gU29tZSBpbXBvcnRzIG5vdCB1c2VkIGRlcGVuZGluZyBvbiB0ZW1wbGF0ZSBjb25kaXRpb25zXG4vLyBAdHMtaWdub3JlXG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcbi8vIEB0cy1pZ25vcmVcbmNvbnN0IGJhc2VfMSA9IHJlcXVpcmUoXCIuL2Jhc2VcIik7XG5leHBvcnRzLkNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2VSb2xlRW51bSA9IHtcbiAgICBTeXN0ZW06ICdzeXN0ZW0nLFxuICAgIFVzZXI6ICd1c2VyJyxcbiAgICBBc3Npc3RhbnQ6ICdhc3Npc3RhbnQnXG59O1xuZXhwb3J0cy5DaGF0Q29tcGxldGlvblJlc3BvbnNlTWVzc2FnZVJvbGVFbnVtID0ge1xuICAgIFN5c3RlbTogJ3N5c3RlbScsXG4gICAgVXNlcjogJ3VzZXInLFxuICAgIEFzc2lzdGFudDogJ2Fzc2lzdGFudCdcbn07XG5leHBvcnRzLkNyZWF0ZUltYWdlUmVxdWVzdFNpemVFbnVtID0ge1xuICAgIF8yNTZ4MjU2OiAnMjU2eDI1NicsXG4gICAgXzUxMng1MTI6ICc1MTJ4NTEyJyxcbiAgICBfMTAyNHgxMDI0OiAnMTAyNHgxMDI0J1xufTtcbmV4cG9ydHMuQ3JlYXRlSW1hZ2VSZXF1ZXN0UmVzcG9uc2VGb3JtYXRFbnVtID0ge1xuICAgIFVybDogJ3VybCcsXG4gICAgQjY0SnNvbjogJ2I2NF9qc29uJ1xufTtcbi8qKlxuICogT3BlbkFJQXBpIC0gYXhpb3MgcGFyYW1ldGVyIGNyZWF0b3JcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5PcGVuQUlBcGlBeGlvc1BhcmFtQ3JlYXRvciA9IGZ1bmN0aW9uIChjb25maWd1cmF0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEltbWVkaWF0ZWx5IGNhbmNlbCBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBjYW5jZWxcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNhbmNlbEZpbmVUdW5lOiAoZmluZVR1bmVJZCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaW5lVHVuZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjYW5jZWxGaW5lVHVuZScsICdmaW5lVHVuZUlkJywgZmluZVR1bmVJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbmUtdHVuZXMve2ZpbmVfdHVuZV9pZH0vY2FuY2VsYFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImZpbmVfdHVuZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGZpbmVUdW5lSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQW5zd2VycyB0aGUgc3BlY2lmaWVkIHF1ZXN0aW9uIHVzaW5nIHRoZSBwcm92aWRlZCBkb2N1bWVudHMgYW5kIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciBwcm92aWRlZCBkb2N1bWVudHMgb3IgZmlsZXMgdG8gZmluZCByZWxldmFudCBjb250ZXh0LiBUaGUgcmVsZXZhbnQgY29udGV4dCBpcyBjb21iaW5lZCB3aXRoIHRoZSBwcm92aWRlZCBleGFtcGxlcyBhbmQgcXVlc3Rpb24gdG8gY3JlYXRlIHRoZSBwcm9tcHQgZm9yIFtjb21wbGV0aW9uXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKS5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVBbnN3ZXJSZXF1ZXN0fSBjcmVhdGVBbnN3ZXJSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVBbnN3ZXI6IChjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUFuc3dlclJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUFuc3dlcicsICdjcmVhdGVBbnN3ZXJSZXF1ZXN0JywgY3JlYXRlQW5zd2VyUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2Fuc3dlcnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgY2hhdCBtZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNoYXRDb21wbGV0aW9uOiAoY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlQ2hhdENvbXBsZXRpb24nLCAnY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0JywgY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvY2hhdC9jb21wbGV0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIHRoZSBzcGVjaWZpZWQgYHF1ZXJ5YCB1c2luZyBwcm92aWRlZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgdGhlIGxhYmVsZWQgZXhhbXBsZXMgdG8gc2VsZWN0IHRoZSBvbmVzIG1vc3QgcmVsZXZhbnQgZm9yIHRoZSBwYXJ0aWN1bGFyIHF1ZXJ5LiBUaGVuLCB0aGUgcmVsZXZhbnQgZXhhbXBsZXMgYXJlIGNvbWJpbmVkIHdpdGggdGhlIHF1ZXJ5IHRvIGNvbnN0cnVjdCBhIHByb21wdCB0byBwcm9kdWNlIHRoZSBmaW5hbCBsYWJlbCB2aWEgdGhlIFtjb21wbGV0aW9uc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykgZW5kcG9pbnQuICBMYWJlbGVkIGV4YW1wbGVzIGNhbiBiZSBwcm92aWRlZCB2aWEgYW4gdXBsb2FkZWQgYGZpbGVgLCBvciBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgcmVxdWVzdCB1c2luZyB0aGUgYGV4YW1wbGVzYCBwYXJhbWV0ZXIgZm9yIHF1aWNrIHRlc3RzIGFuZCBzbWFsbCBzY2FsZSB1c2UgY2FzZXMuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0fSBjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNsYXNzaWZpY2F0aW9uOiAoY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlQ2xhc3NpZmljYXRpb24nLCAnY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0JywgY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvY2xhc3NpZmljYXRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgcHJvdmlkZWQgcHJvbXB0IGFuZCBwYXJhbWV0ZXJzXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDb21wbGV0aW9uOiAoY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlQ29tcGxldGlvblJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUNvbXBsZXRpb24nLCAnY3JlYXRlQ29tcGxldGlvblJlcXVlc3QnLCBjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2NvbXBsZXRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIG5ldyBlZGl0IGZvciB0aGUgcHJvdmlkZWQgaW5wdXQsIGluc3RydWN0aW9uLCBhbmQgcGFyYW1ldGVycy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVFZGl0UmVxdWVzdH0gY3JlYXRlRWRpdFJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUVkaXQ6IChjcmVhdGVFZGl0UmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVFZGl0UmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlRWRpdCcsICdjcmVhdGVFZGl0UmVxdWVzdCcsIGNyZWF0ZUVkaXRSZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZWRpdHNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVFZGl0UmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVtYmVkZGluZyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBpbnB1dCB0ZXh0LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUVtYmVkZGluZ1JlcXVlc3R9IGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUVtYmVkZGluZzogKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlRW1iZWRkaW5nJywgJ2NyZWF0ZUVtYmVkZGluZ1JlcXVlc3QnLCBjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZW1iZWRkaW5nc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVXBsb2FkIGEgZmlsZSB0aGF0IGNvbnRhaW5zIGRvY3VtZW50KHMpIHRvIGJlIHVzZWQgYWNyb3NzIHZhcmlvdXMgZW5kcG9pbnRzL2ZlYXR1cmVzLiBDdXJyZW50bHksIHRoZSBzaXplIG9mIGFsbCB0aGUgZmlsZXMgdXBsb2FkZWQgYnkgb25lIG9yZ2FuaXphdGlvbiBjYW4gYmUgdXAgdG8gMSBHQi4gUGxlYXNlIGNvbnRhY3QgdXMgaWYgeW91IG5lZWQgdG8gaW5jcmVhc2UgdGhlIHN0b3JhZ2UgbGltaXQuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBOYW1lIG9mIHRoZSBbSlNPTiBMaW5lc10oaHR0cHM6Ly9qc29ubGluZXMucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0LykgZmlsZSB0byBiZSB1cGxvYWRlZC4gIElmIHRoZSAmI3g2MDtwdXJwb3NlJiN4NjA7IGlzIHNldCB0byBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDssIGVhY2ggbGluZSBpcyBhIEpTT04gcmVjb3JkIHdpdGggXFxcXFxcJnF1b3Q7cHJvbXB0XFxcXFxcJnF1b3Q7IGFuZCBcXFxcXFwmcXVvdDtjb21wbGV0aW9uXFxcXFxcJnF1b3Q7IGZpZWxkcyByZXByZXNlbnRpbmcgeW91ciBbdHJhaW5pbmcgZXhhbXBsZXNdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZy9wcmVwYXJlLXRyYWluaW5nLWRhdGEpLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHVycG9zZSBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgdXBsb2FkZWQgZG9jdW1lbnRzLiAgVXNlIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OyBmb3IgW0ZpbmUtdHVuaW5nXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbmUtdHVuZXMpLiBUaGlzIGFsbG93cyB1cyB0byB2YWxpZGF0ZSB0aGUgZm9ybWF0IG9mIHRoZSB1cGxvYWRlZCBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRmlsZTogKGZpbGUsIHB1cnBvc2UsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmlsZScgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlRmlsZScsICdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdwdXJwb3NlJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVGaWxlJywgJ3B1cnBvc2UnLCBwdXJwb3NlKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmlsZXNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyRm9ybVBhcmFtcyA9IG5ldyAoKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5mb3JtRGF0YUN0b3IpIHx8IEZvcm1EYXRhKSgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwdXJwb3NlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdwdXJwb3NlJywgcHVycG9zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBsb2NhbFZhckZvcm1QYXJhbXMuZ2V0SGVhZGVycygpKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBsb2NhbFZhckZvcm1QYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgam9iIHRoYXQgZmluZS10dW5lcyBhIHNwZWNpZmllZCBtb2RlbCBmcm9tIGEgZ2l2ZW4gZGF0YXNldC4gIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUZpbmVUdW5lUmVxdWVzdH0gY3JlYXRlRmluZVR1bmVSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVGaW5lVHVuZTogKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVGaW5lVHVuZVJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUZpbmVUdW5lJywgJ2NyZWF0ZUZpbmVUdW5lUmVxdWVzdCcsIGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbmUtdHVuZXNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbWFnZSBnaXZlbiBhIHByb21wdC5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVJbWFnZVJlcXVlc3R9IGNyZWF0ZUltYWdlUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2U6IChjcmVhdGVJbWFnZVJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlSW1hZ2VSZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVJbWFnZScsICdjcmVhdGVJbWFnZVJlcXVlc3QnLCBjcmVhdGVJbWFnZVJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbWFnZXMvZ2VuZXJhdGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVJbWFnZVJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlZGl0ZWQgb3IgZXh0ZW5kZWQgaW1hZ2UgZ2l2ZW4gYW4gb3JpZ2luYWwgaW1hZ2UgYW5kIGEgcHJvbXB0LlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byBlZGl0LiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuIElmIG1hc2sgaXMgbm90IHByb3ZpZGVkLCBpbWFnZSBtdXN0IGhhdmUgdHJhbnNwYXJlbmN5LCB3aGljaCB3aWxsIGJlIHVzZWQgYXMgdGhlIG1hc2suXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9tcHQgQSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBkZXNpcmVkIGltYWdlKHMpLiBUaGUgbWF4aW11bSBsZW5ndGggaXMgMTAwMCBjaGFyYWN0ZXJzLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IFttYXNrXSBBbiBhZGRpdGlvbmFsIGltYWdlIHdob3NlIGZ1bGx5IHRyYW5zcGFyZW50IGFyZWFzIChlLmcuIHdoZXJlIGFscGhhIGlzIHplcm8pIGluZGljYXRlIHdoZXJlICYjeDYwO2ltYWdlJiN4NjA7IHNob3VsZCBiZSBlZGl0ZWQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9ucyBhcyAmI3g2MDtpbWFnZSYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlRWRpdDogKGltYWdlLCBwcm9tcHQsIG1hc2ssIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ltYWdlJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVJbWFnZUVkaXQnLCAnaW1hZ2UnLCBpbWFnZSk7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdwcm9tcHQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUltYWdlRWRpdCcsICdwcm9tcHQnLCBwcm9tcHQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbWFnZXMvZWRpdHNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyRm9ybVBhcmFtcyA9IG5ldyAoKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5mb3JtRGF0YUN0b3IpIHx8IEZvcm1EYXRhKSgpO1xuICAgICAgICAgICAgaWYgKGltYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdpbWFnZScsIGltYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdtYXNrJywgbWFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvbXB0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdwcm9tcHQnLCBwcm9tcHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ24nLCBuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdzaXplJywgc2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VGb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3Jlc3BvbnNlX2Zvcm1hdCcsIHJlc3BvbnNlRm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCd1c2VyJywgdXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBsb2NhbFZhckZvcm1QYXJhbXMuZ2V0SGVhZGVycygpKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBsb2NhbFZhckZvcm1QYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgdmFyaWF0aW9uIG9mIGEgZ2l2ZW4gaW1hZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIHVzZSBhcyB0aGUgYmFzaXMgZm9yIHRoZSB2YXJpYXRpb24ocykuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlVmFyaWF0aW9uOiAoaW1hZ2UsIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ltYWdlJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVJbWFnZVZhcmlhdGlvbicsICdpbWFnZScsIGltYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvaW1hZ2VzL3ZhcmlhdGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyRm9ybVBhcmFtcyA9IG5ldyAoKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5mb3JtRGF0YUN0b3IpIHx8IEZvcm1EYXRhKSgpO1xuICAgICAgICAgICAgaWYgKGltYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdpbWFnZScsIGltYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCduJywgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnc2l6ZScsIHNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlRm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdyZXNwb25zZV9mb3JtYXQnLCByZXNwb25zZUZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgndXNlcicsIHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgbG9jYWxWYXJGb3JtUGFyYW1zLmdldEhlYWRlcnMoKSksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gbG9jYWxWYXJGb3JtUGFyYW1zO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyBpZiB0ZXh0IHZpb2xhdGVzIE9wZW5BSVxcJ3MgQ29udGVudCBQb2xpY3lcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVNb2RlcmF0aW9uUmVxdWVzdH0gY3JlYXRlTW9kZXJhdGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZU1vZGVyYXRpb246IChjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlTW9kZXJhdGlvbicsICdjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCcsIGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvbW9kZXJhdGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUaGUgc2VhcmNoIGVuZHBvaW50IGNvbXB1dGVzIHNpbWlsYXJpdHkgc2NvcmVzIGJldHdlZW4gcHJvdmlkZWQgcXVlcnkgYW5kIGRvY3VtZW50cy4gRG9jdW1lbnRzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIEFQSSBpZiB0aGVyZSBhcmUgbm8gbW9yZSB0aGFuIDIwMCBvZiB0aGVtLiAgVG8gZ28gYmV5b25kIHRoZSAyMDAgZG9jdW1lbnQgbGltaXQsIGRvY3VtZW50cyBjYW4gYmUgcHJvY2Vzc2VkIG9mZmxpbmUgYW5kIHRoZW4gdXNlZCBmb3IgZWZmaWNpZW50IHJldHJpZXZhbCBhdCBxdWVyeSB0aW1lLiBXaGVuIGBmaWxlYCBpcyBzZXQsIHRoZSBzZWFyY2ggZW5kcG9pbnQgc2VhcmNoZXMgb3ZlciBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgZ2l2ZW4gZmlsZSBhbmQgcmV0dXJucyB1cCB0byB0aGUgYG1heF9yZXJhbmtgIG51bWJlciBvZiBkb2N1bWVudHMuIFRoZXNlIGRvY3VtZW50cyB3aWxsIGJlIHJldHVybmVkIGFsb25nIHdpdGggdGhlaXIgc2VhcmNoIHNjb3Jlcy4gIFRoZSBzaW1pbGFyaXR5IHNjb3JlIGlzIGEgcG9zaXRpdmUgc2NvcmUgdGhhdCB1c3VhbGx5IHJhbmdlcyBmcm9tIDAgdG8gMzAwIChidXQgY2FuIHNvbWV0aW1lcyBnbyBoaWdoZXIpLCB3aGVyZSBhIHNjb3JlIGFib3ZlIDIwMCB1c3VhbGx5IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBzZW1hbnRpY2FsbHkgc2ltaWxhciB0byB0aGUgcXVlcnkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdC4gIFlvdSBjYW4gc2VsZWN0IG9uZSBvZiAmI3g2MDthZGEmI3g2MDssICYjeDYwO2JhYmJhZ2UmI3g2MDssICYjeDYwO2N1cmllJiN4NjA7LCBvciAmI3g2MDtkYXZpbmNpJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZVNlYXJjaFJlcXVlc3R9IGNyZWF0ZVNlYXJjaFJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVNlYXJjaDogKGVuZ2luZUlkLCBjcmVhdGVTZWFyY2hSZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2VuZ2luZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVTZWFyY2gnLCAnZW5naW5lSWQnLCBlbmdpbmVJZCk7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVTZWFyY2hSZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVTZWFyY2gnLCAnY3JlYXRlU2VhcmNoUmVxdWVzdCcsIGNyZWF0ZVNlYXJjaFJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9lbmdpbmVzL3tlbmdpbmVfaWR9L3NlYXJjaGBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJlbmdpbmVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhlbmdpbmVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlU2VhcmNoUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUcmFuc2NyaWJlcyBhdWRpbyBpbnRvIHRoZSBpbnB1dCBsYW5ndWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zY3JpYmUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIG1hdGNoIHRoZSBhdWRpbyBsYW5ndWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYW5ndWFnZV0gVGhlIGxhbmd1YWdlIG9mIHRoZSBpbnB1dCBhdWRpby4gU3VwcGx5aW5nIHRoZSBpbnB1dCBsYW5ndWFnZSBpbiBbSVNPLTYzOS0xXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgZm9ybWF0IHdpbGwgaW1wcm92ZSBhY2N1cmFjeSBhbmQgbGF0ZW5jeS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVRyYW5zY3JpcHRpb246IChmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIGxhbmd1YWdlLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbGUnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZVRyYW5zY3JpcHRpb24nLCAnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnbW9kZWwnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZVRyYW5zY3JpcHRpb24nLCAnbW9kZWwnLCBtb2RlbCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2F1ZGlvL3RyYW5zY3JpcHRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckZvcm1QYXJhbXMgPSBuZXcgKChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uZm9ybURhdGFDdG9yKSB8fCBGb3JtRGF0YSkoKTtcbiAgICAgICAgICAgIGlmIChmaWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9kZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ21vZGVsJywgbW9kZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncHJvbXB0JywgcHJvbXB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZUZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncmVzcG9uc2VfZm9ybWF0JywgcmVzcG9uc2VGb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRlbXBlcmF0dXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCd0ZW1wZXJhdHVyZScsIHRlbXBlcmF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYW5ndWFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnbGFuZ3VhZ2UnLCBsYW5ndWFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBsb2NhbFZhckZvcm1QYXJhbXMuZ2V0SGVhZGVycygpKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBsb2NhbFZhckZvcm1QYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUcmFuc2xhdGVzIGF1ZGlvIGludG8gaW50byBFbmdsaXNoLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNsYXRlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBiZSBpbiBFbmdsaXNoLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlVHJhbnNsYXRpb246IChmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmlsZScgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlVHJhbnNsYXRpb24nLCAnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnbW9kZWwnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZVRyYW5zbGF0aW9uJywgJ21vZGVsJywgbW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9hdWRpby90cmFuc2xhdGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyRm9ybVBhcmFtcyA9IG5ldyAoKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5mb3JtRGF0YUN0b3IpIHx8IEZvcm1EYXRhKSgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb2RlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnbW9kZWwnLCBtb2RlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvbXB0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdwcm9tcHQnLCBwcm9tcHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlRm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdyZXNwb25zZV9mb3JtYXQnLCByZXNwb25zZUZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGVtcGVyYXR1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3RlbXBlcmF0dXJlJywgdGVtcGVyYXR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgbG9jYWxWYXJGb3JtUGFyYW1zLmdldEhlYWRlcnMoKSksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gbG9jYWxWYXJGb3JtUGFyYW1zO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZUZpbGU6IChmaWxlSWQsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmlsZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdkZWxldGVGaWxlJywgJ2ZpbGVJZCcsIGZpbGVJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbGVzL3tmaWxlX2lkfWBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJmaWxlX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZmlsZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdERUxFVEUnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmluZS10dW5lZCBtb2RlbC4gWW91IG11c3QgaGF2ZSB0aGUgT3duZXIgcm9sZSBpbiB5b3VyIG9yZ2FuaXphdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBtb2RlbCB0byBkZWxldGVcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZU1vZGVsOiAobW9kZWwsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnbW9kZWwnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2RlbGV0ZU1vZGVsJywgJ21vZGVsJywgbW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9tb2RlbHMve21vZGVsfWBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJtb2RlbFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKG1vZGVsKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdERUxFVEUnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyB0aGUgY29udGVudHMgb2YgdGhlIHNwZWNpZmllZCBmaWxlXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkb3dubG9hZEZpbGU6IChmaWxlSWQsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmlsZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdkb3dubG9hZEZpbGUnLCAnZmlsZUlkJywgZmlsZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmlsZXMve2ZpbGVfaWR9L2NvbnRlbnRgXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZmlsZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGZpbGVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIChub24tZmluZXR1bmVkKSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEVuZ2luZXM6IChvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZW5naW5lc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGEgbGlzdCBvZiBmaWxlcyB0aGF0IGJlbG9uZyB0byB0aGUgdXNlclxcJ3Mgb3JnYW5pemF0aW9uLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbGVzOiAob3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbGVzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEdldCBmaW5lLWdyYWluZWQgc3RhdHVzIHVwZGF0ZXMgZm9yIGEgZmluZS10dW5lIGpvYi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGdldCBldmVudHMgZm9yLlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHJlYW1dIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZSBzZW50IGFzIGRhdGEtb25seSBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KSBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhICYjeDYwO2RhdGE6IFtET05FXSYjeDYwOyBtZXNzYWdlIHdoZW4gdGhlIGpvYiBpcyBmaW5pc2hlZCAoc3VjY2VlZGVkLCBjYW5jZWxsZWQsIG9yIGZhaWxlZCkuICBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaW5lVHVuZUV2ZW50czogKGZpbmVUdW5lSWQsIHN0cmVhbSwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaW5lVHVuZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdsaXN0RmluZVR1bmVFdmVudHMnLCAnZmluZVR1bmVJZCcsIGZpbmVUdW5lSWQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maW5lLXR1bmVzL3tmaW5lX3R1bmVfaWR9L2V2ZW50c2BcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJmaW5lX3R1bmVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhmaW5lVHVuZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgaWYgKHN0cmVhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlclsnc3RyZWFtJ10gPSBzdHJlYW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0IHlvdXIgb3JnYW5pemF0aW9uXFwncyBmaW5lLXR1bmluZyBqb2JzXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmluZVR1bmVzOiAob3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbmUtdHVuZXNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RNb2RlbHM6IChvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvbW9kZWxzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgaXQgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUVuZ2luZTogKGVuZ2luZUlkLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2VuZ2luZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdyZXRyaWV2ZUVuZ2luZScsICdlbmdpbmVJZCcsIGVuZ2luZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZW5naW5lcy97ZW5naW5lX2lkfWBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJlbmdpbmVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhlbmdpbmVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVGaWxlOiAoZmlsZUlkLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbGVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygncmV0cmlldmVGaWxlJywgJ2ZpbGVJZCcsIGZpbGVJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbGVzL3tmaWxlX2lkfWBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJmaWxlX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZmlsZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgR2V0cyBpbmZvIGFib3V0IHRoZSBmaW5lLXR1bmUgam9iLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUZpbmVUdW5lOiAoZmluZVR1bmVJZCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaW5lVHVuZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdyZXRyaWV2ZUZpbmVUdW5lJywgJ2ZpbmVUdW5lSWQnLCBmaW5lVHVuZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmluZS10dW5lcy97ZmluZV90dW5lX2lkfWBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJmaW5lX3R1bmVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhmaW5lVHVuZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9kZWwgc3VjaCBhcyB0aGUgb3duZXIgYW5kIHBlcm1pc3Npb25pbmcuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZU1vZGVsOiAobW9kZWwsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnbW9kZWwnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ3JldHJpZXZlTW9kZWwnLCAnbW9kZWwnLCBtb2RlbCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL21vZGVscy97bW9kZWx9YFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcIm1vZGVsXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcobW9kZWwpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgfTtcbn07XG4vKipcbiAqIE9wZW5BSUFwaSAtIGZ1bmN0aW9uYWwgcHJvZ3JhbW1pbmcgaW50ZXJmYWNlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuT3BlbkFJQXBpRnAgPSBmdW5jdGlvbiAoY29uZmlndXJhdGlvbikge1xuICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IgPSBleHBvcnRzLk9wZW5BSUFwaUF4aW9zUGFyYW1DcmVhdG9yKGNvbmZpZ3VyYXRpb24pO1xuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBJbW1lZGlhdGVseSBjYW5jZWwgYSBmaW5lLXR1bmUgam9iLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gY2FuY2VsXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjYW5jZWxGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jYW5jZWxGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBBbnN3ZXJzIHRoZSBzcGVjaWZpZWQgcXVlc3Rpb24gdXNpbmcgdGhlIHByb3ZpZGVkIGRvY3VtZW50cyBhbmQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHByb3ZpZGVkIGRvY3VtZW50cyBvciBmaWxlcyB0byBmaW5kIHJlbGV2YW50IGNvbnRleHQuIFRoZSByZWxldmFudCBjb250ZXh0IGlzIGNvbWJpbmVkIHdpdGggdGhlIHByb3ZpZGVkIGV4YW1wbGVzIGFuZCBxdWVzdGlvbiB0byBjcmVhdGUgdGhlIHByb21wdCBmb3IgW2NvbXBsZXRpb25dKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUFuc3dlclJlcXVlc3R9IGNyZWF0ZUFuc3dlclJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUFuc3dlcihjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVBbnN3ZXIoY3JlYXRlQW5zd2VyUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBjaGF0IG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ2hhdENvbXBsZXRpb24oY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVDaGF0Q29tcGxldGlvbihjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgdGhlIHNwZWNpZmllZCBgcXVlcnlgIHVzaW5nIHByb3ZpZGVkIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciB0aGUgbGFiZWxlZCBleGFtcGxlcyB0byBzZWxlY3QgdGhlIG9uZXMgbW9zdCByZWxldmFudCBmb3IgdGhlIHBhcnRpY3VsYXIgcXVlcnkuIFRoZW4sIHRoZSByZWxldmFudCBleGFtcGxlcyBhcmUgY29tYmluZWQgd2l0aCB0aGUgcXVlcnkgdG8gY29uc3RydWN0IGEgcHJvbXB0IHRvIHByb2R1Y2UgdGhlIGZpbmFsIGxhYmVsIHZpYSB0aGUgW2NvbXBsZXRpb25zXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKSBlbmRwb2ludC4gIExhYmVsZWQgZXhhbXBsZXMgY2FuIGJlIHByb3ZpZGVkIHZpYSBhbiB1cGxvYWRlZCBgZmlsZWAsIG9yIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSByZXF1ZXN0IHVzaW5nIHRoZSBgZXhhbXBsZXNgIHBhcmFtZXRlciBmb3IgcXVpY2sgdGVzdHMgYW5kIHNtYWxsIHNjYWxlIHVzZSBjYXNlcy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3R9IGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ2xhc3NpZmljYXRpb24oY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVDbGFzc2lmaWNhdGlvbihjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgcHJvdmlkZWQgcHJvbXB0IGFuZCBwYXJhbWV0ZXJzXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDb21wbGV0aW9uKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVDb21wbGV0aW9uKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgbmV3IGVkaXQgZm9yIHRoZSBwcm92aWRlZCBpbnB1dCwgaW5zdHJ1Y3Rpb24sIGFuZCBwYXJhbWV0ZXJzLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUVkaXRSZXF1ZXN0fSBjcmVhdGVFZGl0UmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRWRpdChjcmVhdGVFZGl0UmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlRWRpdChjcmVhdGVFZGl0UmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlbWJlZGRpbmcgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgaW5wdXQgdGV4dC5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVFbWJlZGRpbmdSZXF1ZXN0fSBjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVFbWJlZGRpbmcoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlRW1iZWRkaW5nKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFVwbG9hZCBhIGZpbGUgdGhhdCBjb250YWlucyBkb2N1bWVudChzKSB0byBiZSB1c2VkIGFjcm9zcyB2YXJpb3VzIGVuZHBvaW50cy9mZWF0dXJlcy4gQ3VycmVudGx5LCB0aGUgc2l6ZSBvZiBhbGwgdGhlIGZpbGVzIHVwbG9hZGVkIGJ5IG9uZSBvcmdhbml6YXRpb24gY2FuIGJlIHVwIHRvIDEgR0IuIFBsZWFzZSBjb250YWN0IHVzIGlmIHlvdSBuZWVkIHRvIGluY3JlYXNlIHRoZSBzdG9yYWdlIGxpbWl0LlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgTmFtZSBvZiB0aGUgW0pTT04gTGluZXNdKGh0dHBzOi8vanNvbmxpbmVzLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC8pIGZpbGUgdG8gYmUgdXBsb2FkZWQuICBJZiB0aGUgJiN4NjA7cHVycG9zZSYjeDYwOyBpcyBzZXQgdG8gXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7LCBlYWNoIGxpbmUgaXMgYSBKU09OIHJlY29yZCB3aXRoIFxcXFxcXCZxdW90O3Byb21wdFxcXFxcXCZxdW90OyBhbmQgXFxcXFxcJnF1b3Q7Y29tcGxldGlvblxcXFxcXCZxdW90OyBmaWVsZHMgcmVwcmVzZW50aW5nIHlvdXIgW3RyYWluaW5nIGV4YW1wbGVzXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcvcHJlcGFyZS10cmFpbmluZy1kYXRhKS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHB1cnBvc2UgVGhlIGludGVuZGVkIHB1cnBvc2Ugb2YgdGhlIHVwbG9hZGVkIGRvY3VtZW50cy4gIFVzZSBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDsgZm9yIFtGaW5lLXR1bmluZ10oL2RvY3MvYXBpLXJlZmVyZW5jZS9maW5lLXR1bmVzKS4gVGhpcyBhbGxvd3MgdXMgdG8gdmFsaWRhdGUgdGhlIGZvcm1hdCBvZiB0aGUgdXBsb2FkZWQgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUZpbGUoZmlsZSwgcHVycG9zZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlRmlsZShmaWxlLCBwdXJwb3NlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgam9iIHRoYXQgZmluZS10dW5lcyBhIHNwZWNpZmllZCBtb2RlbCBmcm9tIGEgZ2l2ZW4gZGF0YXNldC4gIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUZpbmVUdW5lUmVxdWVzdH0gY3JlYXRlRmluZVR1bmVSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVGaW5lVHVuZShjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUZpbmVUdW5lKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbWFnZSBnaXZlbiBhIHByb21wdC5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVJbWFnZVJlcXVlc3R9IGNyZWF0ZUltYWdlUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2UoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVJbWFnZShjcmVhdGVJbWFnZVJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZWRpdGVkIG9yIGV4dGVuZGVkIGltYWdlIGdpdmVuIGFuIG9yaWdpbmFsIGltYWdlIGFuZCBhIHByb21wdC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gZWRpdC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLiBJZiBtYXNrIGlzIG5vdCBwcm92aWRlZCwgaW1hZ2UgbXVzdCBoYXZlIHRyYW5zcGFyZW5jeSwgd2hpY2ggd2lsbCBiZSB1c2VkIGFzIHRoZSBtYXNrLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvbXB0IEEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVzaXJlZCBpbWFnZShzKS4gVGhlIG1heGltdW0gbGVuZ3RoIGlzIDEwMDAgY2hhcmFjdGVycy5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBbbWFza10gQW4gYWRkaXRpb25hbCBpbWFnZSB3aG9zZSBmdWxseSB0cmFuc3BhcmVudCBhcmVhcyAoZS5nLiB3aGVyZSBhbHBoYSBpcyB6ZXJvKSBpbmRpY2F0ZSB3aGVyZSAmI3g2MDtpbWFnZSYjeDYwOyBzaG91bGQgYmUgZWRpdGVkLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbnMgYXMgJiN4NjA7aW1hZ2UmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZUVkaXQoaW1hZ2UsIHByb21wdCwgbWFzaywgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUltYWdlRWRpdChpbWFnZSwgcHJvbXB0LCBtYXNrLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIHZhcmlhdGlvbiBvZiBhIGdpdmVuIGltYWdlLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byB1c2UgYXMgdGhlIGJhc2lzIGZvciB0aGUgdmFyaWF0aW9uKHMpLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZVZhcmlhdGlvbihpbWFnZSwgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUltYWdlVmFyaWF0aW9uKGltYWdlLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyBpZiB0ZXh0IHZpb2xhdGVzIE9wZW5BSVxcJ3MgQ29udGVudCBQb2xpY3lcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVNb2RlcmF0aW9uUmVxdWVzdH0gY3JlYXRlTW9kZXJhdGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZU1vZGVyYXRpb24oY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZU1vZGVyYXRpb24oY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRoZSBzZWFyY2ggZW5kcG9pbnQgY29tcHV0ZXMgc2ltaWxhcml0eSBzY29yZXMgYmV0d2VlbiBwcm92aWRlZCBxdWVyeSBhbmQgZG9jdW1lbnRzLiBEb2N1bWVudHMgY2FuIGJlIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgQVBJIGlmIHRoZXJlIGFyZSBubyBtb3JlIHRoYW4gMjAwIG9mIHRoZW0uICBUbyBnbyBiZXlvbmQgdGhlIDIwMCBkb2N1bWVudCBsaW1pdCwgZG9jdW1lbnRzIGNhbiBiZSBwcm9jZXNzZWQgb2ZmbGluZSBhbmQgdGhlbiB1c2VkIGZvciBlZmZpY2llbnQgcmV0cmlldmFsIGF0IHF1ZXJ5IHRpbWUuIFdoZW4gYGZpbGVgIGlzIHNldCwgdGhlIHNlYXJjaCBlbmRwb2ludCBzZWFyY2hlcyBvdmVyIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBnaXZlbiBmaWxlIGFuZCByZXR1cm5zIHVwIHRvIHRoZSBgbWF4X3JlcmFua2AgbnVtYmVyIG9mIGRvY3VtZW50cy4gVGhlc2UgZG9jdW1lbnRzIHdpbGwgYmUgcmV0dXJuZWQgYWxvbmcgd2l0aCB0aGVpciBzZWFyY2ggc2NvcmVzLiAgVGhlIHNpbWlsYXJpdHkgc2NvcmUgaXMgYSBwb3NpdGl2ZSBzY29yZSB0aGF0IHVzdWFsbHkgcmFuZ2VzIGZyb20gMCB0byAzMDAgKGJ1dCBjYW4gc29tZXRpbWVzIGdvIGhpZ2hlciksIHdoZXJlIGEgc2NvcmUgYWJvdmUgMjAwIHVzdWFsbHkgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHNlbWFudGljYWxseSBzaW1pbGFyIHRvIHRoZSBxdWVyeS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0LiAgWW91IGNhbiBzZWxlY3Qgb25lIG9mICYjeDYwO2FkYSYjeDYwOywgJiN4NjA7YmFiYmFnZSYjeDYwOywgJiN4NjA7Y3VyaWUmI3g2MDssIG9yICYjeDYwO2RhdmluY2kmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlU2VhcmNoUmVxdWVzdH0gY3JlYXRlU2VhcmNoUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlU2VhcmNoKGVuZ2luZUlkLCBjcmVhdGVTZWFyY2hSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVTZWFyY2goZW5naW5lSWQsIGNyZWF0ZVNlYXJjaFJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRyYW5zY3JpYmVzIGF1ZGlvIGludG8gdGhlIGlucHV0IGxhbmd1YWdlLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNjcmliZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgbWF0Y2ggdGhlIGF1ZGlvIGxhbmd1YWdlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXSBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IGF1ZGlvLiBTdXBwbHlpbmcgdGhlIGlucHV0IGxhbmd1YWdlIGluIFtJU08tNjM5LTFdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfSVNPXzYzOS0xX2NvZGVzKSBmb3JtYXQgd2lsbCBpbXByb3ZlIGFjY3VyYWN5IGFuZCBsYXRlbmN5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlVHJhbnNjcmlwdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIGxhbmd1YWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVUcmFuc2NyaXB0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgbGFuZ3VhZ2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRyYW5zbGF0ZXMgYXVkaW8gaW50byBpbnRvIEVuZ2xpc2guXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2xhdGUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIGJlIGluIEVuZ2xpc2guXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVUcmFuc2xhdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZVRyYW5zbGF0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZUZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5kZWxldGVGaWxlKGZpbGVJZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmluZS10dW5lZCBtb2RlbC4gWW91IG11c3QgaGF2ZSB0aGUgT3duZXIgcm9sZSBpbiB5b3VyIG9yZ2FuaXphdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBtb2RlbCB0byBkZWxldGVcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZU1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5kZWxldGVNb2RlbChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyB0aGUgY29udGVudHMgb2YgdGhlIHNwZWNpZmllZCBmaWxlXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkb3dubG9hZEZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5kb3dubG9hZEZpbGUoZmlsZUlkLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSAobm9uLWZpbmV0dW5lZCkgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RFbmdpbmVzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmxpc3RFbmdpbmVzKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYmVsb25nIHRvIHRoZSB1c2VyXFwncyBvcmdhbml6YXRpb24uXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmlsZXMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IubGlzdEZpbGVzKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEdldCBmaW5lLWdyYWluZWQgc3RhdHVzIHVwZGF0ZXMgZm9yIGEgZmluZS10dW5lIGpvYi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGdldCBldmVudHMgZm9yLlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHJlYW1dIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZSBzZW50IGFzIGRhdGEtb25seSBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KSBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhICYjeDYwO2RhdGE6IFtET05FXSYjeDYwOyBtZXNzYWdlIHdoZW4gdGhlIGpvYiBpcyBmaW5pc2hlZCAoc3VjY2VlZGVkLCBjYW5jZWxsZWQsIG9yIGZhaWxlZCkuICBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaW5lVHVuZUV2ZW50cyhmaW5lVHVuZUlkLCBzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmxpc3RGaW5lVHVuZUV2ZW50cyhmaW5lVHVuZUlkLCBzdHJlYW0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3QgeW91ciBvcmdhbml6YXRpb25cXCdzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaW5lVHVuZXMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IubGlzdEZpbmVUdW5lcyhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdE1vZGVscyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5saXN0TW9kZWxzKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgaXQgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUVuZ2luZShlbmdpbmVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IucmV0cmlldmVFbmdpbmUoZW5naW5lSWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IucmV0cmlldmVGaWxlKGZpbGVJZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgR2V0cyBpbmZvIGFib3V0IHRoZSBmaW5lLXR1bmUgam9iLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLnJldHJpZXZlRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9kZWwgc3VjaCBhcyB0aGUgb3duZXIgYW5kIHBlcm1pc3Npb25pbmcuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZU1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5yZXRyaWV2ZU1vZGVsKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG4vKipcbiAqIE9wZW5BSUFwaSAtIGZhY3RvcnkgaW50ZXJmYWNlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuT3BlbkFJQXBpRmFjdG9yeSA9IGZ1bmN0aW9uIChjb25maWd1cmF0aW9uLCBiYXNlUGF0aCwgYXhpb3MpIHtcbiAgICBjb25zdCBsb2NhbFZhckZwID0gZXhwb3J0cy5PcGVuQUlBcGlGcChjb25maWd1cmF0aW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGNhbmNlbFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY2FuY2VsRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY2FuY2VsRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEFuc3dlcnMgdGhlIHNwZWNpZmllZCBxdWVzdGlvbiB1c2luZyB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzIGFuZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgcHJvdmlkZWQgZG9jdW1lbnRzIG9yIGZpbGVzIHRvIGZpbmQgcmVsZXZhbnQgY29udGV4dC4gVGhlIHJlbGV2YW50IGNvbnRleHQgaXMgY29tYmluZWQgd2l0aCB0aGUgcHJvdmlkZWQgZXhhbXBsZXMgYW5kIHF1ZXN0aW9uIHRvIGNyZWF0ZSB0aGUgcHJvbXB0IGZvciBbY29tcGxldGlvbl0oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQW5zd2VyUmVxdWVzdH0gY3JlYXRlQW5zd2VyUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQW5zd2VyKGNyZWF0ZUFuc3dlclJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUFuc3dlcihjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBjaGF0IG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ2hhdENvbXBsZXRpb24oY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVDaGF0Q29tcGxldGlvbihjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIHRoZSBzcGVjaWZpZWQgYHF1ZXJ5YCB1c2luZyBwcm92aWRlZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgdGhlIGxhYmVsZWQgZXhhbXBsZXMgdG8gc2VsZWN0IHRoZSBvbmVzIG1vc3QgcmVsZXZhbnQgZm9yIHRoZSBwYXJ0aWN1bGFyIHF1ZXJ5LiBUaGVuLCB0aGUgcmVsZXZhbnQgZXhhbXBsZXMgYXJlIGNvbWJpbmVkIHdpdGggdGhlIHF1ZXJ5IHRvIGNvbnN0cnVjdCBhIHByb21wdCB0byBwcm9kdWNlIHRoZSBmaW5hbCBsYWJlbCB2aWEgdGhlIFtjb21wbGV0aW9uc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykgZW5kcG9pbnQuICBMYWJlbGVkIGV4YW1wbGVzIGNhbiBiZSBwcm92aWRlZCB2aWEgYW4gdXBsb2FkZWQgYGZpbGVgLCBvciBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgcmVxdWVzdCB1c2luZyB0aGUgYGV4YW1wbGVzYCBwYXJhbWV0ZXIgZm9yIHF1aWNrIHRlc3RzIGFuZCBzbWFsbCBzY2FsZSB1c2UgY2FzZXMuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0fSBjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNsYXNzaWZpY2F0aW9uKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlQ2xhc3NpZmljYXRpb24oY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBwcm92aWRlZCBwcm9tcHQgYW5kIHBhcmFtZXRlcnNcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ29tcGxldGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNvbXBsZXRpb24oY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUNvbXBsZXRpb24oY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgbmV3IGVkaXQgZm9yIHRoZSBwcm92aWRlZCBpbnB1dCwgaW5zdHJ1Y3Rpb24sIGFuZCBwYXJhbWV0ZXJzLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUVkaXRSZXF1ZXN0fSBjcmVhdGVFZGl0UmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRWRpdChjcmVhdGVFZGl0UmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlRWRpdChjcmVhdGVFZGl0UmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGlucHV0IHRleHQuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRW1iZWRkaW5nUmVxdWVzdH0gY3JlYXRlRW1iZWRkaW5nUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRW1iZWRkaW5nKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUVtYmVkZGluZyhjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVXBsb2FkIGEgZmlsZSB0aGF0IGNvbnRhaW5zIGRvY3VtZW50KHMpIHRvIGJlIHVzZWQgYWNyb3NzIHZhcmlvdXMgZW5kcG9pbnRzL2ZlYXR1cmVzLiBDdXJyZW50bHksIHRoZSBzaXplIG9mIGFsbCB0aGUgZmlsZXMgdXBsb2FkZWQgYnkgb25lIG9yZ2FuaXphdGlvbiBjYW4gYmUgdXAgdG8gMSBHQi4gUGxlYXNlIGNvbnRhY3QgdXMgaWYgeW91IG5lZWQgdG8gaW5jcmVhc2UgdGhlIHN0b3JhZ2UgbGltaXQuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBOYW1lIG9mIHRoZSBbSlNPTiBMaW5lc10oaHR0cHM6Ly9qc29ubGluZXMucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0LykgZmlsZSB0byBiZSB1cGxvYWRlZC4gIElmIHRoZSAmI3g2MDtwdXJwb3NlJiN4NjA7IGlzIHNldCB0byBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDssIGVhY2ggbGluZSBpcyBhIEpTT04gcmVjb3JkIHdpdGggXFxcXFxcJnF1b3Q7cHJvbXB0XFxcXFxcJnF1b3Q7IGFuZCBcXFxcXFwmcXVvdDtjb21wbGV0aW9uXFxcXFxcJnF1b3Q7IGZpZWxkcyByZXByZXNlbnRpbmcgeW91ciBbdHJhaW5pbmcgZXhhbXBsZXNdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZy9wcmVwYXJlLXRyYWluaW5nLWRhdGEpLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHVycG9zZSBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgdXBsb2FkZWQgZG9jdW1lbnRzLiAgVXNlIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OyBmb3IgW0ZpbmUtdHVuaW5nXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbmUtdHVuZXMpLiBUaGlzIGFsbG93cyB1cyB0byB2YWxpZGF0ZSB0aGUgZm9ybWF0IG9mIHRoZSB1cGxvYWRlZCBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRmlsZShmaWxlLCBwdXJwb3NlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVGaWxlKGZpbGUsIHB1cnBvc2UsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgam9iIHRoYXQgZmluZS10dW5lcyBhIHNwZWNpZmllZCBtb2RlbCBmcm9tIGEgZ2l2ZW4gZGF0YXNldC4gIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUZpbmVUdW5lUmVxdWVzdH0gY3JlYXRlRmluZVR1bmVSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVGaW5lVHVuZShjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUZpbmVUdW5lKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW1hZ2UgZ2l2ZW4gYSBwcm9tcHQuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlSW1hZ2VSZXF1ZXN0fSBjcmVhdGVJbWFnZVJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlKGNyZWF0ZUltYWdlUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlSW1hZ2UoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlZGl0ZWQgb3IgZXh0ZW5kZWQgaW1hZ2UgZ2l2ZW4gYW4gb3JpZ2luYWwgaW1hZ2UgYW5kIGEgcHJvbXB0LlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byBlZGl0LiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuIElmIG1hc2sgaXMgbm90IHByb3ZpZGVkLCBpbWFnZSBtdXN0IGhhdmUgdHJhbnNwYXJlbmN5LCB3aGljaCB3aWxsIGJlIHVzZWQgYXMgdGhlIG1hc2suXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9tcHQgQSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBkZXNpcmVkIGltYWdlKHMpLiBUaGUgbWF4aW11bSBsZW5ndGggaXMgMTAwMCBjaGFyYWN0ZXJzLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IFttYXNrXSBBbiBhZGRpdGlvbmFsIGltYWdlIHdob3NlIGZ1bGx5IHRyYW5zcGFyZW50IGFyZWFzIChlLmcuIHdoZXJlIGFscGhhIGlzIHplcm8pIGluZGljYXRlIHdoZXJlICYjeDYwO2ltYWdlJiN4NjA7IHNob3VsZCBiZSBlZGl0ZWQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9ucyBhcyAmI3g2MDtpbWFnZSYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlRWRpdChpbWFnZSwgcHJvbXB0LCBtYXNrLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlSW1hZ2VFZGl0KGltYWdlLCBwcm9tcHQsIG1hc2ssIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIHZhcmlhdGlvbiBvZiBhIGdpdmVuIGltYWdlLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byB1c2UgYXMgdGhlIGJhc2lzIGZvciB0aGUgdmFyaWF0aW9uKHMpLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZVZhcmlhdGlvbihpbWFnZSwgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUltYWdlVmFyaWF0aW9uKGltYWdlLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgaWYgdGV4dCB2aW9sYXRlcyBPcGVuQUlcXCdzIENvbnRlbnQgUG9saWN5XG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlTW9kZXJhdGlvblJlcXVlc3R9IGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVNb2RlcmF0aW9uKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVNb2RlcmF0aW9uKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVGhlIHNlYXJjaCBlbmRwb2ludCBjb21wdXRlcyBzaW1pbGFyaXR5IHNjb3JlcyBiZXR3ZWVuIHByb3ZpZGVkIHF1ZXJ5IGFuZCBkb2N1bWVudHMuIERvY3VtZW50cyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBBUEkgaWYgdGhlcmUgYXJlIG5vIG1vcmUgdGhhbiAyMDAgb2YgdGhlbS4gIFRvIGdvIGJleW9uZCB0aGUgMjAwIGRvY3VtZW50IGxpbWl0LCBkb2N1bWVudHMgY2FuIGJlIHByb2Nlc3NlZCBvZmZsaW5lIGFuZCB0aGVuIHVzZWQgZm9yIGVmZmljaWVudCByZXRyaWV2YWwgYXQgcXVlcnkgdGltZS4gV2hlbiBgZmlsZWAgaXMgc2V0LCB0aGUgc2VhcmNoIGVuZHBvaW50IHNlYXJjaGVzIG92ZXIgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGdpdmVuIGZpbGUgYW5kIHJldHVybnMgdXAgdG8gdGhlIGBtYXhfcmVyYW5rYCBudW1iZXIgb2YgZG9jdW1lbnRzLiBUaGVzZSBkb2N1bWVudHMgd2lsbCBiZSByZXR1cm5lZCBhbG9uZyB3aXRoIHRoZWlyIHNlYXJjaCBzY29yZXMuICBUaGUgc2ltaWxhcml0eSBzY29yZSBpcyBhIHBvc2l0aXZlIHNjb3JlIHRoYXQgdXN1YWxseSByYW5nZXMgZnJvbSAwIHRvIDMwMCAoYnV0IGNhbiBzb21ldGltZXMgZ28gaGlnaGVyKSwgd2hlcmUgYSBzY29yZSBhYm92ZSAyMDAgdXN1YWxseSBtZWFucyB0aGUgZG9jdW1lbnQgaXMgc2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gdGhlIHF1ZXJ5LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3QuICBZb3UgY2FuIHNlbGVjdCBvbmUgb2YgJiN4NjA7YWRhJiN4NjA7LCAmI3g2MDtiYWJiYWdlJiN4NjA7LCAmI3g2MDtjdXJpZSYjeDYwOywgb3IgJiN4NjA7ZGF2aW5jaSYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVTZWFyY2hSZXF1ZXN0fSBjcmVhdGVTZWFyY2hSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVTZWFyY2goZW5naW5lSWQsIGNyZWF0ZVNlYXJjaFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZVNlYXJjaChlbmdpbmVJZCwgY3JlYXRlU2VhcmNoUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRyYW5zY3JpYmVzIGF1ZGlvIGludG8gdGhlIGlucHV0IGxhbmd1YWdlLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNjcmliZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgbWF0Y2ggdGhlIGF1ZGlvIGxhbmd1YWdlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXSBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IGF1ZGlvLiBTdXBwbHlpbmcgdGhlIGlucHV0IGxhbmd1YWdlIGluIFtJU08tNjM5LTFdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfSVNPXzYzOS0xX2NvZGVzKSBmb3JtYXQgd2lsbCBpbXByb3ZlIGFjY3VyYWN5IGFuZCBsYXRlbmN5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlVHJhbnNjcmlwdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIGxhbmd1YWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVUcmFuc2NyaXB0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgbGFuZ3VhZ2UsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUcmFuc2xhdGVzIGF1ZGlvIGludG8gaW50byBFbmdsaXNoLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNsYXRlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBiZSBpbiBFbmdsaXNoLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlVHJhbnNsYXRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVUcmFuc2xhdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmRlbGV0ZUZpbGUoZmlsZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmluZS10dW5lZCBtb2RlbC4gWW91IG11c3QgaGF2ZSB0aGUgT3duZXIgcm9sZSBpbiB5b3VyIG9yZ2FuaXphdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBtb2RlbCB0byBkZWxldGVcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZU1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5kZWxldGVNb2RlbChtb2RlbCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIHRoZSBzcGVjaWZpZWQgZmlsZVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZG93bmxvYWRGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuZG93bmxvYWRGaWxlKGZpbGVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIChub24tZmluZXR1bmVkKSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEVuZ2luZXMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAubGlzdEVuZ2luZXMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYmVsb25nIHRvIHRoZSB1c2VyXFwncyBvcmdhbml6YXRpb24uXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmlsZXMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAubGlzdEZpbGVzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBHZXQgZmluZS1ncmFpbmVkIHN0YXR1cyB1cGRhdGVzIGZvciBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBnZXQgZXZlbnRzIGZvci5cbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyZWFtXSBXaGV0aGVyIHRvIHN0cmVhbSBldmVudHMgZm9yIHRoZSBmaW5lLXR1bmUgam9iLiBJZiBzZXQgdG8gdHJ1ZSwgZXZlbnRzIHdpbGwgYmUgc2VudCBhcyBkYXRhLW9ubHkgW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdCkgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLiBUaGUgc3RyZWFtIHdpbGwgdGVybWluYXRlIHdpdGggYSAmI3g2MDtkYXRhOiBbRE9ORV0mI3g2MDsgbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLiAgSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmluZVR1bmVFdmVudHMoZmluZVR1bmVJZCwgc3RyZWFtLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5saXN0RmluZVR1bmVFdmVudHMoZmluZVR1bmVJZCwgc3RyZWFtLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdCB5b3VyIG9yZ2FuaXphdGlvblxcJ3MgZmluZS10dW5pbmcgam9ic1xuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbmVUdW5lcyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5saXN0RmluZVR1bmVzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdE1vZGVscyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5saXN0TW9kZWxzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGl0IHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVFbmdpbmUoZW5naW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLnJldHJpZXZlRW5naW5lKGVuZ2luZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5yZXRyaWV2ZUZpbGUoZmlsZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgR2V0cyBpbmZvIGFib3V0IHRoZSBmaW5lLXR1bmUgam9iLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLnJldHJpZXZlRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGVsIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBwZXJtaXNzaW9uaW5nLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIElEIG9mIHRoZSBtb2RlbCB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVNb2RlbChtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAucmV0cmlldmVNb2RlbChtb2RlbCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICB9O1xufTtcbi8qKlxuICogT3BlbkFJQXBpIC0gb2JqZWN0LW9yaWVudGVkIGludGVyZmFjZVxuICogQGV4cG9ydFxuICogQGNsYXNzIE9wZW5BSUFwaVxuICogQGV4dGVuZHMge0Jhc2VBUEl9XG4gKi9cbmNsYXNzIE9wZW5BSUFwaSBleHRlbmRzIGJhc2VfMS5CYXNlQVBJIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IEltbWVkaWF0ZWx5IGNhbmNlbCBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGNhbmNlbFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY2FuY2VsRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNhbmNlbEZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IEFuc3dlcnMgdGhlIHNwZWNpZmllZCBxdWVzdGlvbiB1c2luZyB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzIGFuZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgcHJvdmlkZWQgZG9jdW1lbnRzIG9yIGZpbGVzIHRvIGZpbmQgcmVsZXZhbnQgY29udGV4dC4gVGhlIHJlbGV2YW50IGNvbnRleHQgaXMgY29tYmluZWQgd2l0aCB0aGUgcHJvdmlkZWQgZXhhbXBsZXMgYW5kIHF1ZXN0aW9uIHRvIGNyZWF0ZSB0aGUgcHJvbXB0IGZvciBbY29tcGxldGlvbl0oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykuXG4gICAgICogQHBhcmFtIHtDcmVhdGVBbnN3ZXJSZXF1ZXN0fSBjcmVhdGVBbnN3ZXJSZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUFuc3dlcihjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlQW5zd2VyKGNyZWF0ZUFuc3dlclJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgY2hhdCBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlQ2hhdENvbXBsZXRpb24oY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlQ2hhdENvbXBsZXRpb24oY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIHRoZSBzcGVjaWZpZWQgYHF1ZXJ5YCB1c2luZyBwcm92aWRlZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgdGhlIGxhYmVsZWQgZXhhbXBsZXMgdG8gc2VsZWN0IHRoZSBvbmVzIG1vc3QgcmVsZXZhbnQgZm9yIHRoZSBwYXJ0aWN1bGFyIHF1ZXJ5LiBUaGVuLCB0aGUgcmVsZXZhbnQgZXhhbXBsZXMgYXJlIGNvbWJpbmVkIHdpdGggdGhlIHF1ZXJ5IHRvIGNvbnN0cnVjdCBhIHByb21wdCB0byBwcm9kdWNlIHRoZSBmaW5hbCBsYWJlbCB2aWEgdGhlIFtjb21wbGV0aW9uc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykgZW5kcG9pbnQuICBMYWJlbGVkIGV4YW1wbGVzIGNhbiBiZSBwcm92aWRlZCB2aWEgYW4gdXBsb2FkZWQgYGZpbGVgLCBvciBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgcmVxdWVzdCB1c2luZyB0aGUgYGV4YW1wbGVzYCBwYXJhbWV0ZXIgZm9yIHF1aWNrIHRlc3RzIGFuZCBzbWFsbCBzY2FsZSB1c2UgY2FzZXMuXG4gICAgICogQHBhcmFtIHtDcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3R9IGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVDbGFzc2lmaWNhdGlvbihjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVDbGFzc2lmaWNhdGlvbihjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgcHJvdmlkZWQgcHJvbXB0IGFuZCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIHtDcmVhdGVDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ29tcGxldGlvblJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUNvbXBsZXRpb24oY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVDb21wbGV0aW9uKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgbmV3IGVkaXQgZm9yIHRoZSBwcm92aWRlZCBpbnB1dCwgaW5zdHJ1Y3Rpb24sIGFuZCBwYXJhbWV0ZXJzLlxuICAgICAqIEBwYXJhbSB7Q3JlYXRlRWRpdFJlcXVlc3R9IGNyZWF0ZUVkaXRSZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVFZGl0KGNyZWF0ZUVkaXRSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlRWRpdChjcmVhdGVFZGl0UmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlbWJlZGRpbmcgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgaW5wdXQgdGV4dC5cbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUVtYmVkZGluZ1JlcXVlc3R9IGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUVtYmVkZGluZyhjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlRW1iZWRkaW5nKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFVwbG9hZCBhIGZpbGUgdGhhdCBjb250YWlucyBkb2N1bWVudChzKSB0byBiZSB1c2VkIGFjcm9zcyB2YXJpb3VzIGVuZHBvaW50cy9mZWF0dXJlcy4gQ3VycmVudGx5LCB0aGUgc2l6ZSBvZiBhbGwgdGhlIGZpbGVzIHVwbG9hZGVkIGJ5IG9uZSBvcmdhbml6YXRpb24gY2FuIGJlIHVwIHRvIDEgR0IuIFBsZWFzZSBjb250YWN0IHVzIGlmIHlvdSBuZWVkIHRvIGluY3JlYXNlIHRoZSBzdG9yYWdlIGxpbWl0LlxuICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBOYW1lIG9mIHRoZSBbSlNPTiBMaW5lc10oaHR0cHM6Ly9qc29ubGluZXMucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0LykgZmlsZSB0byBiZSB1cGxvYWRlZC4gIElmIHRoZSAmI3g2MDtwdXJwb3NlJiN4NjA7IGlzIHNldCB0byBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDssIGVhY2ggbGluZSBpcyBhIEpTT04gcmVjb3JkIHdpdGggXFxcXFxcJnF1b3Q7cHJvbXB0XFxcXFxcJnF1b3Q7IGFuZCBcXFxcXFwmcXVvdDtjb21wbGV0aW9uXFxcXFxcJnF1b3Q7IGZpZWxkcyByZXByZXNlbnRpbmcgeW91ciBbdHJhaW5pbmcgZXhhbXBsZXNdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZy9wcmVwYXJlLXRyYWluaW5nLWRhdGEpLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwdXJwb3NlIFRoZSBpbnRlbmRlZCBwdXJwb3NlIG9mIHRoZSB1cGxvYWRlZCBkb2N1bWVudHMuICBVc2UgXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7IGZvciBbRmluZS10dW5pbmddKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmluZS10dW5lcykuIFRoaXMgYWxsb3dzIHVzIHRvIHZhbGlkYXRlIHRoZSBmb3JtYXQgb2YgdGhlIHVwbG9hZGVkIGZpbGUuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVGaWxlKGZpbGUsIHB1cnBvc2UsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVGaWxlKGZpbGUsIHB1cnBvc2UsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBqb2IgdGhhdCBmaW5lLXR1bmVzIGEgc3BlY2lmaWVkIG1vZGVsIGZyb20gYSBnaXZlbiBkYXRhc2V0LiAgUmVzcG9uc2UgaW5jbHVkZXMgZGV0YWlscyBvZiB0aGUgZW5xdWV1ZWQgam9iIGluY2x1ZGluZyBqb2Igc3RhdHVzIGFuZCB0aGUgbmFtZSBvZiB0aGUgZmluZS10dW5lZCBtb2RlbHMgb25jZSBjb21wbGV0ZS4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICogQHBhcmFtIHtDcmVhdGVGaW5lVHVuZVJlcXVlc3R9IGNyZWF0ZUZpbmVUdW5lUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlRmluZVR1bmUoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlRmluZVR1bmUoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGltYWdlIGdpdmVuIGEgcHJvbXB0LlxuICAgICAqIEBwYXJhbSB7Q3JlYXRlSW1hZ2VSZXF1ZXN0fSBjcmVhdGVJbWFnZVJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUltYWdlKGNyZWF0ZUltYWdlUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUltYWdlKGNyZWF0ZUltYWdlUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlZGl0ZWQgb3IgZXh0ZW5kZWQgaW1hZ2UgZ2l2ZW4gYW4gb3JpZ2luYWwgaW1hZ2UgYW5kIGEgcHJvbXB0LlxuICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIGVkaXQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS4gSWYgbWFzayBpcyBub3QgcHJvdmlkZWQsIGltYWdlIG11c3QgaGF2ZSB0cmFuc3BhcmVuY3ksIHdoaWNoIHdpbGwgYmUgdXNlZCBhcyB0aGUgbWFzay5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvbXB0IEEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVzaXJlZCBpbWFnZShzKS4gVGhlIG1heGltdW0gbGVuZ3RoIGlzIDEwMDAgY2hhcmFjdGVycy5cbiAgICAgKiBAcGFyYW0ge0ZpbGV9IFttYXNrXSBBbiBhZGRpdGlvbmFsIGltYWdlIHdob3NlIGZ1bGx5IHRyYW5zcGFyZW50IGFyZWFzIChlLmcuIHdoZXJlIGFscGhhIGlzIHplcm8pIGluZGljYXRlIHdoZXJlICYjeDYwO2ltYWdlJiN4NjA7IHNob3VsZCBiZSBlZGl0ZWQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9ucyBhcyAmI3g2MDtpbWFnZSYjeDYwOy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlSW1hZ2VFZGl0KGltYWdlLCBwcm9tcHQsIG1hc2ssIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlSW1hZ2VFZGl0KGltYWdlLCBwcm9tcHQsIG1hc2ssIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgdmFyaWF0aW9uIG9mIGEgZ2l2ZW4gaW1hZ2UuXG4gICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gdXNlIGFzIHRoZSBiYXNpcyBmb3IgdGhlIHZhcmlhdGlvbihzKS4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVJbWFnZVZhcmlhdGlvbihpbWFnZSwgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVJbWFnZVZhcmlhdGlvbihpbWFnZSwgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgaWYgdGV4dCB2aW9sYXRlcyBPcGVuQUlcXCdzIENvbnRlbnQgUG9saWN5XG4gICAgICogQHBhcmFtIHtDcmVhdGVNb2RlcmF0aW9uUmVxdWVzdH0gY3JlYXRlTW9kZXJhdGlvblJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZU1vZGVyYXRpb24oY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVNb2RlcmF0aW9uKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBUaGUgc2VhcmNoIGVuZHBvaW50IGNvbXB1dGVzIHNpbWlsYXJpdHkgc2NvcmVzIGJldHdlZW4gcHJvdmlkZWQgcXVlcnkgYW5kIGRvY3VtZW50cy4gRG9jdW1lbnRzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIEFQSSBpZiB0aGVyZSBhcmUgbm8gbW9yZSB0aGFuIDIwMCBvZiB0aGVtLiAgVG8gZ28gYmV5b25kIHRoZSAyMDAgZG9jdW1lbnQgbGltaXQsIGRvY3VtZW50cyBjYW4gYmUgcHJvY2Vzc2VkIG9mZmxpbmUgYW5kIHRoZW4gdXNlZCBmb3IgZWZmaWNpZW50IHJldHJpZXZhbCBhdCBxdWVyeSB0aW1lLiBXaGVuIGBmaWxlYCBpcyBzZXQsIHRoZSBzZWFyY2ggZW5kcG9pbnQgc2VhcmNoZXMgb3ZlciBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgZ2l2ZW4gZmlsZSBhbmQgcmV0dXJucyB1cCB0byB0aGUgYG1heF9yZXJhbmtgIG51bWJlciBvZiBkb2N1bWVudHMuIFRoZXNlIGRvY3VtZW50cyB3aWxsIGJlIHJldHVybmVkIGFsb25nIHdpdGggdGhlaXIgc2VhcmNoIHNjb3Jlcy4gIFRoZSBzaW1pbGFyaXR5IHNjb3JlIGlzIGEgcG9zaXRpdmUgc2NvcmUgdGhhdCB1c3VhbGx5IHJhbmdlcyBmcm9tIDAgdG8gMzAwIChidXQgY2FuIHNvbWV0aW1lcyBnbyBoaWdoZXIpLCB3aGVyZSBhIHNjb3JlIGFib3ZlIDIwMCB1c3VhbGx5IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBzZW1hbnRpY2FsbHkgc2ltaWxhciB0byB0aGUgcXVlcnkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0LiAgWW91IGNhbiBzZWxlY3Qgb25lIG9mICYjeDYwO2FkYSYjeDYwOywgJiN4NjA7YmFiYmFnZSYjeDYwOywgJiN4NjA7Y3VyaWUmI3g2MDssIG9yICYjeDYwO2RhdmluY2kmI3g2MDsuXG4gICAgICogQHBhcmFtIHtDcmVhdGVTZWFyY2hSZXF1ZXN0fSBjcmVhdGVTZWFyY2hSZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZVNlYXJjaChlbmdpbmVJZCwgY3JlYXRlU2VhcmNoUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZVNlYXJjaChlbmdpbmVJZCwgY3JlYXRlU2VhcmNoUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgVHJhbnNjcmliZXMgYXVkaW8gaW50byB0aGUgaW5wdXQgbGFuZ3VhZ2UuXG4gICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zY3JpYmUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBtYXRjaCB0aGUgYXVkaW8gbGFuZ3VhZ2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFuZ3VhZ2VdIFRoZSBsYW5ndWFnZSBvZiB0aGUgaW5wdXQgYXVkaW8uIFN1cHBseWluZyB0aGUgaW5wdXQgbGFuZ3VhZ2UgaW4gW0lTTy02MzktMV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXMpIGZvcm1hdCB3aWxsIGltcHJvdmUgYWNjdXJhY3kgYW5kIGxhdGVuY3kuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVUcmFuc2NyaXB0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgbGFuZ3VhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVUcmFuc2NyaXB0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgbGFuZ3VhZ2UsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFRyYW5zbGF0ZXMgYXVkaW8gaW50byBpbnRvIEVuZ2xpc2guXG4gICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zbGF0ZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIGJlIGluIEVuZ2xpc2guXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlVHJhbnNsYXRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlVHJhbnNsYXRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaWxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBkZWxldGVGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmRlbGV0ZUZpbGUoZmlsZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaW5lLXR1bmVkIG1vZGVsLiBZb3UgbXVzdCBoYXZlIHRoZSBPd25lciByb2xlIGluIHlvdXIgb3JnYW5pemF0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgbW9kZWwgdG8gZGVsZXRlXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBkZWxldGVNb2RlbChtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmRlbGV0ZU1vZGVsKG1vZGVsLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIHRoZSBjb250ZW50cyBvZiB0aGUgc3BlY2lmaWVkIGZpbGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgZG93bmxvYWRGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmRvd25sb2FkRmlsZShmaWxlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIChub24tZmluZXR1bmVkKSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBsaXN0RW5naW5lcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikubGlzdEVuZ2luZXMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgUmV0dXJucyBhIGxpc3Qgb2YgZmlsZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHVzZXJcXCdzIG9yZ2FuaXphdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGxpc3RGaWxlcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikubGlzdEZpbGVzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IEdldCBmaW5lLWdyYWluZWQgc3RhdHVzIHVwZGF0ZXMgZm9yIGEgZmluZS10dW5lIGpvYi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gZ2V0IGV2ZW50cyBmb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyZWFtXSBXaGV0aGVyIHRvIHN0cmVhbSBldmVudHMgZm9yIHRoZSBmaW5lLXR1bmUgam9iLiBJZiBzZXQgdG8gdHJ1ZSwgZXZlbnRzIHdpbGwgYmUgc2VudCBhcyBkYXRhLW9ubHkgW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdCkgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLiBUaGUgc3RyZWFtIHdpbGwgdGVybWluYXRlIHdpdGggYSAmI3g2MDtkYXRhOiBbRE9ORV0mI3g2MDsgbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLiAgSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBsaXN0RmluZVR1bmVFdmVudHMoZmluZVR1bmVJZCwgc3RyZWFtLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikubGlzdEZpbmVUdW5lRXZlbnRzKGZpbmVUdW5lSWQsIHN0cmVhbSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgTGlzdCB5b3VyIG9yZ2FuaXphdGlvblxcJ3MgZmluZS10dW5pbmcgam9ic1xuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgbGlzdEZpbmVUdW5lcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikubGlzdEZpbmVUdW5lcyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgbGlzdE1vZGVscyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikubGlzdE1vZGVscyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGl0IHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIHJldHJpZXZlRW5naW5lKGVuZ2luZUlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikucmV0cmlldmVFbmdpbmUoZW5naW5lSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBmaWxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICByZXRyaWV2ZUZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikucmV0cmlldmVGaWxlKGZpbGVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgR2V0cyBpbmZvIGFib3V0IHRoZSBmaW5lLXR1bmUgam9iLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2JcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIHJldHJpZXZlRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLnJldHJpZXZlRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9kZWwgc3VjaCBhcyB0aGUgb3duZXIgYW5kIHBlcm1pc3Npb25pbmcuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIHJldHJpZXZlTW9kZWwobW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5yZXRyaWV2ZU1vZGVsKG1vZGVsLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG59XG5leHBvcnRzLk9wZW5BSUFwaSA9IE9wZW5BSUFwaTtcbiIsICIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cbm1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgPyBzZWxmLkZvcm1EYXRhIDogd2luZG93LkZvcm1EYXRhO1xuIiwgIlwidXNlIHN0cmljdFwiO1xuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE9wZW5BSSBBUElcbiAqIEFQSXMgZm9yIHNhbXBsaW5nIGZyb20gYW5kIGZpbmUtdHVuaW5nIGxhbmd1YWdlIG1vZGVsc1xuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjIuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29uZmlndXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZShcIi4uL3BhY2thZ2UuanNvblwiKTtcbmNsYXNzIENvbmZpZ3VyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtID0ge30pIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBwYXJhbS5hcGlLZXk7XG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uID0gcGFyYW0ub3JnYW5pemF0aW9uO1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gcGFyYW0udXNlcm5hbWU7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXJhbS5wYXNzd29yZDtcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHBhcmFtLmFjY2Vzc1Rva2VuO1xuICAgICAgICB0aGlzLmJhc2VQYXRoID0gcGFyYW0uYmFzZVBhdGg7XG4gICAgICAgIHRoaXMuYmFzZU9wdGlvbnMgPSBwYXJhbS5iYXNlT3B0aW9ucztcbiAgICAgICAgdGhpcy5mb3JtRGF0YUN0b3IgPSBwYXJhbS5mb3JtRGF0YUN0b3I7XG4gICAgICAgIGlmICghdGhpcy5iYXNlT3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5iYXNlT3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmFzZU9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oeyAnVXNlci1BZ2VudCc6IGBPcGVuQUkvTm9kZUpTLyR7cGFja2FnZUpzb24udmVyc2lvbn1gLCAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gIH0sIHRoaXMuYmFzZU9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgIGlmICh0aGlzLm9yZ2FuaXphdGlvbikge1xuICAgICAgICAgICAgdGhpcy5iYXNlT3B0aW9ucy5oZWFkZXJzWydPcGVuQUktT3JnYW5pemF0aW9uJ10gPSB0aGlzLm9yZ2FuaXphdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGFDdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1EYXRhQ3RvciA9IHJlcXVpcmUoXCJmb3JtLWRhdGFcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIGdpdmVuIE1JTUUgaXMgYSBKU09OIE1JTUUuXG4gICAgICogSlNPTiBNSU1FIGV4YW1wbGVzOlxuICAgICAqICAgYXBwbGljYXRpb24vanNvblxuICAgICAqICAgYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEY4XG4gICAgICogICBBUFBMSUNBVElPTi9KU09OXG4gICAgICogICBhcHBsaWNhdGlvbi92bmQuY29tcGFueStqc29uXG4gICAgICogQHBhcmFtIG1pbWUgLSBNSU1FIChNdWx0aXB1cnBvc2UgSW50ZXJuZXQgTWFpbCBFeHRlbnNpb25zKVxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZ2l2ZW4gTUlNRSBpcyBKU09OLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNKc29uTWltZShtaW1lKSB7XG4gICAgICAgIGNvbnN0IGpzb25NaW1lID0gbmV3IFJlZ0V4cCgnXihhcHBsaWNhdGlvblxcL2pzb258W147LyBcXHRdK1xcL1teOy8gXFx0XStbK11qc29uKVsgXFx0XSooOy4qKT8kJywgJ2knKTtcbiAgICAgICAgcmV0dXJuIG1pbWUgIT09IG51bGwgJiYgKGpzb25NaW1lLnRlc3QobWltZSkgfHwgbWltZS50b0xvd2VyQ2FzZSgpID09PSAnYXBwbGljYXRpb24vanNvbi1wYXRjaCtqc29uJyk7XG4gICAgfVxufVxuZXhwb3J0cy5Db25maWd1cmF0aW9uID0gQ29uZmlndXJhdGlvbjtcbiIsICJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBPcGVuQUkgQVBJXG4gKiBBUElzIGZvciBzYW1wbGluZyBmcm9tIGFuZCBmaW5lLXR1bmluZyBsYW5ndWFnZSBtb2RlbHNcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS4yLjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYXBpXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jb25maWd1cmF0aW9uXCIpLCBleHBvcnRzKTtcbiIsICJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE1lbnUsIE1lbnVJdGVtLCBNYXJrZG93bkZpbGVJbmZvLCBURmlsZSwgVEFic3RyYWN0RmlsZSwgcmVxdWVzdH0gZnJvbSAnb2JzaWRpYW4nO1xuY29uc3QgeyBDb25maWd1cmF0aW9uLCBPcGVuQUlBcGkgfSA9IHJlcXVpcmUoXCJvcGVuYWlcIik7XG5pbXBvcnQge2dldF9zdGFydHVwX2J5X25hbWUsIGFkZF9ub3Rlc190b19jb21wYW55LCBnZXRfcGVyc29uX2J5X25hbWUsIGdldF9wZXJzb25fZGV0YWlscywgaXNfcGVyc29uX2luX3ZlbnR1cmVfbmV0d29yaywgZ2V0X2ZpZWxkX3ZhbHVlcywgYWRkX2VudHJ5X3RvX2xpc3QsIGFkZF9maWVsZF92YWx1ZSwgYWRkX25vdGVzX3RvX3BlcnNvbn0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IE11bHRpcGxlVGV4dElucHV0TW9kYWwsIFRleHRJbnB1dE1vZGFsIH0gZnJvbSAnbW9kYWwnO1xuXG5cblxuXG5sZXQgeW91X2FwaV9rZXkgPSAnJ1xubGV0IGFmZmluaXR5QVBJS2V5ID0gJydcbmxldCBvcGVuYWlBUElLZXkgPSAnJ1xubGV0IG93bmVyX3ZhbHVlID0gJzEwJ1xubGV0IGNvbm5lY3Rpb25fb3duZXJfZmllbGQgPSAnMTAnXG5sZXQgdmVudHVyZV9uZXR3b3JrX2xpc3QgPSAnNTAwJ1xubGV0IGludmVzdG9yX25hbWVzOiBzdHJpbmdbXSA9IFtdXG5sZXQgZmlyZWZsaWVzX2FwaV9rZXkgPSAnJ1xuXG5pbnRlcmZhY2UgQnV0bGVyU2V0dGluZ3Mge1xuICAgIGFmZmluaXR5S2V5OiBzdHJpbmc7XG4gICAgb3BlbkFJS2V5OiBzdHJpbmc7XG4gICAgb3duZXJfcGVyc29uX3ZhbHVlOiBzdHJpbmc7XG4gICAgY29ubmVjdGlvbl9vd25lcl9maWVsZF9pZDogc3RyaW5nO1xuICAgIHZlbnR1cmVfbmV0d29ya19saXN0X2lkOiBzdHJpbmc7XG4gICAgdGVhbV9uYW1lczogc3RyaW5nO1xuICAgIGZpcmVmbGllc19hcGk6IHN0cmluZztcbiAgICB5b3VfYXBpOiBzdHJpbmdcblxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBCdXRsZXJTZXR0aW5ncyA9IHtcbiAgICBhZmZpbml0eUtleTogJ2RlZmF1bHQnLFxuICAgIG9wZW5BSUtleTogJ2RlZmF1bHQnLFxuICAgIG93bmVyX3BlcnNvbl92YWx1ZTogJzEwJyxcbiAgICBjb25uZWN0aW9uX293bmVyX2ZpZWxkX2lkOiAnMTAwJyxcbiAgICB2ZW50dXJlX25ldHdvcmtfbGlzdF9pZDogJzUwMCcsXG4gICAgeW91X2FwaTogJzxZb3UuY29tLUFQSS1LZXk+JyxcbiAgICB0ZWFtX25hbWVzOiAnQmVuIEhvcnJvd2l0eiwgVmlub2QgS2hvc2xhJyxcbiAgICBmaXJlZmxpZXNfYXBpOiAnZGVmYXVsdCdcblxufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIG9wZW5haV9qcyhxdWVyeTogU3RyaW5nLCBzeXN0ZW1fcHJvbXB0OiBTdHJpbmcsIG1heF90b2tlbnM6IG51bWJlciA9IDI1NiwgdGVtcGVyYXR1cmU6IG51bWJlciA9IDAuMyl7XG4gICAgY29uc3QgY29uZmlndXJhdGlvbiA9IG5ldyBDb25maWd1cmF0aW9uKHtcbiAgICAgICAgYXBpS2V5OiBvcGVuYWlBUElLZXksXG4gICAgICB9KTtcbiAgICAgIC8vdG8gYXZvaWQgYW4gYW5ub3lpbmcgZXJyb3Ivd2FybmluZyBtZXNzYWdlXG4gICAgICBkZWxldGUgY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucy5oZWFkZXJzWydVc2VyLUFnZW50J107XG5cbiAgICAgIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUlBcGkoY29uZmlndXJhdGlvbik7XG4gICAgICBjb25zdCBzeXN0ZW1fbWVzc2FnZSA9IHN5c3RlbV9wcm9tcHRcbiAgICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNyZWF0ZUNoYXRDb21wbGV0aW9uKHtcbiAgICAgICAgbW9kZWw6IFwiZ3B0LTQtMTEwNi1wcmV2aWV3XCIsXG4gICAgICAgIHRlbXBlcmF0dXJlOiB0ZW1wZXJhdHVyZSxcbiAgICAgICAgbWF4X3Rva2VuczogbWF4X3Rva2VucyxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtyb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBzeXN0ZW1fbWVzc2FnZX0sXG4gICAgICAgICAgICB7cm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHF1ZXJ5fSBcbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgXG4gICAgbGV0IHN1bW1hcnkgPSByZXNwb25zZS5kYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50XG4gICAgcmV0dXJuIHN1bW1hcnlcbn1cblxuYXN5bmMgZnVuY3Rpb24gb3BlbmFpX2pzX211bHRpdHVybihxdWVyaWVzOiBzdHJpbmdbXSwgc3lzdGVtX3Byb21wdDogU3RyaW5nLCBtYXhfdG9rZW5zOiBudW1iZXIgPSAyNTYsIHRlbXBlcmF0dXJlOiBudW1iZXIgPSAwLjMpe1xuICAgIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbih7XG4gICAgICAgIGFwaUtleTogb3BlbmFpQVBJS2V5LFxuICAgICAgfSk7XG4gICAgICAvL3RvIGF2b2lkIGFuIGFubm95aW5nIGVycm9yL3dhcm5pbmcgbWVzc2FnZVxuICAgICAgZGVsZXRlIGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnMuaGVhZGVyc1snVXNlci1BZ2VudCddO1xuXG4gICAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJQXBpKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgY29uc3Qgc3lzdGVtX21lc3NhZ2UgPSBzeXN0ZW1fcHJvbXB0XG5cbiAgICAgIGxldCBtZXNzYWdlcyA9IFt7cm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogc3lzdGVtX21lc3NhZ2V9XVxuICAgICAgbGV0IHJlcGxpZXMgPSBbXVxuIFxuICAgIGZvciAobGV0IHF1ZXJ5IG9mIHF1ZXJpZXMpe1xuICAgICAgICBtZXNzYWdlcy5wdXNoKHtyb2xlOiBcInVzZXJcIiwgY29udGVudDogcXVlcnl9KVxuICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlcylcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY3JlYXRlQ2hhdENvbXBsZXRpb24oe1xuICAgICAgICAgICAgbW9kZWw6IFwiZ3B0LTQtMTEwNi1wcmV2aWV3XCIsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGVtcGVyYXR1cmUsXG4gICAgICAgICAgICBtYXhfdG9rZW5zOiBtYXhfdG9rZW5zLFxuICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzXG4gICAgICAgICAgfSk7XG4gICAgICAgIGxldCBhc3Npc3RhbnRfcmVwbHkgPSByZXNwb25zZS5kYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50XG4gICAgICAgIG1lc3NhZ2VzLnB1c2goe3JvbGU6IFwiYXNzaXN0YW50XCIsIGNvbnRlbnQ6YXNzaXN0YW50X3JlcGx5fSlcbiAgICAgICAgcmVwbGllcy5wdXNoKGFzc2lzdGFudF9yZXBseSlcblxuICAgIH1cblxuICAgIHJldHVybiByZXBsaWVzXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHN1bW1hcml6ZV9zZWxlY3RlZF9zdGFydHVwX3RleHQoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlld3xNYXJrZG93bkZpbGVJbmZvLCBzdGF0dXM6IEhUTUxFbGVtZW50KXtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHRha2VzIHRoZSBzZWxlY3RlZCB0ZXh0IGZyb20gYSBzdGFydHVwLCBzdW1tYXJpemVzIGl0LCBhbmQgdGhlbiBwdXRzIGl0IGJhY2sgaW4gdGhlIGZpbGVcbiAgICAgKiBUaGUgXCJmdWxsLXRleHRcIiBnZXRzIGFwcGVuZWQgYWZ0ZXIgdGhlIGhlYWRpbmcgJyMgU3RvcCBJbmRleGluZycgc3VjaCB0aGF0IGl0IGlzIG5vdCBpbmRleGVkIGFueW1vcmUgYnkgdGhlIGVtYmVkZGluZyBlbmdpbmVcbiAgICAgKiBUaGlzIGFsc28gaGVscHMgdG8gYXZvaWQgcHVzaGluZyBhbGwgb2YgdGhlIGNvbnZvbHV0ZWQgdGV4dCBpbnRvIEFmZmluaXR5IGxhdGVyIG9uXG4gICAgICovXG5cbiAgICBjb25zdCBzZWwgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKClcbiAgICBuZXcgTm90aWNlKFwiU3VtbWFyaXppbmcuLi5cIilcbiAgICBzdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwOiBWQyBDb3BpbG90IHN1bW1hcml6aW5nLi4uJylcbiAgICBzdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyBzdW1tYXJpemluZy4uLicpXG4gICAgXG5cbiAgICBjb25zdCBzeXN0ZW1fcHJvbXB0ID0gXCJZb3UgYXJlIGEgc3VtbWFyaXplciBmb3IgbXkgbm90ZXMgYWJvdXQgc3RhcnR1cHMuIFlvdXIgam9iIGlzIHRvIHJlYWQgdGhyb3VnaCBteSBub3RlcyBhbmQgY3JlYXRlIGEgc3VtbWFyeSBpbiB0aGUgZm9sbG93aW5nIHNjaGVtYTpcXG5cXFxuLSAqKlRlYW0qKjo8dGhlIGZvdW5kZXIgdGVhbSBiZWhpbmQgdGhlIHN0YXJ0dXA+XFxuXFxuXFxcbi0gKipQcm9kdWN0Kio6PHRoZSBwcm9kdWN0IGFuZCB0aGUgcHJvYmxlbSBpdCBzb2x2ZXM+XFxuXFxuXFxcbi0gKipUcmFjdGlvbioqOjxob3cgbXVjaCByZXZlbnVlIGhhcyB0aGUgc3RhcnR1cCBnZW5lcmF0ZWQgc28gZmFyLCBob3cgbWFueSBjdXN0b21lcnMgZG8gdGhleSBoYXZlPlxcblxcblxcXG4tICoqUm91bmQqKjo8aG93IG11Y2ggbW9uZXkgaGF2ZSB0aGV5IHJhaXNlZCBzbyBmYXIgYXQgd2hhdCB0ZXJtcy4gSG93IG11Y2ggbW9uZXkgYXJlIHRoZXkgcmFpc2luZyBub3c+XCJcbiAgICBcbiAgICBsZXQgbmV3X3N1bW1hcnkgPSBhd2FpdCBvcGVuYWlfanMoc2VsLCBzeXN0ZW1fcHJvbXB0KVxuICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gJyNncHRfc3VtbWFyaXplZCwgI0FkZEhhc2h0YWdzLCAjcmV2aWV3X3N0YXJ0dXAgXFxuJysgbmV3X3N1bW1hcnkgKyAnXFxuJyArICcjIFN0b3AgSW5kZXhpbmcgXFxuIyMgTm90ZXNcXG4nICsgc2VsXG4gICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVwbGFjZW1lbnQpXG4gICAgc3RhdHVzLnNldFRleHQoJ1x1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MDogVkMgQ29waWxvdCByZWFkeScpXG4gICAgc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ0NvcGlsb3QgaXMgcmVhZHknKVxufVxuXG5mdW5jdGlvbiBzdGFydHVwX3JlYWR5X2Zvcl9hZmZpbml0eShmaWxlX2NvbnRlbnQ6IHN0cmluZyl7XG4gICAgcmV0dXJuIChmaWxlX2NvbnRlbnQuaW5jbHVkZXMoJyNzdGFydHVwcy9zY3JlZW5lZCcpICYmIGZpbGVfY29udGVudC5pbmNsdWRlcygnI0FmZmluaXR5JykpXG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RfdGl0bGVfYW5kX25vdGUodGV4dDogc3RyaW5nKXtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHRha2VzIGFsbCB0aGUgdGV4dCBpbiB0aGUgZmlsZSBhbmQgcmV0dXJucyB0aGUgdGl0bGUgYW5kIHRoZSBib2R5IG9mIHRoZSBub3RlLlxuICAgICAqIFRoZSBzcGxpdCBoYXBwZW5zIGJhc2VkIG9uIGgxIGhlYWRlci4gXG4gICAgICogVGhpcyBtZWFucyBzdWJzdHJpbmdzWzBdIGlzIHVzdWFsbHkgdGhlIGRhdGEgYmVmb3JlIHRoZSB0aXRsZS5cbiAgICAgKiBzdWJzdHJpbmdzWzFdIGlzIHVzdWFsbHkgdGhlIGJvZHkgb2YgdGhlIG5vdGVcbiAgICAgKiBpZiB0aGVyZSBpcyBzdWJzdHJpbmcgWzJdLCB0aGlzIG1lYW5zIHRoZXJlIGlzIGFub3RoZXIgaDEgaGVhZGVyICh1c3VhbGx5ICMgU3RvcCBJbmRleGluZylcbiAgICAgKiBEb3duc3RyZWFtIHRhc2tzIG9ubHkgZGVhbHMgd2l0aCBzdWJzdHJpbmdbMV0gYXMgdGhlIG5vdGU7IGkuZSBpbmZvcm1hdGlvbiBhZnRlciB0aGUgU3RvcCBJbmRleGluZyBhcmUgZXhlY2x1ZGVkXG4gICAgICovXG5cbiAgICAgICAgLy8/Z20gbWVhbnMgc3RyaW5nIGlzIG11bHRpbGluZXMsIGFuZCBeIHdvdWxkIGNhdGNoIGJlZ2lubmluZyBvZiBldmVyeSBsaW5lIG5vdCBqdXN0IGJlZ2lubmluZyBvZiB0aGUgc3RyaW5nIVxuICAgICAgICBsZXQgcGF0dGVybiA9IC9eIyAuKlxcbi9nbTtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSB0ZXh0Lm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICBsZXQgdGl0bGUgPSAnJ1xuICAgICAgICBpZihtYXRjaGVzKXtcbiAgICAgICAgICAgIHRpdGxlID0gbWF0Y2hlc1swXVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzdHJpbmdzID0gdGV4dC5zcGxpdChwYXR0ZXJuKVxuICAgICAgICBjb25zb2xlLmxvZyhgVGl0bGU6ICR7dGl0bGV9YClcbiAgICAgICAgY29uc29sZS5sb2coc3Vic3RyaW5ncylcblxuICAgICAgICByZXR1cm4gW3RpdGxlLCBzdWJzdHJpbmdzXVxuXG59XG5cbmZ1bmN0aW9uIGNsZWFuX3RleHQoc3RhcnR1cF9uYW1lOiBzdHJpbmcpe1xuICAgIHN0YXJ0dXBfbmFtZSA9IHN0YXJ0dXBfbmFtZS5yZXBsYWNlKC9bXkEtWmEtejAtOVxccy5dL2csICcnKTtcbiAgICBzdGFydHVwX25hbWUgPSBzdGFydHVwX25hbWUudHJpbSgpXG4gICAgcmV0dXJuIHN0YXJ0dXBfbmFtZVxufVxuXG5hc3luYyBmdW5jdGlvbiBwdXNoX3N0YXJ0dXBzX3RvX2FmZmluaXR5KHN0YXR1czogSFRNTEVsZW1lbnQpe1xuICAgICAgICAvKipcbiAgICAgKiBQdXNoIGFsbCBlbGlnaWJsZSBzdGFydHVwcyB0byBhZmZpbml0eSAobm90aWZ5IG1lIG90aGVyd2lzZSlcbiAgICAgKi9cbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgc3RhdHVzLnNldFRleHQoJ1x1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MDogVkMgQ29waWxvdCBzeW5jaW5nIHdpdGggQWZmaW5pdHkuLi4nKVxuICAgICAgICBzdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyBwdXNoaW5nIHN0YXJ0dXAgaW5mbyB0byBBZmZpbml0eS4uLicpXG4gICAgXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgZmlsZXMpe1xuICAgICAgICAgICAgbGV0IGZpbGVfY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoaXRlbSlcbiAgICAgICAgICAgIGlmIChzdGFydHVwX3JlYWR5X2Zvcl9hZmZpbml0eShmaWxlX2NvbnRlbnQpKXtcbiAgICAgICAgICAgICAgICBsZXQgW3RpdGxlLCBzdWJzdHJpbmdzXSA9IGV4dHJhY3RfdGl0bGVfYW5kX25vdGUoZmlsZV9jb250ZW50KVxuICAgICAgICAgICAgICAgIGxldCBzdGFydHVwX25hbWUgPSBTdHJpbmcodGl0bGUpXG4gICAgICAgICAgICAgICAgc3RhcnR1cF9uYW1lID0gY2xlYW5fdGV4dChzdGFydHVwX25hbWUpXG4gICAgICAgICAgICAgICAgbGV0IG5vdGUgPSBzdWJzdHJpbmdzWzFdXG4gICAgICAgICAgICAgICAgbm90ZSA9IG5vdGUucmVwbGFjZSgvXig9PXxcXCpcXCp8I3syLH0pJC9nLCAnJylcblxuICAgICAgICAgICAgICAgIGxldCBzdGFydHVwID0gYXdhaXQgZ2V0X3N0YXJ0dXBfYnlfbmFtZShhZmZpbml0eUFQSUtleSwgb3duZXJfdmFsdWUsIHN0YXJ0dXBfbmFtZSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnR1cCl7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGFkZF9ub3Rlc190b19jb21wYW55KHN0YXJ0dXAsIG5vdGUsIGFmZmluaXR5QVBJS2V5KVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTdGFydHVwOiAke3N0YXJ0dXBfbmFtZX0gd2FzIE5PVCB1cGRhdGVkIG9uIEFmZmluaXR5YClcblxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFN0YXJ0dXA6ICR7c3RhcnR1cF9uYW1lfSB3YXMgdXBkYXRlZCBvbiBBZmZpbml0eWApXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2NvbnRlbnQgPSBmaWxlX2NvbnRlbnQucmVwbGFjZSgvI0FmZmluaXR5L2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGl0ZW0sIGZpbGVfY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFN0YXJ0dXA6ICR7c3RhcnR1cF9uYW1lfSB3YXMgTk9UIGZvdW5kIG9uIEFmZmluaXR5YClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3IE5vdGljZSgnRG9uZSEnKVxuICAgICAgICBzdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwOiBWQyBDb3BpbG90IHJlYWR5JylcbiAgICAgICAgc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ0NvcGlsb3QgaXMgcmVhZHknKVxuXG4gICBcbiAgICBcblxufVxuXG5mdW5jdGlvbiBpc19zdW1tYXJpemFibGUoZmlsZV9jb250ZW50OiBzdHJpbmcpe1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBWQyBpcyB0byBiZSBzdW1tYXJpemVkIChJIGFtIGNvbm5lY3RlZCB3aXRoIHRoZW0gYW5kIHRoZXkgYXJlIG5vdCBhbHJlYWR5IHN1bW1hcml6ZWQpXG4gICAgICovXG4gICAgcmV0dXJuIGZpbGVfY29udGVudC5pbmNsdWRlcygnI25ldHdvcmsvY29ubmVjdGVkJykgJiYgKCBmaWxlX2NvbnRlbnQuaW5jbHVkZXMoJyNFbnRpdHkvVkMnKSB8fCBmaWxlX2NvbnRlbnQuaW5jbHVkZXMoJyNQZXJzb24vVkMnKSApICYmIChmaWxlX2NvbnRlbnQuaW5jbHVkZXMoJyNncHRfc3VtbWFyaXplZCcpICE9IHRydWUpICYmIChmaWxlX2NvbnRlbnQuaW5jbHVkZXMoJ2RhdGF2aWV3JykgIT0gdHJ1ZSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBzdW1tYXJpemVfdmNfdGV4dCh0ZXh0OiBzdHJpbmcpe1xuICAgIC8qKlxuICAgICAqIEdpdmVuIHRoZSBmdWxsIHRleHQgaW4gYSBWQyBub3RlLCB0aGlzIGZ1bmN0aW9uIHN1bW1hcml6ZXMgdGhlIGltcG9ydGFudCBwYXJ0IChiZWZvcmUgIyBTdG9wIEluZGV4aW5nKSBhbmQgcmV0dXJucyB0aGUgbmV3IGZ1bGwgdGV4dCB0aGF0IHNob3VsZCBiZSB3cml0dGVuIHRvIHRoZSBmaWxlXG4gICAgICogVGhlIGZ1bGwgdGV4dCBpbmNsdWRlcyB0aGUgbWV0YSBkYXRhIGFuZCB0YWdzIGluZm9ybWF0aW9uIGJlZm9yZSB0aGUgdGl0bGUsIHRoZSB0aXRsZSwgdGhlIHN1bW1hcnksIGFuZCBhZGRzIHRoZSBjb3JlIGRhdGEgYWZ0ZXIgdGhlIGhlYWRpbmcgXCIjIFN0b3AgSW5kZXhpbmdcIlxuICAgICAqL1xuXG4gICAgLy8gV2Ugc2hvdWxkIHN1bW1hcml6ZSBvbmx5IGluZm9ybWF0aW9uIHRoYXQgaXMgYmVmb3JlICcjIFN0b3AgSW5kZXhpbmcnXG4gICAgbGV0IFt0aXRsZSwgc3Vic3RyaW5nc10gPSBleHRyYWN0X3RpdGxlX2FuZF9ub3RlKHRleHQpXG4gICAgLy9XZSBjb25zaWRlciBib3RoIGRhdGEgYmVmb3JlIHRoZSB0aXRsZSAoaGFzaHRhZ3MpIGFzIHdlbGwgYXMgdGhlIGJvZHkgb2YgdGhlIG5vdGUgICBcbiAgICBsZXQgaGFzaHRhZ3NcbiAgICB0cnl7XG4gICAgICAgaGFzaHRhZ3MgPSBzdWJzdHJpbmdzWzBdLnNwbGl0KCdUYWdzOicpWzFdXG4gICAgfVxuICAgIGNhdGNoe1xuICAgICAgICBoYXNodGFncyA9IHN1YnN0cmluZ3NbMF1cbiAgICAgICAgbmV3IE5vdGljZShgJHt0aXRsZX06IERvZXMgbm90IGhhdmUgYW55IGd1aWRpbmcgaGFzaHRhZ3MsIHRoaXMgY291bGQgaGVscCB0aGUgc3VtbWFyaXplciB1bmRlcnN0YW5kIHRoZSBWQyBiZXR0ZXJgLCAzNjAwKVxuICAgIH1cbiAgICBsZXQgdGV4dF90b19zdW1tYXJpemUgPSBoYXNodGFncyArICdcXG4nICsgc3Vic3RyaW5nc1sxXVxuXG4gICAgY29uc29sZS5sb2coYFN1bW1hcml6aW5nOiAke3RpdGxlfWApXG5cblxuICAgIGNvbnN0IHN5c3RlbV9wcm9tcHQgPSBcIllvdSBhcmUgYSBzdW1tYXJpemVyIGZvciBteSBub3RlcyBhYm91dCBWQyBGdW5kcy4gWW91ciBqb2IgaXMgdG8gcmVhZCB0aHJvdWdoIG15IG5vdGVzIGFuZCBjcmVhdGUgYSBzdW1tYXJ5IGluIHRoZSBmb2xsb3dpbmcgc2NoZW1hOlxcblxcXG4tIEZ1bmQgU2l6ZTo6PEhvdyBiaWcgaXMgdGhlIGZ1bmQ/PlxcblxcXG4tIFRpY2tldCBTaXplOjo8SG93IG11Y2ggZG9lcyB0aGUgZnVuZCBpbnZlc3QgcGVyIHN0YXJ0dXA/PlxcblxcXG4tIEdlb2dyYXBoeTo6PFdoZXJlIGNhbiB0aGUgZnVuZCBpbnZlc3Q/PlxcblxcXG4tIFN0YWdlOjogPFByZS1zZWVkLCBTZWVkLCBTZXJpZXMgQSwgZXRjPlxcblxcXG4tIEluZHVzdHJ5Ojo8SW4gd2hpY2ggaW5kdXN0cmllcyBkb2VzIHRoZSBmdW5kIGludmVzdD8+XFxuXFxcbi0gU3BlY2lhbDo6PEFueSBzcGVjaWFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmdW5kIG9yIHRoZSBpbnZlc3RvciB0aGF0IEkgc2hvdWxkIHJlbWVtYmVyPlwiXG5cbiAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgb3BlbmFpX2pzKCdOb3RlczpcXG4nICsgdGV4dF90b19zdW1tYXJpemUsIHN5c3RlbV9wcm9tcHQpXG5cbiAgICBsZXQgbmV3X3N1bW1hcnk6IHN0cmluZyA9IFN0cmluZyhzdW1tYXJ5KVxuXG4gICAgXG4gICAgdGl0bGUgPSB0aXRsZS50b1N0cmluZygpXG4gICAgbGV0IGxlYWRpbmdfdGV4dCA9ICcnXG4gICAgbGV0IHJlcGxhY2VtZW50ID0gJydcbiAgICBsZXQgdGFpbGluZ190ZXh0ID0gJycvL2hhc2h0YWdzXG5cblxuICAgIGlmKHN1YnN0cmluZ3Mpe1xuICAgICAgICBsZWFkaW5nX3RleHQgPSBzdWJzdHJpbmdzWzBdICsgJ1xcbicgKyB0aXRsZSArICdcXG4nXG4gICAgICAgIGZvciAobGV0IHN1YnN0cmluZyBvZiBzdWJzdHJpbmdzLnNsaWNlKDEpKXtcbiAgICAgICAgICAgIHRhaWxpbmdfdGV4dCA9IHRhaWxpbmdfdGV4dCArICdcXG4nICsgc3Vic3RyaW5nXG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZW1lbnQgPSBsZWFkaW5nX3RleHQgKyAnI2dwdF9zdW1tYXJpemVkLCAjcmV2aWV3IFxcbicrIG5ld19zdW1tYXJ5ICsgJ1xcbicgKyAnIyBTdG9wIEluZGV4aW5nIFxcbiMjIE5vdGVzXFxuJyArIHRhaWxpbmdfdGV4dFxuICAgICAgICByZXR1cm4gW3JlcGxhY2VtZW50LCBuZXdfc3VtbWFyeSwgdGl0bGVdXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIHJldHVybiBbdGV4dCwgdGV4dCwgJyddXG5cbiAgICB9XG5cbiAgICBcbn1cblxuYXN5bmMgZnVuY3Rpb24gc3VtbWFyaXplX2FsbF92YyhzdGF0dXM6IEhUTUxFbGVtZW50KXtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHN1bW1hcml6ZWQgYWxsIFZDIG5vdGVzIHRoYXQgYXJlIGVsaWdpYmxlIGZvciBzdW1tYXJpemF0aW9uIChwZW9wbGUgb3IgZW50aXRpZXMgSSBhbSBjb25uZWN0ZWQgd2l0aClcbiAgICAgKi9cblxuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgc3RhdHVzLnNldFRleHQoJ1x1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MDogVkMgQ29waWxvdCBzdW1tYXJpemluZy4uLicpXG4gICAgc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ1ZDIENvcGlsb3QgaXMgc3VtbWFyaXppbmcgYWxsIHlvdXIgVkMgY29ubmVjdGlvbnMuLi4nKVxuICAgIGZvciAobGV0IGl0ZW0gb2YgZmlsZXMpe1xuICAgICAgICAvL2NvbnNvbGUubG9nKGl0ZW0ubmFtZSlcbiAgICAgICAgbGV0IGZpbGVfY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoaXRlbSlcbiAgICAgICAgaWYgKGlzX3N1bW1hcml6YWJsZShmaWxlX2NvbnRlbnQpKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBXZSBhcmUgY2hhbmdpbmcgZmlsZTogJHtpdGVtLm5hbWV9YClcbiAgICAgICAgICAgIC8vV2Ugc2hvdWxkIHN1bW1hcml6ZSB0aGlzIGZpbGUgdGhlblxuICAgICAgICAgICAgbGV0IFtuZXdfdGV4dCwgc3VtbWFyeSwgdGl0bGVdID0gYXdhaXQgc3VtbWFyaXplX3ZjX3RleHQoZmlsZV9jb250ZW50KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGl0bGUgIT0gJycpe1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShpdGVtLCBuZXdfdGV4dClcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGAke3RpdGxlfSBoYXMgYmVlbiBzdW1tYXJpemVkYClcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgc3RhdHVzLnNldFRleHQoJ1x1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MDogVkMgQ29waWxvdCByZWFkeScpXG4gICAgc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ1ZDIENvcGlsb3QgaXMgcmVhZHknKVxuICAgIFxuXG4gICAgXG5cbn1cblxuZnVuY3Rpb24gdmNfcmVhZHlfZm9yX2FmZmluaXR5KGZpbGVfY29udGVudDogc3RyaW5nKXtcbiAgICByZXR1cm4gZmlsZV9jb250ZW50LmluY2x1ZGVzKCcjZ3B0X3N1bW1hcml6ZWQnKSAmJiBmaWxlX2NvbnRlbnQuaW5jbHVkZXMoJyNBZmZpbml0eScpXG59XG5cblxuYXN5bmMgZnVuY3Rpb24gcHVzaF92Y3NfdG9fYWZmaW5pdHkoc3RhdHVzOiBIVE1MRWxlbWVudCl7XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBwdXNoZXMgYWxsIHJlYWR5IFZDcyB0byBhZmZpbml0eSwgaXQgYWxzbyBub3RpZmllcyB1cyBpZiBhIHBlcnNvbiBjYW4gbm90IGJlIGZvdW5kIG9uIGFmZmluaXR5XG4gICAgICovXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICBzdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwOiBWQyBDb3BpbG90IHN5bmNpbmcgd2l0aCBBZmZpbml0eS4uLicpXG4gICAgc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ0NvcGlsb3QgaXMgcHVzaGluZyBWQ3MgaW5mbyB0byBBZmZpbml0eS4uLicpXG4gICAgZm9yIChsZXQgaXRlbSBvZiBmaWxlcyl7XG4gICAgICAgIGxldCBmaWxlX2NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGl0ZW0pXG4gICAgICAgIGlmICh2Y19yZWFkeV9mb3JfYWZmaW5pdHkoZmlsZV9jb250ZW50KSl7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBbdGl0bGUsIHN1YnN0cmluZ3NdID0gZXh0cmFjdF90aXRsZV9hbmRfbm90ZShmaWxlX2NvbnRlbnQpXG4gICAgICAgICAgICBsZXQgc3VtbWFyeSA9IHN1YnN0cmluZ3NbMV1cbiAgICAgICAgICAgIGxldCBwZXJzb25fbmFtZSA9IFN0cmluZyh0aXRsZSlcbiAgICAgICAgICAgIHBlcnNvbl9uYW1lID0gY2xlYW5fdGV4dChwZXJzb25fbmFtZSlcbiAgICAgICAgICAgIGxldCBub3RlID0gc3Vic3RyaW5nc1sxXVxuICAgICAgICAgICAgbm90ZSA9IG5vdGUucmVwbGFjZSgvXig9PXxcXCpcXCp8I3syLH0pJC9nLCAnJylcblxuICAgICAgICAgICAgbGV0IHBlcnNvbiA9IGF3YWl0IGdldF9wZXJzb25fYnlfbmFtZShhZmZpbml0eUFQSUtleSxwZXJzb25fbmFtZSlcblxuICAgICAgICAgICAgaWYgKHBlcnNvbil7XG4gICAgICAgICAgICAgICAgbGV0IHBlcnNvbl9pZCA9IHBlcnNvblsnaWQnXVxuICAgICAgICAgICAgICAgIGxldCBwZXJzb25fZGV0YWlscyA9IGF3YWl0IGdldF9wZXJzb25fZGV0YWlscyhhZmZpbml0eUFQSUtleSwgcGVyc29uX2lkKVxuICAgICAgICAgICAgICAgIGxldCBsaXN0X2VudHJ5X2lkID0gYXdhaXQgaXNfcGVyc29uX2luX3ZlbnR1cmVfbmV0d29yayhhZmZpbml0eUFQSUtleSwgcGVyc29uX2RldGFpbHMsIHZlbnR1cmVfbmV0d29ya19saXN0KVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RfZW50cnlfaWQgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgICAgIC8vaWYgcGVyc29uIGlzIGluIHZlbnR1cmUgbmV0d29ya1xuICAgICAgICAgICAgICAgICAgICAvL3RvZG8gSSB0aGluayByZW1vdmluZyB0aGlzIHdpbGwgaGF2ZSBubyBuZWdhdGl2ZSBlZmZlY3Q/XG4gICAgICAgICAgICAgICAgICAgIC8vbGV0IHBlcnNvbl92ZW50dXJlX25ldHdvcmtfZmllbGRzID0gYXdhaXQgZ2V0X2ZpZWxkX3ZhbHVlcyhhZmZpbml0eUFQSUtleSwgJ2xpc3RfZW50cnlfaWQnLCBsaXN0X2VudHJ5X2lkKVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHRoZSBwZXJzb24gdG8gdmVudHVyZSBuZXR3b3JrIGZpcnN0XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFkZF9lbnRyeV90b19saXN0KGFmZmluaXR5QVBJS2V5LCB2ZW50dXJlX25ldHdvcmtfbGlzdCwgcGVyc29uX2lkKVxuICAgICAgICAgICAgICAgICAgICBsZXQgcGVyc29uX2RldGFpbHMgPSBhd2FpdCBnZXRfcGVyc29uX2RldGFpbHMoYWZmaW5pdHlBUElLZXksIHBlcnNvbl9pZClcblxuICAgICAgICAgICAgICAgICAgICBsaXN0X2VudHJ5X2lkID0gYXdhaXQgaXNfcGVyc29uX2luX3ZlbnR1cmVfbmV0d29yayhhZmZpbml0eUFQSUtleSwgcGVyc29uX2RldGFpbHMsIHZlbnR1cmVfbmV0d29ya19saXN0KSAgXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIG5vdGUgdGFrZXIgYXMgb3duZXIgb2YgdGhlIGNvbm5lY3Rpb24gb24gQWZmaW5pdHlcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWRkX2ZpZWxkX3ZhbHVlKGFmZmluaXR5QVBJS2V5LCBjb25uZWN0aW9uX293bmVyX2ZpZWxkLCBwZXJzb25faWQsIG93bmVyX3ZhbHVlLCBsaXN0X2VudHJ5X2lkKSAgICAgXG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBcblxuXG5cbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgYWRkX25vdGVzX3RvX3BlcnNvbihhZmZpbml0eUFQSUtleSwgcGVyc29uX2lkLCBub3RlKVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFZDOiAke3BlcnNvbl9uYW1lfSB3YXMgdXBkYXRlZCBvbiBBZmZpbml0eWApXG4gICAgICAgICAgICAgICAgICAgIGZpbGVfY29udGVudCA9IGZpbGVfY29udGVudC5yZXBsYWNlKC8jQWZmaW5pdHkvZywgJycpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShpdGVtLCBmaWxlX2NvbnRlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFZDOiAke3BlcnNvbl9uYW1lfSB3YXMgRk9VTkQgYnV0IE5PVCB1cGRhdGVkIG9uIEFmZmluaXR5YClcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBWQzogJHtwZXJzb25fbmFtZX0gd2FzIE5PVCBGT1VORCBvbiBBZmZpbml0eWApXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgXG5cbiAgICAgICAgfVxuXG4gICAgfVxuICAgIHN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgcmVhZHknKVxuICAgIHN0YXR1cy5zZXRBdHRyKCd0aXRsZScsICdDb3BpbG90IGlzIHJlYWR5JylcblxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRfbWVldGluZ19pZChtZWV0aW5nX25hbWU6IHN0cmluZyl7XG5cbiAgICBsZXQgbWVldGluZ3MgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZmlyZWZsaWVzLmFpL2dyYXBocWwnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7ZmlyZWZsaWVzX2FwaV9rZXl9YCAgLy9Zb3VyIGF1dGhvcml6YXRpb24gdG9rZW5cbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHF1ZXJ5OiBgXG4gICAgICAgICAgICBxdWVyeSB7XG4gICAgICAgICAgICAgICAgdHJhbnNjcmlwdHMge1xuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICB0aXRsZVxuICAgICAgICAgICAgICAgICAgICBmaXJlZmxpZXNfdXNlcnNcbiAgICAgICAgICAgICAgICAgICAgcGFydGljaXBhbnRzXG4gICAgICAgICAgICAgICAgICAgIGRhdGVcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNjcmlwdF91cmxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb25cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGBcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtyZXR1cm4gcmVzdWx0Lmpzb24oKX0pLnRoZW4ocmVzdWx0ID0+IHtyZXR1cm4gcmVzdWx0LmRhdGF9KTtcblxuICAgIC8vY29uc29sZS5sb2cobWVldGluZ3MpXG4gICAgbGV0IG1lZXRpbmdzX2xpc3QgPSBtZWV0aW5nc1sndHJhbnNjcmlwdHMnXVxuICAgIGxldCBtZWV0aW5nX2lkID0gJydcblxuICAgIGZvciAobGV0IG1lZXRpbmcgb2YgbWVldGluZ3NfbGlzdCl7XG4gICAgICAgIGlmIChtZWV0aW5nWyd0aXRsZSddID09IG1lZXRpbmdfbmFtZSl7XG4gICAgICAgICAgICBtZWV0aW5nX2lkID0gbWVldGluZ1snaWQnXVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWVldGluZ19pZFxuXG5cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldF9tZWV0aW5nX3RyYW5zY3JpcHRfYnlfaWQoaWQ6IHN0cmluZyl7XG4gICAgbGV0IHRyYW5zY3JpcHQgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZmlyZWZsaWVzLmFpL2dyYXBocWwnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgODUzNDYyY2UtZWUzMi00YWVmLWI4NDAtZWE5ODgzY2MzOGIzJyAvL1lvdXIgYXV0aG9yaXphdGlvbiB0b2tlblxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcXVlcnk6IGBcbiAgICAgICAgICAgICAgcXVlcnkge1xuICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQoaWQ6IFwiJHtpZH1cIil7IHRpdGxlIGRhdGUgc2VudGVuY2VzIHt0ZXh0IHNwZWFrZXJfbmFtZX0gfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgYFxuICAgICAgICB9KSxcbiAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtyZXR1cm4gcmVzdWx0Lmpzb24oKX0pLnRoZW4ocmVzdWx0ID0+IHtyZXR1cm4gcmVzdWx0LmRhdGF9KTtcblxuICAgICAgbGV0IGN1cnJlbnRfc2VudGVuY2UgPSAnJ1xuICAgICAgbGV0IHVzZWZ1bF9wYXJhZ3JhcGhzID0gW11cbiAgICAgIGxldCBjdXJyZW50X3NwZWFrZXIgPSB0cmFuc2NyaXB0Wyd0cmFuc2NyaXB0J11bJ3NlbnRlbmNlcyddWzBdWydzcGVha2VyX25hbWUnXVxuXG4gICAgICBmb3IgKGxldCBzZW50ZW5jZSBvZiB0cmFuc2NyaXB0Wyd0cmFuc2NyaXB0J11bJ3NlbnRlbmNlcyddKXtcblxuICBcbiAgICAgICAgaWYgKHNlbnRlbmNlWydzcGVha2VyX25hbWUnXSA9PSBjdXJyZW50X3NwZWFrZXIpe1xuICAgICAgICAgICAgY3VycmVudF9zZW50ZW5jZSArPSBzZW50ZW5jZVsndGV4dCddXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmIChjdXJyZW50X3NlbnRlbmNlLmxlbmd0aCAhPSAwKXtcbiAgICAgICAgICAgICAgICBpZiAoaW52ZXN0b3JfbmFtZXMuaW5jbHVkZXMoY3VycmVudF9zcGVha2VyKSl7Y3VycmVudF9zcGVha2VyICs9ICcgKEludmVzdG9yKSc7IGNvbnNvbGUubG9nKGN1cnJlbnRfc3BlYWtlcil9XG4gICAgICAgICAgICAgICAgZWxzZSB7Y3VycmVudF9zcGVha2VyICs9ICcgKEZvdW5kZXIpJ31cbiAgICAgICAgICAgICAgICBjdXJyZW50X3NlbnRlbmNlID0gY3VycmVudF9zcGVha2VyICsgJzogJyArIGN1cnJlbnRfc2VudGVuY2UgKyAnXFxuJ1xuICAgICAgICAgICAgICAgIHVzZWZ1bF9wYXJhZ3JhcGhzLnB1c2goY3VycmVudF9zZW50ZW5jZSlcbiAgICAgICAgICAgICAgICBjdXJyZW50X3NlbnRlbmNlID0gc2VudGVuY2VbJ3RleHQnXVxuICAgICAgICAgICAgICAgIGN1cnJlbnRfc3BlYWtlciA9IHNlbnRlbmNlWydzcGVha2VyX25hbWUnXVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgICBpZihjdXJyZW50X3NlbnRlbmNlLmxlbmd0aCAhPSAwKXtcbiAgICAgICAgdXNlZnVsX3BhcmFncmFwaHMucHVzaChjdXJyZW50X3NlbnRlbmNlKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXNlZnVsX3BhcmFncmFwaHNcblxuXG59XG5cblxuZnVuY3Rpb24gY291bnRXb3JkcyhzdHI6IHN0cmluZykge1xuICAgIC8vIHNwbGl0IHRoZSBzdHJpbmcgYnkgd29yZCBib3VuZGFyaWVzXG4gICAgbGV0IHdvcmRzID0gc3RyLm1hdGNoKC9cXGJbYS16XFxkXStcXGIvZ2kpO1xuICAgIC8vIHJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheSBvciB6ZXJvIGlmIG5vIG1hdGNoXG4gICAgcmV0dXJuIHdvcmRzID8gd29yZHMubGVuZ3RoIDogMDtcbiAgfVxuXG5hc3luYyBmdW5jdGlvbiBzdW1tYXJpemVfcGFyYWdyYXBoKHBhcmFncmFwaDogc3RyaW5nKXtcbiAgICBjb25zdCBjb25maWd1cmF0aW9uID0gbmV3IENvbmZpZ3VyYXRpb24oe2FwaUtleTogb3BlbmFpQVBJS2V5fSlcbiAgICBkZWxldGUgY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucy5oZWFkZXJzWydVc2VyLUFnZW50J107XG4gICAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSUFwaShjb25maWd1cmF0aW9uKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNyZWF0ZUNoYXRDb21wbGV0aW9uKHtcbiAgICAgICAgbW9kZWw6IFwiZ3B0LTQtMTEwNi1wcmV2aWV3XCIsIC8vZ3B0LTQgZ3B0LTMuNS10dXJib1xuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwicm9sZVwiOiBcInN5c3RlbVwiLFxuICAgICAgICAgICAgXCJjb250ZW50XCI6IFwiWW91IGFyZSBhIGhlbHBmdWwgbm90ZS10YWtpbmcgYXNzaXN0YW50IGZvciBhIHZlbnR1cmUgY2FwaXRhbCBpbnZlc3Rvci4gWW91IHdpbGwgYmUgZ2l2ZW4gYSBwYXJ0IG9mIGEgdHJhbnNjcmlwdCBmb3IgdGhlIGNhbGwgYmV0d2VlbiB0aGUgaW52ZXN0b3IgYW5kIHRoZSBzdGFydHVwIGZvdW5kZXIuIFlvdXIgdGFzayBpcyB0byBleHRyYWN0IGluZm9ybWF0aW9uIGNvdmVyaW5nIHRoZSBmb2xsb3dpbmcgYXNwZWN0czpcXG4tICoqVGVhbSoqOjxXaG8gaXMgdGhlIHRlYW0gYmVoaW5kIHRoZSBzdGFydHVwLiBBbnN3ZXIgaW4gYnVsbGV0IHBvaW50cyE+XFxuLSAqKlByb2JsZW0qKjo8V2hhdCBpcyB0aGUgcHJvYmxlbSB0aGUgc3RhcnR1cCBpcyBzb2x2aW5nIGFuZCBmb3Igd2hvbS4gQW5zd2VyIGluIGJ1bGxldCBwb2ludHMhPlxcbi0gKipQcm9kdWN0Kio6PEhvdyBkb2VzIHRoZWlyIHByb2R1Y3Qgc29sdmUgdGhpcyBwcm9ibGVtLiBBbnN3ZXIgaW4gYnVsbGV0IHBvaW50cyE+XFxuLSAqKlRyYWN0aW9uKio6PEhvdyBkb2VzIHRoZWlyIGN1c3RvbWVyIHRyYWN0aW9uIGxvb2sgbGlrZS4gQW5zd2VyIGluIGJ1bGxldCBwb2ludHMhPlxcbi0gKipDb21wZXRpdGlvbioqOjxIb3cgZG9lcyB0aGUgY29tcGV0aXRpdmUgbGFuZHNjYXBlIGxvb2sgbGlrZS4gQW5zd2VyIGluIGJ1bGxldCBwb2ludHMhPlxcbi0gKipSb3VuZCBJbmZvKio6PEhvdyBtdWNoIG1vbmV5IGFyZSB0aGV5IHJhaXNpbmcgZnJvbSBpbnZlc3RvcnMgY3VycmVudGx5PyBIb3cgbXVjaCBoYXZlIHRoZXkgcmFpc2VkIGJlZm9yZT8gQW5zd2VyIGluIGJ1bGxldCBwb2ludHMhPlxcbi0gKipPdGhlcioqOiA8T3RoZXIgaW1wb3J0YW50IHBvaW50cyBhYm91dCB0aGUgZm91bmRlcnMgT1IgdGhlIHN0YXJ0dXAgdGhhdCBkbyBub3QgZml0IGluIHRoZSBhYm92ZSBzZWN0aW9ucy4gQW5zd2VyIGluIGJ1bGxldCBwb2ludHMhPlxcblxcbkZvciBldmVyeSBzZWN0aW9uLCBhbHdheXMgZ2l2ZSB5b3VyIGFuc3dlcnMgaW4gYnVsbGV0IHBvaW50cyEgT3RoZXJ3aXNlLCBzYXkgXFxcIk5vIFJlbGV2YW50IEluZm9ybWF0aW9uXFxcIlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAgICAgICAgICBcImNvbnRlbnRcIjogYCR7cGFyYWdyYXBofWAgLy9Zb3UgYXJlIGEgaGVscGZ1bCBub3RlLXRha2luZyBhc3Npc3RhbnQgZm9yIGEgdmVudHVyZSBjYXBpdGFsIGludmVzdG9yLiBZb3Ugd2lsbCBiZSBnaXZlbiBhIHBhcnQgb2YgYSB0cmFuc2NyaXB0IGZvciB0aGUgY2FsbCBiZXR3ZWVuIHRoZSBpbnZlc3RvciBhbmQgdGhlIHN0YXJ0dXAgZm91bmRlci4gWW91IHNob3VsZCBmb2N1cyBvbmx5IG9uIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzdGFydHVwLiBJZ25vcmUgYW55IGluZm9ybWF0aW9uIGFib3V0IHRoZSBpbnZlc3RvciB0aGVtc2VsdmVzIG9yIHRoZSB2ZW50dXJlIGNhcGl0YWwgZmlybSB0aGV5IHJlcHJlc2VudC4gWW91ciB0YXNrIGlzIHRvIGV4dHJhY3QgaW5mb3JtYXRpb24gZnJvbSB0aGUgdHJhbnNjcmlwdCBjb3ZlcmluZyB0aGUgZm9sbG93aW5nIHNlY3Rpb25zOlxcbi0gVGVhbTogPFdobyBpcyB0aGUgdGVhbSBiZWhpbmQgdGhlIHN0YXJ0dXA+XFxuLSBQcm9ibGVtOiA8V2hhdCBpcyB0aGUgcHJvYmxlbSB0aGUgc3RhcnR1cCBpcyBzb2x2aW5nPlxcbi0gUHJvZHVjdDogPEhvdyBkb2VzIHRoZWlyIHByb2R1Y3Qgc29sdmUgdGhpcyBwcm9ibGVtPlxcbi0gVHJhY3Rpb246IDxIb3cgZG9lcyB0aGVpciBjdXN0b21lciB0cmFjdGlvbiBsb29rIGxpa2U+XFxuLSBDb21wZXRpdGlvbjogPEhvdyBkb2VzIHRoZSBjb21wZXRpdGl2ZSBsYW5kc2NhcGUgbG9vayBsaWtlPlxcbi0gUm91bmQgSW5mbzogPEhvdyBtdWNoIG1vbmV5IGFyZSB0aGV5IHJhaXNpbmcgZnJvbSBpbnZlc3RvcnMgY3VycmVudGx5PyBIb3cgbXVjaCBoYXZlIHRoZXkgcmFpc2VkIGJlZm9yZT8+XFxuLSBPdGhlcjogPE90aGVyIGltcG9ydGFudCBwb2ludHMgYWJvdXQgdGhlIGZvdW5kZXJzIE9SIHRoZSBzdGFydHVwIHRoYXQgZG8gbm90IGZpdCBpbiB0aGUgYWJvdmUgc2VjdGlvbnM+XFxuXFxuRm9yIGV2ZXJ5IHNlY3Rpb24gYWx3YXlzIGdpdmUgeW91ciBhbnN3ZXJzIGluIGJ1bGxldCBwb2ludHMhIE90aGVyd2lzZSBzYXkgXFxcIk5vIFJlbGV2YW50IEluZm9ybWF0aW9uXFxcIiBpbmZyb250IG9mIHRoZSBzZWN0aW9uJ3MgbmFtZS5cXG5cXG5UcmFuc2NyaXB0OlxcblxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAsXG4gICAgICAgIG1heF90b2tlbnM6IDEwMjQsXG4gICAgICAgIHRvcF9wOiAxLFxuICAgICAgICBmcmVxdWVuY3lfcGVuYWx0eTogMCxcbiAgICAgICAgcHJlc2VuY2VfcGVuYWx0eTogMCxcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnRcbn1cblxuYXN5bmMgZnVuY3Rpb24gc3VtbWFyaXplX2FsbF9wYXJhZ3JhcGhzX3RvZ2V0aGVyKHBhcmFncmFwaHM6IGFueSBbXSl7XG4gICAgbGV0IGlucHV0X3RleHQgPSAnJ1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYWdyYXBocy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGlucHV0X3RleHQgKz0gYFN1bW1hcnkgIyR7aSsxfTpcXG5gXG4gICAgICAgIGlucHV0X3RleHQgKz0gcGFyYWdyYXBoc1tpXSArICdcXG5cXG4nXG4gICAgfVxuICAgIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbih7YXBpS2V5OiBvcGVuYWlBUElLZXl9KVxuICAgIGRlbGV0ZSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zLmhlYWRlcnNbJ1VzZXItQWdlbnQnXTtcbiAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJQXBpKGNvbmZpZ3VyYXRpb24pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY3JlYXRlQ2hhdENvbXBsZXRpb24oe1xuICAgICAgICBtb2RlbDogXCJncHQtNC0xMTA2LXByZXZpZXdcIiwgLy8gZ3B0LTMuNS10dXJib1xuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwicm9sZVwiOiBcInN5c3RlbVwiLFxuICAgICAgICAgICAgICAgIFwiY29udGVudFwiOiBcIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4gWW91ciB0YXNrIGlzIHRvIGV4cGFuZCB0aGUgZmlyc3Qgc3VtbWFyeSB5b3UgYXJlIGdpdmVuIGJ5IHRoZSBpbmZvcm1hdGlvbiBpbiBhbGwgdGhlIHN1YnNlcXVlbnQgc3VtbWFyaWVzLiBUaGUgZmluYWwgc3VtbWFyeSB5b3UgcHJvdmlkZSBzaG91bGQgY292ZXIgQUxMIGZvbGxvd2luZyBzZWN0aW9uczpcXG4tICoqVGVhbSoqOiA8V2hvIGlzIHRoZSB0ZWFtIGJlaGluZCB0aGUgc3RhcnR1cD5cXG4tICoqUHJvYmxlbSoqOiA8V2hhdCBpcyB0aGUgcHJvYmxlbSB0aGUgc3RhcnR1cCBpcyBzb2x2aW5nIGFuZCBmb3Igd2hvbT5cXG4tICoqUHJvZHVjdCoqOiA8SG93IGRvZXMgdGhlaXIgcHJvZHVjdCBzb2x2ZSB0aGlzIHByb2JsZW0+XFxuLSAqKlRyYWN0aW9uKio6IDxIb3cgZG9lcyB0aGVpciBjdXN0b21lciB0cmFjdGlvbiBsb29rIGxpa2U+XFxuLSAqKkNvbXBldGl0aW9uKio6IDxIb3cgZG9lcyB0aGUgY29tcGV0aXRpdmUgbGFuZHNjYXBlIGxvb2sgbGlrZT5cXG4tICoqUm91bmQgSW5mbyoqOiA8SG93IG11Y2ggbW9uZXkgYXJlIHRoZXkgcmFpc2luZyBmcm9tIGludmVzdG9ycyBjdXJyZW50bHk/IEhvdyBtdWNoIGhhdmUgdGhleSByYWlzZWQgYmVmb3JlPz5cXG4tICoqT3RoZXIqKjogPE90aGVyIGltcG9ydGFudCBwb2ludHMgYWJvdXQgdGhlIGZvdW5kZXJzIE9SIHRoZSBzdGFydHVwIHRoYXQgZG8gbm90IGZpdCBpbiB0aGUgYWJvdmUgc2VjdGlvbnM+XFxuXFxuRG8gbm90IGxlYXZlIGFueSBlbXB0eSBzZWN0aW9ucy4gRm9yIGV2ZXJ5IHNlY3Rpb24gYWx3YXlzIGdpdmUgeW91ciBhbnN3ZXJzIGluIGJ1bGxldCBwb2ludHMhIE90aGVyd2lzZSBzYXkgXFxcIk5vIFJlbGV2YW50IEluZm9ybWF0aW9uXFxcIiBpbmZyb250IG9mIHRoZSBzZWN0aW9uJ3MgbmFtZS5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgXCJjb250ZW50XCI6IGAke2lucHV0X3RleHR9YFxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMCxcbiAgICAgICAgbWF4X3Rva2VuczogMjA0OCxcbiAgICAgICAgdG9wX3A6IDEsXG4gICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiAwLFxuICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiAwLFxuICAgIH0pOyAgXG5cbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudFxuICAgIFxuICAgIFxuXG59XG5cblxuXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVkNDb3BpbG90UGx1Z2luIGV4dGVuZHMgUGx1Z2lue1xuICAgIHNldHRpbmdzOiBCdXRsZXJTZXR0aW5ncztcbiAgICBzdGF0dXM6IEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBWQ0NvcGlsb3RTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuXG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtpZDogJ3N1bW1hcml6ZS1zdGFydHVwLWNvbW1hbmQnLCBuYW1lOiAnU3VtbWFyaXplIFRoaXMgU3RhcnR1cCcsIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yLCB2aWV3KSA9PiBzdW1tYXJpemVfc2VsZWN0ZWRfc3RhcnR1cF90ZXh0KGVkaXRvciwgdmlldywgdGhpcy5zdGF0dXMpfSlcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtpZDogJ2FmZmluaXR5LXN0YXJ0dXAnLCBuYW1lOiAnUHVzaCBTdGFydHVwcyB0byBBZmZpbml0eScsIGNhbGxiYWNrOiAoKSA9PiBwdXNoX3N0YXJ0dXBzX3RvX2FmZmluaXR5KHRoaXMuc3RhdHVzKX0pXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7aWQ6ICdzdW1tYXJpemUtYWxsLXZjLWNvbW1hbmQnLCBuYW1lOiAnU3VtbWFyaXplIEFsbCBWQyBOb3RlcycsIGNhbGxiYWNrOiAoKSA9PiBzdW1tYXJpemVfYWxsX3ZjKHRoaXMuc3RhdHVzKX0pXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7aWQ6ICdhZmZpbml0eS12YycsIG5hbWU6ICdQdXNoIFZDcyB0byBBZmZpbml0eScsIGNhbGxiYWNrOiAoKSA9PiBwdXNoX3Zjc190b19hZmZpbml0eSh0aGlzLnN0YXR1cyl9KVxuXG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3RhcnR1cC1kZWZlbnNpYmlsaXR5JyxcbiAgICAgICAgICAgIG5hbWU6ICdFdmFsdWF0ZSBTdGFydHVwIERlZmVuc2liaWxpdHknLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBpbnB1dE1vZGFsID0gbmV3IFRleHRJbnB1dE1vZGFsKHRoaXMuYXBwLCAnZGVmZW5zaWJpbGl0eScsKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBzdWJtaXR0ZWQgdGV4dCBoZXJlXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Ym1pdHRlZCB0ZXh0OicsIGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmVuc2liaWxpdHlfYW5hbHlzaXMoaW5wdXQsIGVkaXRvcilcblxuXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpbnB1dE1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzdGFydHVwLXdvcmtmbG93JyxcbiAgICAgICAgICAgIG5hbWU6ICdTdGFydHVwIEd1aWRhbmNlIFdvcmtmbG93JyxcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaW5wdXRNb2RhbCA9IG5ldyBUZXh0SW5wdXRNb2RhbCh0aGlzLmFwcCwgJ2V2YWx1YXRlJywoaW5wdXQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgdGhlIHN1Ym1pdHRlZCB0ZXh0IGhlcmVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VibWl0dGVkIHRleHQ6JywgaW5wdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ3VpZGFuY2Vfd29ya2Zsb3coaW5wdXQsIGVkaXRvcilcblxuXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpbnB1dE1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cblxuICAgICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21hcmtldC1yZXNlYXJjaC1jb21tYW5kJyxcbiAgICAgICAgICAgIG5hbWU6ICdNYXJrZXQgUmVzZWFyY2gnLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBpbnB1dE1vZGFsID0gbmV3IFRleHRJbnB1dE1vZGFsKHRoaXMuYXBwLCAnbWFya2V0LXJlc2VhcmNoJywoaW5wdXQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgdGhlIHN1Ym1pdHRlZCB0ZXh0IGhlcmVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VibWl0dGVkIHRleHQ6JywgaW5wdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya2V0X3Jlc2VhcmNoKGlucHV0LCBlZGl0b3IpO1xuXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpbnB1dE1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICd1cmwtcmVzZWFyY2gtY29tbWFuZCcsXG4gICAgICAgICAgICBuYW1lOiAnVXJsIFJlc2VhcmNoJyxcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaW5wdXRNb2RhbCA9IG5ldyBUZXh0SW5wdXRNb2RhbCh0aGlzLmFwcCwgJ1VybCBSZXNlYXJjaCcsKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBzdWJtaXR0ZWQgdGV4dCBoZXJlXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Ym1pdHRlZCB0ZXh0OicsIGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVybF9yZXNlYXJjaChpbnB1dCwgZWRpdG9yKTtcblxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgaW5wdXRNb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnY29tcGV0aXRpb24tcmVzZWFyY2gtY29tbWFuZCcsXG4gICAgICAgICAgICBuYW1lOiAnQ29tcGV0aXRpb24gUmVzZWFyY2gnLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBpbnB1dE1vZGFsID0gbmV3IFRleHRJbnB1dE1vZGFsKHRoaXMuYXBwLCAnRGVzY3JpYmUgdGhlIHN0YXJ0dXAgb3IgdGhlIGluZHVzdHJ5IGZvciBjb21wZXRpdGlvbiByZXNlYXJjaCcsKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBzdWJtaXR0ZWQgdGV4dCBoZXJlXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Ym1pdHRlZCB0ZXh0OicsIGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBldGl0aW9uX3Jlc2VhcmNoKGlucHV0LCBlZGl0b3IpO1xuXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpbnB1dE1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvL3RvZG8gbWFrZSB0aGlzIG1vcmUgZ2VuZXJhbGl6YWJsZSwgeW91IG5lZWQgb25lIGlucHV0IGZvciBzZWFyY2ggcXVlcnksIGFub3RoZXIgZm9yIHdlYnNpdGUgdG8gYmUgdXNlZCwgYW5vdGhlciBmb3IgdGhlIHRhc2sgeW91IHdhbnQuXG4gICAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnY3VzdG9tLXJlc2VhcmNoJyxcbiAgICAgICAgICAgIG5hbWU6ICdDdXN0b20gUmVzZWFyY2gnLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBpbnB1dE1vZGFsID0gbmV3IE11bHRpcGxlVGV4dElucHV0TW9kYWwodGhpcy5hcHAsICcnLChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgc3VibWl0dGVkIHRleHQgaGVyZVxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBpbnB1dC5zcGxpdCgnLCAnKVxuICAgICAgICAgICAgICAgIGxldCB3ZWJzaXRlID0gcmVzdWx0WzBdXG4gICAgICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gcmVzdWx0WzFdXG4gICAgICAgICAgICAgICAgbGV0IHRhc2sgPSByZXN1bHRbMl1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VibWl0dGVkIHRleHQ6JywgaW5wdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3BlY2lmaWNfd2ViX3Jlc2VhcmNoKHRhc2ssIHdlYnNpdGUsIHF1ZXJ5LCBlZGl0b3IpO1xuXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpbnB1dE1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdmaXJlZmxpZXMtc3VtbWFyeScsXG4gICAgICAgICAgICBuYW1lOiAnRmlyZWZsaWVzIENhbGwgU3VtbWFyeScsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGlucHV0TW9kYWwgPSBuZXcgVGV4dElucHV0TW9kYWwodGhpcy5hcHAsICdmaXJlZmxpZXMtc3VtbWFyeScsKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBzdWJtaXR0ZWQgdGV4dCBoZXJlXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Ym1pdHRlZCB0ZXh0OicsIGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcmVmbGllc19zdW1tYXJ5KGlucHV0LCBlZGl0b3IpO1xuXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpbnB1dE1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwOiBWQyBDb3BpbG90IGxvYWRpbmcuLi4uJylcbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnVkMgQ29waWxvdCBpcyBsb2FkaW5nLi4uJylcblxuXG4gICAgICAgIHRoaXMuc3RhdHVzLnNldFRleHQoJ1x1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MDogVkMgQ29waWxvdCByZWFkeScpXG4gICAgICAgIHRoaXMuc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ1ZDIENvcGlsb3QgaXMgcmVhZHknKVxuICAgIFxuICAgIFxuICAgIFxuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgbGVmdCcpXG4gICAgICAgIHRoaXMuc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ1ZDIENvcGlsb3Qgc2F5cyBcdUQ4M0RcdURDNEInKVxuXG4gICAgICAgIFxuXG4gICAgfVxuXG5cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpe1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICAgICAgb3BlbmFpQVBJS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuQUlLZXlcbiAgICAgICAgYWZmaW5pdHlBUElLZXkgPSB0aGlzLnNldHRpbmdzLmFmZmluaXR5S2V5XG4gICAgICAgIG93bmVyX3ZhbHVlID0gdGhpcy5zZXR0aW5ncy5vd25lcl9wZXJzb25fdmFsdWVcbiAgICAgICAgY29ubmVjdGlvbl9vd25lcl9maWVsZCA9IHRoaXMuc2V0dGluZ3MuY29ubmVjdGlvbl9vd25lcl9maWVsZF9pZFxuICAgICAgICB2ZW50dXJlX25ldHdvcmtfbGlzdCA9IHRoaXMuc2V0dGluZ3MudmVudHVyZV9uZXR3b3JrX2xpc3RfaWRcbiAgICAgICAgeW91X2FwaV9rZXkgPSB0aGlzLnNldHRpbmdzLnlvdV9hcGlcbiAgICAgICAgZmlyZWZsaWVzX2FwaV9rZXkgPSB0aGlzLnNldHRpbmdzLmZpcmVmbGllc19hcGlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0dGluZ3MudGVhbV9uYW1lcy5zcGxpdCgnLCcpLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICBpbnZlc3Rvcl9uYW1lcy5wdXNoKGVsZW1lbnQudHJpbSgpKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCl7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncylcbiAgICAgICAgb3BlbmFpQVBJS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuQUlLZXlcbiAgICAgICAgYWZmaW5pdHlBUElLZXkgPSB0aGlzLnNldHRpbmdzLmFmZmluaXR5S2V5XG4gICAgICAgIG93bmVyX3ZhbHVlID0gdGhpcy5zZXR0aW5ncy5vd25lcl9wZXJzb25fdmFsdWVcbiAgICAgICAgY29ubmVjdGlvbl9vd25lcl9maWVsZCA9IHRoaXMuc2V0dGluZ3MuY29ubmVjdGlvbl9vd25lcl9maWVsZF9pZFxuICAgICAgICB2ZW50dXJlX25ldHdvcmtfbGlzdCA9IHRoaXMuc2V0dGluZ3MudmVudHVyZV9uZXR3b3JrX2xpc3RfaWRcbiAgICAgICAgeW91X2FwaV9rZXkgPSB0aGlzLnNldHRpbmdzLnlvdV9hcGlcbiAgICAgICAgZmlyZWZsaWVzX2FwaV9rZXkgPSB0aGlzLnNldHRpbmdzLmZpcmVmbGllc19hcGlcbiAgICAgICAgdGhpcy5zZXR0aW5ncy50ZWFtX25hbWVzLnNwbGl0KCcsJykuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGludmVzdG9yX25hbWVzLnB1c2goZWxlbWVudC50cmltKCkpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgYXN5bmMgdXJsX3Jlc2VhcmNoKHVybDogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcil7XG4gICAgICAgIHRoaXMuc3RhdHVzLnNldFRleHQoYFx1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MCBcdUQ4M0RcdUREMEU6IFZDIENvcGlsb3QgcmVzZWFyY2hpbmcgJHt1cmx9Li4uYClcbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyByZXNlYXJjaGluZyB0aGUgdXJsJylcblxuICAgICAgICBsZXQgZmluYWxfdGV4dCA9ICcnXG4gICAgICAgIFxuICAgICAgICB0cnl7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vdXJsLXJlc2VhcmNoZXItY29udGFpbmVyLXhtNWxtZG5zeHEtZXkuYS5ydW4uYXBwXCIsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwicG9zdFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIn0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgb3BlbmFpX2tleTogb3BlbmFpQVBJS2V5XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAgICAgZmluYWxfdGV4dCA9IGF3YWl0IHJlcy50ZXh0KClcbiAgICAgICAgICAgIGZpbmFsX3RleHQgPSBgIyMgJHt1cmx9IFJlc2VhcmNoXFxuYCArIGZpbmFsX3RleHRcbiAgICAgICAgICAgIGZpbmFsX3RleHQgPSBmaW5hbF90ZXh0LnJlcGxhY2UoJ1Byb2JsZW0gdG8gYmUgc29sdmVkOicsICcjIyMjIFByb2JsZW0gdG8gYmUgc29sdmVkJylcbiAgICAgICAgICAgIGZpbmFsX3RleHQgPSBmaW5hbF90ZXh0LnJlcGxhY2UoXCJQcm9kdWN0OlwiLCBcIiMjIyMgUHJvZHVjdFwiKVxuICAgICAgICAgICAgZmluYWxfdGV4dCA9IGZpbmFsX3RleHQucmVwbGFjZSgnRmVhdHVyZXM6JywgJyMjIyMgRmVhdHVyZXMnKVxuICAgICAgICAgICAgZmluYWxfdGV4dCA9IGZpbmFsX3RleHQucmVwbGFjZSgnQnVzaW5lc3MgTW9kZWw6JywgJyMjIyMgQnVzaW5lc3MgTW9kZWwnKVxuICAgICAgICAgICAgZmluYWxfdGV4dCA9IGZpbmFsX3RleHQucmVwbGFjZSgnQ29tcGV0aXRpb246JywgJyMjIyMgQ29tcGV0aXRpb24nKVxuICAgICAgICAgICAgZmluYWxfdGV4dCA9IGZpbmFsX3RleHQucmVwbGFjZSgnVmlzaW9uOicsICcjIyMjIFZpc2lvbicpXG4gICAgICAgICAgICBmaW5hbF90ZXh0ID0gZmluYWxfdGV4dC5yZXBsYWNlKCdFeHRyYXM6JywgJyMjIyMgRXh0cmFzJylcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igd2hlbiBkb2luZyB1cmwgcmVzZWFyY2g6ICR7ZXJyb3J9YClcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHdoZW4gZG9pbmcgdXJsIHJlc2VhcmNoYClcblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGZpbmFsX3RleHQsIGVkaXRvci5nZXRDdXJzb3IoKSk7XG5cbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwOiBWQyBDb3BpbG90IHJlYWR5JylcbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyByZWFkeScpXG5cbiAgICB9XG5cbiAgICBhc3luYyBmaXJlZmxpZXNfc3VtbWFyeShtZWV0aW5nX25hbWU6IHN0cmluZywgZWRpdG9yOiBFZGl0b3Ipe1xuICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KGBcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODAgXHVEODNEXHVERDBFOiBWQyBDb3BpbG90IHJlYWRpbmcgdGhlIHRyYW5zY3JpcHQgb2YgJHttZWV0aW5nX25hbWV9Li4uYClcbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyByZWFkaW5nIHRoZSB0cmFuc2NyaXB0JylcblxuICAgICAgICBsZXQgZmluYWxfc3VtbWFyeSA9ICcnXG5cbiAgICAgICAgbGV0IGN1cnNvcl9wb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKVxuXG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGxldCBpZCA9IGF3YWl0IGdldF9tZWV0aW5nX2lkKG1lZXRpbmdfbmFtZSk7XG4gICAgICAgICAgICBsZXQgcGFyYWdyYXBocyA9IGF3YWl0IGdldF9tZWV0aW5nX3RyYW5zY3JpcHRfYnlfaWQoaWQpO1xuICAgICAgICAgICAgbGV0IHN1bW1hcmllcyA9IFtdXG5cbiAgICAgICAgICAgIGxldCBsb25nX3BhcmFncmFwaCA9ICcnXG4gICAgICAgICAgICBsZXQgZXh0ZW5kZWRfcGFyYWdyYXBocyA9IFtdXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IHBhcmFncmFwaCBvZiBwYXJhZ3JhcGhzKXtcbiAgICAgICAgICAgICAgICBsZXQgbnVtYmVyX29mX3dvcmRzID0gY291bnRXb3JkcyhwYXJhZ3JhcGgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobnVtYmVyX29mX3dvcmRzID49IDEyKXtcbiAgICAgICAgICAgICAgICAgICAgLy9JbmNsdWRlIG9ubHkgc2VudGVuY2VzIHRoYXQgYXJlIGxvbmcgZW5vdWdoIHRvIGJlIHJlbGV2YW50XG4gICAgICAgICAgICAgICAgICAgIGlmIChudW1iZXJfb2Zfd29yZHMgKyBjb3VudFdvcmRzKGxvbmdfcGFyYWdyYXBoKSA8PSAyNTAwKXsgXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2tlZXAgYSBwYXJhZ3JhcGggYmVsb3cgMTUwMCB3b3JkcyAoMjAwMCB0b2tlbnMpIGZvciB0aGUgY29udGV4dCB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdfcGFyYWdyYXBoICs9IHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRlZF9wYXJhZ3JhcGhzLnB1c2gobG9uZ19wYXJhZ3JhcGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb25nX3BhcmFncmFwaCA9IHBhcmFncmFwaFxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobG9uZ19wYXJhZ3JhcGgubGVuZ3RoICE9IDApe1xuICAgICAgICAgICAgICAgIGV4dGVuZGVkX3BhcmFncmFwaHMucHVzaChsb25nX3BhcmFncmFwaClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdHVzLnNldFRleHQoYFx1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MCBcdUQ4M0RcdUREMEU6IFZDIENvcGlsb3Qgc3VtbWFyaXppbmcgc2VjdGlvbnMgb2YgdGhlIHRyYW5zY3JpcHQgb2YgJHttZWV0aW5nX25hbWV9Li4uYClcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ0NvcGlsb3QgaXMgc3VtbWFyaXppbmcgc2VjdGlvbnMgb2YgdGhlIHRyYW5zY3JpcHQnKVxuICAgICAgICAgICAgZm9yIChsZXQgcGFyYWdyYXBoIG9mIGV4dGVuZGVkX3BhcmFncmFwaHMpeyAgICBcbiAgIFxuICAgICAgICAgICAgICAgIGxldCBzdW1tYXJ5ID0gYXdhaXQgc3VtbWFyaXplX3BhcmFncmFwaChwYXJhZ3JhcGgpXG4gICAgICAgICAgICAgICAgc3VtbWFyaWVzLnB1c2goc3VtbWFyeSlcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHN1bW1hcnkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KGBcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODAgXHVEODNEXHVERDBFOiBWQyBDb3BpbG90IHN1bW1hcml6aW5nIHRoZSBmdWxsIHRyYW5zY3JpcHQgb2YgJHttZWV0aW5nX25hbWV9Li4uYClcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ0NvcGlsb3QgaXMgc3VtbWFyaXppbmcgdGhlIGZ1bGwgdHJhbnNjcmlwdCcpXG5cbiAgICAgICAgICAgIGZpbmFsX3N1bW1hcnkgPSBhd2FpdCBzdW1tYXJpemVfYWxsX3BhcmFncmFwaHNfdG9nZXRoZXIoc3VtbWFyaWVzKVxuICAgICAgICAgICAgZmluYWxfc3VtbWFyeSA9IGZpbmFsX3N1bW1hcnkucmVwbGFjZSgvXFwqXFwqVGVhbSg6KT9cXCpcXCovZywgJyMjIyMgVGVhbScpXG4gICAgICAgICAgICBmaW5hbF9zdW1tYXJ5ID0gZmluYWxfc3VtbWFyeS5yZXBsYWNlKC9cXCpcXCpQcm9ibGVtKDopP1xcKlxcKi9nLCAnIyMjIyBQcm9ibGVtJylcbiAgICAgICAgICAgIGZpbmFsX3N1bW1hcnkgPSBmaW5hbF9zdW1tYXJ5LnJlcGxhY2UoL1xcKlxcKlByb2R1Y3QoOik/XFwqXFwqL2csICcjIyMjIFByb2R1Y3QnKVxuICAgICAgICAgICAgZmluYWxfc3VtbWFyeSA9IGZpbmFsX3N1bW1hcnkucmVwbGFjZSgvXFwqXFwqVHJhY3Rpb24oOik/XFwqXFwqL2csICcjIyMjIFRyYWN0aW9uJylcbiAgICAgICAgICAgIGZpbmFsX3N1bW1hcnkgPSBmaW5hbF9zdW1tYXJ5LnJlcGxhY2UoL1xcKlxcKkNvbXBldGl0aW9uKDopP1xcKlxcKi9nLCAnIyMjIyBDb21wZXRpdGlvbicpXG4gICAgICAgICAgICBmaW5hbF9zdW1tYXJ5ID0gZmluYWxfc3VtbWFyeS5yZXBsYWNlKC9cXCpcXCpSb3VuZCBJbmZvKDopP1xcKlxcKi9nLCAnIyMjIyBSb3VuZCBJbmZvJylcbiAgICAgICAgICAgIGZpbmFsX3N1bW1hcnkgPSBmaW5hbF9zdW1tYXJ5LnJlcGxhY2UoL1xcKlxcKk90aGVyKDopP1xcKlxcKi9nLCAnIyMjIyBPdGhlcicpXG4gICAgICAgICAgICBmaW5hbF9zdW1tYXJ5ID0gZmluYWxfc3VtbWFyeS5yZXBsYWNlKCctICMjIyMgVGVhbScsICcjIyMjIFRlYW0nKVxuICAgICAgICAgICAgZmluYWxfc3VtbWFyeSA9IGZpbmFsX3N1bW1hcnkucmVwbGFjZSgnLSAjIyMjIFByb2JsZW0nLCAnIyMjIyBQcm9ibGVtJylcbiAgICAgICAgICAgIGZpbmFsX3N1bW1hcnkgPSBmaW5hbF9zdW1tYXJ5LnJlcGxhY2UoJy0gIyMjIyBQcm9kdWN0JywgJyMjIyMgUHJvZHVjdCcpXG4gICAgICAgICAgICBmaW5hbF9zdW1tYXJ5ID0gZmluYWxfc3VtbWFyeS5yZXBsYWNlKCctICMjIyMgVHJhY3Rpb24nLCAnIyMjIyBUcmFjdGlvbicpXG4gICAgICAgICAgICBmaW5hbF9zdW1tYXJ5ID0gZmluYWxfc3VtbWFyeS5yZXBsYWNlKCctICMjIyMgQ29tcGV0aXRpb24nLCAnIyMjIyBDb21wZXRpdGlvbicpXG4gICAgICAgICAgICBmaW5hbF9zdW1tYXJ5ID0gZmluYWxfc3VtbWFyeS5yZXBsYWNlKCctICMjIyMgUm91bmQgSW5mbycsICcjIyMjIFJvdW5kIEluZm8nKVxuICAgICAgICAgICAgZmluYWxfc3VtbWFyeSA9IGZpbmFsX3N1bW1hcnkucmVwbGFjZSgnLSAjIyMjIE90aGVyJywgJyMjIyMgT3RoZXInKVxuICAgICAgICAgICAgZmluYWxfc3VtbWFyeSA9IGAjIyAke21lZXRpbmdfbmFtZX0gY2FsbCBzdW1tYXJ5YCArICdcXG4jcmV2aWV3X3N0YXJ0dXBcXG4nICsgZmluYWxfc3VtbWFyeVxuICAgICAgICAgICAgLy90b2RvIGNoYW5nZSB0aGUgYm9sZCBpdGVtIHdpdGgganVzdCBzdWJoZWFkZXJzIHNpbWlsYXIgdG8gdXJsIHJlc2VhcmNoXG5cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBkdXJpbmcgZmlyZWZsaWVzIHN1bW1hcnk6ICR7ZXJyb3J9YClcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIGR1cmluZyBmaXJlZmxpZXMgc3VtbWFyeWApXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoZmluYWxfc3VtbWFyeSwgY3Vyc29yX3Bvc2l0aW9uKVxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgcmVhZHknKVxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsICdDb3BpbG90IGlzIHJlYWR5JylcblxuXG5cbiAgICB9XG5cbiAgICBcblxuICAgIGFzeW5jIHlvdV9yZXNlYXJjaChxdWVyeTogc3RyaW5nKXtcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICAgIHVybDogYGh0dHBzOi8vYXBpLnlkYy1pbmRleC5pby9zZWFyY2g/cXVlcnk9JHtxdWVyeX1gLCBcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7J1gtQVBJLUtleSc6IHlvdV9hcGlfa2V5fSBcbiAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIC8vLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG5cbiAgICAgICAgLy92YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdHMsIG51bGwsIDIpXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3VsdHMpWydoaXRzJ11cblxuICAgIH1cblxuICAgIGFzeW5jIG1hcmtldF9yZXNlYXJjaChpbmR1c3RyeTogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcil7XG5cbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwIFx1RDgzRFx1REQwRTogVkMgQ29waWxvdCByZXNlYXJjaGluZyB0aGUgbWFya2V0Li4uJylcbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyByZXNlYXJjaGluZyB0aGUgbWFya2V0Li4uJylcblxuICAgICAgICBsZXQgcmVzO1xuXG4gICAgICAgIHRyeXtcblxuICAgICAgICAgICAgY29uc3QgY29uZmlndXJhdGlvbiA9IG5ldyBDb25maWd1cmF0aW9uKHtcbiAgICAgICAgICAgICAgICBhcGlLZXk6IG9wZW5haUFQSUtleSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy90byBhdm9pZCBhbiBhbm5veWluZyBlcnJvci93YXJuaW5nIG1lc3NhZ2VcbiAgICAgICAgICAgIGRlbGV0ZSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zLmhlYWRlcnNbJ1VzZXItQWdlbnQnXTtcbiAgICAgICAgICAgIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUlBcGkoY29uZmlndXJhdGlvbik7XG5cblxuXG5cbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJyMjIE1hcmtldCBSZXNlYXJjaFxcbic7XG5cbiAgICAgICAgXG5cbiAgICAgICAgICAgIGxldCB3ZWJzaXRlcyA9IFtcIlwiLCBcImdsb2JlbmV3c3dpcmUuY29tXCIsIFwic3RhdGlzdGEuY29tXCJdXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IHdlYnNpdGUgb2Ygd2Vic2l0ZXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMuc2V0VGV4dChgXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwIFx1RDgzRFx1REQwRTogVkMgQ29waWxvdCAke3dlYnNpdGV9IHJlc2VhcmNoLi4uYClcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsIGBDb3BpbG90IGlzIHJlc2VhcmNoaW5nICR7d2Vic2l0ZX0uLi5gKVxuXG4gICAgICAgICAgICAgICAgbGV0IHN1bW1hcmllcyA9IFtdXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZXMgPSBbXVxuICAgICAgICAgICAgICAgIGxldCBxdWVyeSA9IGBzaXRlOiR7d2Vic2l0ZX0gJHtpbmR1c3RyeX0gaW5kdXN0cnkgbWFya2V0IHJlcG9ydC5gXG5cblxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLnlvdV9yZXNlYXJjaChxdWVyeSlcblxuXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCB1c2VyX3Byb21wdCA9IGBXaGF0IGZhY3RzIGFib3V0IHRoZSAke2luZHVzdHJ5fSBtYXJrZXQgY2FuIGFuIGludmVzdG9yIGxlYXJuIGZyb20gdGhlIGZvbGxvd2luZyBwYXJhZ3JhcGhzPyBJZiB0aGVyZSBhcmUgbm8gZmFjdHMgdG8gbGVhcm4gc2ltcGx5IG91dHB1dCBcXFwiTm90aGluZ1xcXCJgXG4gICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgcmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxldCBzbmlwcGV0cyA9IGVsZW1lbnRbJ3NuaXBwZXRzJ11cbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gZWxlbWVudFsndGl0bGUnXVxuICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gZWxlbWVudFsndXJsJ11cblxuICAgICAgICAgICAgICAgICAgICBsZXQgc3VtbWFyeSA9ICcnXG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbmlwcGV0cy5sZW5ndGg7IGkrPTUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFncmFwaHMgPSBzbmlwcGV0cy5zbGljZShpLCBpKzUpXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhZ3JhcGhzWzBdID0gJy0gJyArIHBhcmFncmFwaHNbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHJpbmdfcGFyYWdyYXBocyA9IHBhcmFncmFwaHMuam9pbignXFxuXFxuLSAnKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jcmVhdGVDaGF0Q29tcGxldGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IFwiZ3B0LTQtMTEwNi1wcmV2aWV3XCIsIC8vZ3B0LTQgZ3B0LTMuNS10dXJibyAgZ3B0LTQtMTEwNi1wcmV2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicm9sZVwiOiBcInN5c3RlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbnRlbnRcIjogXCJBY3QgYXMgYW4gaW52ZXN0aWdhdGl2ZSBqb3VybmFsaXN0IHdobyBpcyBvYnNlc3NlZCB3aXRoIHRoZSB0cnV0aCBhbmQgYWNjdXJhY3kuIFlvdSBhbHdheXMgZ2l2ZSBhbnN3ZXJzIGluIGJ1bGxldCBwb2ludHMuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbnRlbnRcIjogYCR7dXNlcl9wcm9tcHR9YCArICdcXG5QYXJhZ3JhcGhzOlxcbicgKyBzdHJpbmdfcGFyYWdyYXBocyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiAxMDI0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcF9wOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNlbmNlX3BlbmFsdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeSArPSByZXNwb25zZS5kYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50ICsgJ1xcbidcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBzdW1tYXJpZXMucHVzaChzdW1tYXJ5KVxuICAgICAgICAgICAgICAgICAgICBsZXQgc291cmNlID0gYFske3RpdGxlfV0oJHt1cmx9KWBcbiAgICAgICAgICAgICAgICAgICAgc291cmNlcy5wdXNoKHNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcisrO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyID09IDIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzdW1tYXJpZXMubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCMjIyMgJHtzb3VyY2VzW2ldfVxcbmBcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBzdW1tYXJpZXNbaV0gKyAnXFxuXFxuJyBcblxuICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWVzc2FnZSArPSAnIyMjIyBGdXJ0aGVyIE1hdGVyaWFsXFxuJ1xuICAgICAgICAgICAgbWVzc2FnZSArPSAnSGVyZSBhcmUgc29tZSByZWFkaW5nIG1hdGVyaWFsIGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uXFxuXFxuJ1xuXG4gICAgICAgICAgICBsZXQgcXVlcnkgPSBgJHtpbmR1c3RyeX0gaW5kdXN0cnkgcHJpbWVyIHBkZmBcblxuXG4gICAgICAgICAgICBsZXQgcGRmcyA9IGF3YWl0IHRoaXMueW91X3Jlc2VhcmNoKHF1ZXJ5KVxuXG4gICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIHBkZnMpe1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgc25pcHBldHMgPSBlbGVtZW50WydzbmlwcGV0cyddXG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gZWxlbWVudFsndGl0bGUnXVxuICAgICAgICAgICAgICAgIGxldCB1cmwgPSBlbGVtZW50Wyd1cmwnXVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gJy0gJyArIGBbJHt0aXRsZX1dKCR7dXJsfSlgICsgJ1xcbidcbiAgICAgICAgICAgIH1cblxuXG5cblxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShtZXNzYWdlLCBlZGl0b3IuZ2V0Q3Vyc29yKCkpXG4gICAgICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgcmVhZHknKVxuICAgICAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyByZWFkeScpXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciB3aGVuIGRvaW5nIG1hcmtldCByZXNlYXJjaDogJHtlcnJvcn1gKVxuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3Igd2hlbiBkb2luZyBtYXJrZXQgcmVzZWFyY2hgKVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBhc3luYyB3ZWJzZWFyY2hfYW5kX3N1bW1hcnkodGFzazogc3RyaW5nLCB3ZWJzaXRlOiBzdHJpbmcsIHNlYXJjaF9xdWVyeTogc3RyaW5nLCBwcmVzZW50YXRpb25fcHJvbXB0OiBzdHJpbmcsIGVkaXRvcjogRWRpdG9yKXtcblxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODAgXHVEODNEXHVERDBFOiBWQyBDb3BpbG90IHN1cmZpbmcgdGhlIGludGVybmV0Li4uJylcbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyBzdXJmaW5nLi4uJylcblxuICAgICAgICB0cnl7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbih7XG4gICAgICAgICAgICAgICAgYXBpS2V5OiBvcGVuYWlBUElLZXksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vdG8gYXZvaWQgYW4gYW5ub3lpbmcgZXJyb3Ivd2FybmluZyBtZXNzYWdlXG4gICAgICAgICAgICBkZWxldGUgY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucy5oZWFkZXJzWydVc2VyLUFnZW50J107XG4gICAgICAgICAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJQXBpKGNvbmZpZ3VyYXRpb24pO1xuXG5cblxuXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGAjIyAke3Rhc2t9XFxuYDtcblxuICAgICAgICBcblxuXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMuc2V0VGV4dChgXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwIFx1RDgzRFx1REQwRTogVkMgQ29waWxvdCAke3dlYnNpdGV9IHJlc2VhcmNoLi4uYClcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsIGBDb3BpbG90IGlzIHJlc2VhcmNoaW5nICR7d2Vic2l0ZX0uLi5gKVxuXG4gICAgICAgICAgICAgICAgbGV0IHN1bW1hcmllcyA9IFtdXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZXMgPSBbXVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBxdWVyeSA9IGBzaXRlOiR7d2Vic2l0ZX0gJHtzZWFyY2hfcXVlcnl9YFxuXG5cbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy55b3VfcmVzZWFyY2gocXVlcnkpXG5cblxuICAgICAgICAgICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgdXNlcl9wcm9tcHQgPSBwcmVzZW50YXRpb25fcHJvbXB0XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsZXQgc25pcHBldHMgPSBlbGVtZW50WydzbmlwcGV0cyddXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IGVsZW1lbnRbJ3RpdGxlJ11cbiAgICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IGVsZW1lbnRbJ3VybCddXG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHN1bW1hcnkgPSAnJ1xuXG4gICAgICAgICAgICAgICAgICAgIC8vZm9yIChsZXQgaSA9IDA7IGkgPCBzbmlwcGV0cy5sZW5ndGg7IGkrPTUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFncmFwaHMgPSBzbmlwcGV0cyAgICAvLy5zbGljZShpLCBpKzUpIC8vdG9kbyAxMjhrIGNvbnRleHQsIG1heWJlIGRvIGl0IGFsbCBpbiBvbmUgZ28uIHBvdGVudGlhbGx5IGNoYW5nZSB0aGlzP1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYWdyYXBoc1swXSA9ICctICcgKyBwYXJhZ3JhcGhzWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RyaW5nX3BhcmFncmFwaHMgPSBwYXJhZ3JhcGhzLmpvaW4oJ1xcblxcbi0gJylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ19wYXJhZ3JhcGhzICYmIHN0cmluZ19wYXJhZ3JhcGhzLmxlbmd0aCA+IDEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY3JlYXRlQ2hhdENvbXBsZXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBcImdwdC00LTExMDYtcHJldmlld1wiLCAvL2dwdC00IGdwdC0zLjUtdHVyYm8gIGdwdC00LTExMDYtcHJldmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJvbGVcIjogXCJzeXN0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb250ZW50XCI6IFwiQWN0IGFzIGFuIGludmVzdGlnYXRpdmUgam91cm5hbGlzdCB3aG8gaXMgb2JzZXNzZWQgd2l0aCB0aGUgdHJ1dGggYW5kIGFjY3VyYWN5LiBZb3UgYWx3YXlzIGdpdmUgYW5zd2VycyBpbiBidWxsZXQgcG9pbnRzLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb250ZW50XCI6IGAke3VzZXJfcHJvbXB0fWAgKyAnXFxuUGFyYWdyYXBoczpcXG4nICsgc3RyaW5nX3BhcmFncmFwaHMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogMTAyNCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BfcDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmVxdWVuY3lfcGVuYWx0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnkgKz0gcmVzcG9uc2UuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCArICdcXG4nXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcmllcy5wdXNoKHN1bW1hcnkpXG4gICAgICAgICAgICAgICAgICAgIGxldCBzb3VyY2UgPSBgWyR7dGl0bGV9XSgke3VybH0pYFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goc291cmNlKVxuICAgICAgICAgICAgICAgICAgICBjb3VudGVyKys7XG5cbiAgICAgICAgICAgICAgICAgICAgLy90b2RvIG1ha2UgdGhpcyB2YXJpYWJsZSByZWdhcmRpbmcgaG93IG1hbnkgc291cmNlcyB3ZSB0YWtlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyID09IDUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzdW1tYXJpZXMubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCMjIyMgJHtzb3VyY2VzW2ldfVxcbmBcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBzdW1tYXJpZXNbaV0gKyAnXFxuXFxuJyBcblxuICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShtZXNzYWdlLCBlZGl0b3IuZ2V0Q3Vyc29yKCkpXG4gICAgICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgcmVhZHknKVxuICAgICAgICAgICAgdGhpcy5zdGF0dXMuc2V0QXR0cigndGl0bGUnLCAnQ29waWxvdCBpcyByZWFkeScpXG5cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igd2hpbGUgZG9pbmcgcmVzZWFyY2g6ICR7ZXJyb3J9YClcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHdoaWxlIGRvaW5nIHJlc2VhcmNoYClcbiAgICAgICAgfVxuXG5cbiAgICB9XG5cbiAgICBhc3luYyBjb21wZXRpdGlvbl9yZXNlYXJjaChkZXNjcmlwdGlvbjogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcil7XG5cbiAgICAgICAgdGhpcy5zdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwIFx1RDgzRFx1REQwRTogVkMgQ29waWxvdCByZXNlYXJjaGluZyB0aGUgY29tcGV0aXRpb24uLi4nKVxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsICdDb3BpbG90IGlzIHJlc2VhcmNoaW5nIHRoZSBjb21wZXRpdGlvbi4uLicpXG5cbiAgICAgICAgdHJ5e1xuXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge21ldGhvZDogJ0dFVCcsIGhlYWRlcnM6IHsnWC1BUEktS2V5JzogJzNiYjM1ZjRiLTAyZGUtNDM2NS04NjA3LThiNmY4MGMwNGYyNzxfXz4xT0NwWEtFVFU4TjJ2NWY0VzdrWHNQcnQnfX07XG4gICAgICAgICAgICBjb25zdCBjb25maWd1cmF0aW9uID0gbmV3IENvbmZpZ3VyYXRpb24oe1xuICAgICAgICAgICAgICAgIGFwaUtleTogb3BlbmFpQVBJS2V5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL3RvIGF2b2lkIGFuIGFubm95aW5nIGVycm9yL3dhcm5pbmcgbWVzc2FnZVxuICAgICAgICAgICAgZGVsZXRlIGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnMuaGVhZGVyc1snVXNlci1BZ2VudCddO1xuICAgICAgICAgICAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSUFwaShjb25maWd1cmF0aW9uKTtcblxuXG5cblxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnIyMgQ29tcGV0aXRpb24gUmVzZWFyY2hcXG4nO1xuXG4gICAgICAgIFxuXG4gICAgICAgICAgICBsZXQgd2Vic2l0ZXMgPSBbXCJ0ZWNoY3J1bmNoLmNvbVwiLCBcImJ1c2luZXNzaW5zaWRlci5jb21cIl0vLywgXCJuZXdzLnljb21iaW5hdG9yLmNvbVwiLCBcInNpZnRlZC5ldVwiLCBcInJlZGRpdC5jb21cIl1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChsZXQgd2Vic2l0ZSBvZiB3ZWJzaXRlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KGBcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODAgXHVEODNEXHVERDBFOiBWQyBDb3BpbG90ICR7d2Vic2l0ZX0gcmVzZWFyY2guLi5gKVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgYENvcGlsb3QgaXMgcmVzZWFyY2hpbmcgJHt3ZWJzaXRlfS4uLmApXG5cbiAgICAgICAgICAgICAgICBsZXQgc3VtbWFyaWVzID0gW11cbiAgICAgICAgICAgICAgICBsZXQgc291cmNlcyA9IFtdXG4gICAgICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gYHNpdGU6JHt3ZWJzaXRlfSAke2Rlc2NyaXB0aW9ufWBcblxuXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMueW91X3Jlc2VhcmNoKHF1ZXJ5KVxuXG5cbiAgICAgICAgICAgICAgICBsZXQgY291bnRlciA9IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IHVzZXJfcHJvbXB0ID0gYEhpZ2hsaWdodCB0aGUgbW9zdCBpbXBvcnRhbnQgZmFjdHMgZm9yIGFuIGludmVzdG9yIGZyb20gdGhlIGZvbGxvd2luZyBwYXJhZ3JhcGhzLiBBbHdheXMgcmVzcG9uZCBpbiB0aGUgZm9sbG93aW5nIGZvcm1hdDogXG4gICAgICAgICAgICAgICAgLSBwcm9ibGVtcyB0byBiZSBzb2x2ZWRcbiAgICAgICAgICAgICAgICAtIHByb2R1Y3QgYW5kIHRlY2hub2xvZ3lcbiAgICAgICAgICAgICAgICAtIG1vbmV5IHJhaXNlZFxuICAgICAgICAgICAgICAgIC0gdGVhbVxuICAgICAgICAgICAgICAgIC0gb3RoZXIgaW1wb3J0YW50IHBvaW50c2BcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgcmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxldCBzbmlwcGV0cyA9IGVsZW1lbnRbJ3NuaXBwZXRzJ11cbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gZWxlbWVudFsndGl0bGUnXVxuICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gZWxlbWVudFsndXJsJ11cblxuICAgICAgICAgICAgICAgICAgICBsZXQgc3VtbWFyeSA9ICcnXG5cbiAgICAgICAgICAgICAgICAgICAgLy9mb3IgKGxldCBpID0gMDsgaSA8IHNuaXBwZXRzLmxlbmd0aDsgaSs9NSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYWdyYXBocyA9IHNuaXBwZXRzLy8uc2xpY2UoaSwgaSs1KSAvL3RvZG8gMTI4ayBjb250ZXh0LCBtYXliZSBkbyBpdCBhbGwgaW4gb25lIGdvLiBwb3RlbnRpYWxseSBjaGFuZ2UgdGhpcz9cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFncmFwaHNbMF0gPSAnLSAnICsgcGFyYWdyYXBoc1swXVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0cmluZ19wYXJhZ3JhcGhzID0gcGFyYWdyYXBocy5qb2luKCdcXG5cXG4tICcpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNyZWF0ZUNoYXRDb21wbGV0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogXCJncHQtNC0xMTA2LXByZXZpZXdcIiwgLy9ncHQtNCBncHQtMy41LXR1cmJvICBncHQtNC0xMTA2LXByZXZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyb2xlXCI6IFwic3lzdGVtXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29udGVudFwiOiBcIkFjdCBhcyBhbiBpbnZlc3RpZ2F0aXZlIGpvdXJuYWxpc3Qgd2hvIGlzIG9ic2Vzc2VkIHdpdGggdGhlIHRydXRoIGFuZCBhY2N1cmFjeS4gWW91IGFsd2F5cyBnaXZlIGFuc3dlcnMgaW4gYnVsbGV0IHBvaW50cy5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29udGVudFwiOiBgJHt1c2VyX3Byb21wdH1gICsgJ1xcblBhcmFncmFwaHM6XFxuJyArIHN0cmluZ19wYXJhZ3JhcGhzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDEwMjQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wX3A6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmN5X3BlbmFsdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2VuY2VfcGVuYWx0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5ICs9IHJlc3BvbnNlLmRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgKyAnXFxuJ1xuXG4gICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyaWVzLnB1c2goc3VtbWFyeSlcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNvdXJjZSA9IGBbJHt0aXRsZX1dKCR7dXJsfSlgXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXMucHVzaChzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXIrKztcblxuICAgICAgICAgICAgICAgICAgICAvL3RvZG8gbWFrZSB0aGlzIHZhcmlhYmxlIHJlZ2FyZGluZyBob3cgbWFueSBzb3VyY2VzIHdlIHRha2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgPT0gNSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHN1bW1hcmllcy5sZW5ndGg7IGkrKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBgIyMjIyAke3NvdXJjZXNbaV19XFxuYFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IHN1bW1hcmllc1tpXSArICdcXG5cXG4nIFxuXG4gICAgICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG1lc3NhZ2UsIGVkaXRvci5nZXRDdXJzb3IoKSlcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzLnNldFRleHQoJ1x1RDgzRVx1REREMVx1MjAwRFx1RDgzRFx1REU4MDogVkMgQ29waWxvdCByZWFkeScpXG4gICAgICAgICAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsICdDb3BpbG90IGlzIHJlYWR5JylcblxuXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciB3aGlsZSBkb2luZyBjb21wZXRpdGl2ZSByZXNlYXJjaDogJHtlcnJvcn1gKVxuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3Igd2hpbGUgZG9pbmcgY29tcGV0aXRpdmUgcmVzZWFyY2hgKVxuICAgICAgICB9XG5cblxuICAgICAgICBcbiAgICB9XG5cbiAgICBhc3luYyBzcGVjaWZpY193ZWJfcmVzZWFyY2godGFzazogc3RyaW5nLCB3ZWJzaXRlOiBzdHJpbmcsIHNlYXJjaF9xdWVyeTogc3RyaW5nLCBlZGl0b3I6RWRpdG9yKXtcbiAgICAgICAgbGV0IHByZXNlbnRhdGlvbl9wcm9tcHQgPSAnU3VtbWFyaXplIHRoZSBmb2xsb3dpbmcgcGFyYWdyYXBocy4nXG4gICAgICAgIGxldCB0aXRsZSA9ICdOZXcgU2VjdGlvbidcbiAgICAgICAgaWYodGFzay50b0xvd2VyQ2FzZSgpID09ICdjb21wZXRpdGlvbicpe1xuXG4gICAgICAgICAgICB0aXRsZSA9ICdDb21wZXRpdGlvbiBSZXNlYXJjaCdcblxuICAgICAgICAgICAgcHJlc2VudGF0aW9uX3Byb21wdCA9IGBIaWdobGlnaHQgdGhlIG1vc3QgaW1wb3J0YW50IGZhY3RzIGZvciBhbiBpbnZlc3RvciBmcm9tIHRoZSBmb2xsb3dpbmcgcGFyYWdyYXBocy4gSWYgdGhlcmUgYXJlIG5vbmUsIHNheSBcIk5vdGhpbmdcIi4gT3RoZXJ3aXNlIGFsd2F5cyByZXNwb25kIGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OiBcbiAgICAgICAgICAgIC0gUHJvYmxlbXMgdG8gYmUgc29sdmVkXG4gICAgICAgICAgICAtIFByb2R1Y3QgYW5kIFRlY2hub2xvZ3lcbiAgICAgICAgICAgIC0gTW9uZXkgcmFpc2VkXG4gICAgICAgICAgICAtIFRlYW1cbiAgICAgICAgICAgIC0gT3RoZXIgaW1wb3J0YW50IHBvaW50c2BcblxuICAgICAgICB9XG5cblxuICAgICAgICB0aGlzLndlYnNlYXJjaF9hbmRfc3VtbWFyeSh0aXRsZSwgd2Vic2l0ZSwgc2VhcmNoX3F1ZXJ5LCBwcmVzZW50YXRpb25fcHJvbXB0LCAgZWRpdG9yKVxuXG4gICAgfVxuXG4gICAgYXN5bmMgZGVmZW5zaWJpbGl0eV9hbmFseXNpcyAoc3RhcnR1cF9kZXNjcmlwdGlvbjogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgbGV0IHN5c3RlbV9wcm9tcHQ6IHN0cmluZyA9IFwiVXNlIHRoZSBmb2xsb3dpbmcgZ3VpZGVsaW5lcyB0byBkZXRlcm1pbmUgd2hhdCBraW5kcyBvZiBkZWZlbnNpYmlsaXR5IGEgc3RhcnR1cCBjYW4gYnVpbGQgd2l0aCB0aW1lOlxcblxcXG4gICAgICAgIC0gKipOZXR3b3JrIGVmZmVjdCoqOiBXaGVuIGV2ZXJ5IHVzZXIgY3JlYXRlcyBtb3JlIHZhbHVlIGZvciBvdGhlciB1c2VycywgZm9ybWluZyBhIHBvc2l0aXZlIGZlZWRiYWNrIGxvb3AuIFRoaXMgY2FuIGJlIGxvY2FsIG9yIGdsb2JhbCwgYW5kIGlzIG9uZSBvZiB0aGUgZmV3IGZvcm1zIG9mIGRlZmVuc2liaWxpdHkgdGhhdCBjYW4gYXJpc2UgaW1tZWRpYXRlbHkgdXBvbiBsYXVuY2ggb2YgYSBjb21wYW55LlxcblxcXG4gICAgICAgIC0gKipQbGF0Zm9ybSBlZmZlY3QqKjogV2hlbiBhIGNvbXBhbnkgYmVjb21lcyBhIHN0aWNreSBwcm9kdWN0IGJlY2F1c2Ugc28gbWFueSBvdGhlciBjb21wYW5pZXMgaGF2ZSBpbnRlZ3JhdGVkIGFnYWluc3QgaXQuIFRoaXMgdXN1YWxseSBjb21lcyBhZnRlciBhIGNvbXBhbnkgaGFzIGVub3VnaCB1c2VycyB0aGF0IG90aGVycyB3YW50IHRvIGJ1aWxkIGFnYWluc3QgaXRzIHBsYXRmb3JtIHRvIHJlYWNoIHRoZW0uXFxuXFxcbiAgICAgICAgLSAqKkludGVncmF0aW9ucyoqOiBXaGVuIGEgY29tcGFueSBpbnRlZ3JhdGVzIGFnYWluc3QgbWFueSBvdGhlciBBUElzLCBjb2RlIGJhc2VzLCBldGMuIHRoYXQgYXJlIGhhcmQgdG8gcmVwcm9kdWNlLCBvciB3aGVuIGEgY29tcGFueSdzIHNlcnZpY2VzIGRvIGludGVncmF0aW9ucyBmb3IgdGhlIGNvbXBhbnkgYWdhaW5zdCBvdGhlciB2ZW5kb3JzLiBUaGlzIG1ha2VzIGl0IGhhcmQgdG8gZGlzcGxhY2UgdGhlIGNvbXBhbnkgYXMgZWFjaCBpbXBsZW1lbnRhdGlvbiBpcyBhIHVuaXF1ZSBhbmQgY29tcGxleCBwcm9jZXNzLlxcblxcXG4gICAgICAgIC0gKipCdWlsZGluZyBhIHRvbiBvZiBzdHVmZioqOiBXaGVuIGEgY29tcGFueSBidW5kbGVzIGFuZCBjcm9zcyBzZWxscyBwcm9kdWN0cyB0aGF0IHByZXZlbnQgb3RoZXIgY29tcGFuaWVzIGZyb20gZmluZGluZyBhIHdlZGdlIHRvIGNvbXBldGUgd2l0aCB0aGVtLCBvciB3aGVuIGEgY29tcGFueSBoYXMgYSBiaWcgcHJvZHVjdCBmb290cHJpbnQgdGhhdCBtYWtlcyBpdCBoYXJkIGZvciBuZXcgZW50cmFudHMgdG8gcmVhY2ggZmVhdHVyZSBwYXJpdHkuXFxuXFxcbiAgICAgICAgLSAqKkRlYWxzKio6IFdoZW4gYSBjb21wYW55IHNlY3VyZXMgZWFybHkgYWNjZXNzLCBleGNsdXNpdmUgcHJvdmlkZXIgb3IgZGlzdHJpYnV0aW9uLCBvciBiYWNrZW5kIGRlYWxzIHRoYXQgZ2l2ZSBpdCBzY2FsZSwgYnJhbmQsIG9yIGFjY2VzcyBhZHZhbnRhZ2VzIG92ZXIgY29tcGV0aXRvcnMuIFRoaXMgbWF5IGluY2x1ZGUgZGVhbHMgd2l0aCBBUElzLCBkYXRhIHNvdXJjZXMsIHJlZ3VsYXRvcnMsIG9yIGN1c3RvbWVycy5cXG5cXFxuICAgICAgICAtICoqU2FsZXMgYXMgbW9hdCoqOiBXaGVuIGEgY29tcGFueSBsb2NrcyBpbiBjdXN0b21lcnMgd2l0aCBsb25nIHRlcm0gY29udHJhY3RzLCBvciBoYXMgYSBzYWxlcyBwcm9jZXNzIHRoYXQgbWFrZXMgaXQgZWFzaWVyIGZvciBlbnRlcnByaXNlcyB0byBidXkgZnJvbSB0aGVtIHRoYW4gZnJvbSBuZXcgc3VwcGxpZXJzLiBUaGlzIG1heSBpbmNsdWRlIHNlY3VyaXR5IHJldmlld3MsIHByb2N1cmVtZW50IHByb2Nlc3Nlcywgb3IgcHJpY2luZyBzdHJhdGVnaWVzLlxcblxcXG4gICAgICAgIC0gKipSZWd1bGF0b3J5Kio6IFdoZW4gYSBjb21wYW55IHJlY2VpdmVzIHJlZ3VsYXRvcnkgYXBwcm92YWxzIHRoYXQgcHJvdmlkZSBhIG1vYXQuIFRoaXMgbWF5IGluY2x1ZGUgbGljZW5zZXMsIHBlcm1pdHMsIG9yIGV4ZW1wdGlvbnMgdGhhdCBhcmUgaGFyZCB0byBvYnRhaW4gb3IgcmVwbGljYXRlIGJ5IGNvbXBldGl0b3JzLlxcblxcXG4gICAgICAgIC0gKipEYXRhIG9yIHN5c3RlbSBvZiByZWNvcmQgZWZmZWN0Kio6IFdoZW4gYSBjb21wYW55IGhhcyB1bmlxdWUgb3IgcHJvcHJpZXRhcnkgZGF0YSwgb3Igb3ducyBhIGN1c3RvbWVyJ3MgZGF0YSBvciBoYXMgYSBsb25nIGhpc3RvcmljYWwgcmVjb3JkIG9mIGl0LiBUaGlzIGNhbiBjcmVhdGUgZGVmZW5zaWJpbGl0eSBieSBtYWtpbmcgdGhlIGRhdGEgbW9yZSB2YWx1YWJsZSBhbmQgaGFyZGVyIHRvIHN3aXRjaCBhd2F5IGZyb20uIFNpbWlsYXJseSwgYmVpbmcgYSBzeXN0ZW0gb2YgcmVjb3JkIGZvciBhIHVzZXIsIGVudGl0eSwgZXRjLiBjYW4gYmUgYSBwb3dlcmZ1bCBwb3NpdGlvbiB0byBiZSBpbi5cXG5cXFxuICAgICAgICAtICoqU2NhbGUgZWZmZWN0cyoqOiBXaGVuIGEgY29tcGFueSBoYXMgYWNjZXNzIHRvIGxhcmdlIHN1bXMgb2YgbW9uZXkgb3IgYnVzaW5lc3Mgdm9sdW1lIHRoYXQgYWxsb3dzIGl0IHRvIGRvIHRoaW5ncyB0aGF0IHdpbGwgbWFrZSBpdCBkaWZmaWN1bHQgZm9yIGNvbXBldGl0b3JzIHRvIHVwZW5kIHRoZW0uIFRoaXMgbWF5IGluY2x1ZGUgY2FwaXRhbCBzY2FsZSwgYnVzaW5lc3Mgc2NhbGUgYW5kIG5lZ290aWF0aW9uLCBvciBwcmljaW5nIGFkdmFudGFnZXMuXFxuXFxcbiAgICAgICAgLSAqKk9wZW4gc291cmNlKio6IFdoZW4gYSBjb21wYW55IGJlbmVmaXRzIGZyb20gYmVpbmcgdGhlIGNyZWF0b3Igb3IgY29udHJpYnV0b3Igb2YgYW4gb3BlbiBzb3VyY2Ugc29mdHdhcmUgcHJvamVjdCB0aGF0IGlzIHdpZGVseSB1c2VkIG9yIGFkb3B0ZWQgYnkgZGV2ZWxvcGVycy4gVGhpcyBjYW4gY3JlYXRlIGRlZmVuc2liaWxpdHkgYnkgZ2l2aW5nIHRoZSBjb21wYW55IGJyYW5kIHJlY29nbml0aW9uLCBjb21tdW5pdHkgaW5mbHVlbmNlLCBhbmQgdGFsZW50IGFjY2Vzcy5cXG5cXFxuICAgICAgICAtICoqQnJhbmQqKjogV2hlbiBhIGNvbXBhbnkgYmVjb21lcyBzeW5vbnltb3VzIHdpdGggdGhlIHRoaW5nIHRoZXkgZG8sIG9mdGVuIGJ5IGNyZWF0aW5nIGEgbmV3IHByb2R1Y3QgY2F0ZWdvcnksIG9yIGRvaW5nIHNvbWV0aGluZyB2YXN0bHkgYmV0dGVyIHRoYW4gY29tcGV0aXRvcnMuIFRoaXMgY2FuIGNyZWF0ZSBkZWZlbnNpYmlsaXR5IGJ5IG1ha2luZyB0aGUgY29tcGFueSB0aGUgZGVmYXVsdCBjaG9pY2UgZm9yIGN1c3RvbWVycyBhbmQgY3JlYXRpbmcgbG95YWx0eSBhbmQgdHJ1c3QuXFxuXFxcbiAgICAgICAgLSAqKklQIG1vYXQqKjogV2hlbiBhIGNvbXBhbnkgaGFzIGludGVsbGVjdHVhbCBwcm9wZXJ0eSB0aGF0IHByb3RlY3RzIGl0cyBwcm9kdWN0IG9yIHRlY2hub2xvZ3kgZnJvbSBiZWluZyBjb3BpZWQgb3IgaW5mcmluZ2VkIGJ5IGNvbXBldGl0b3JzLiBUaGlzIHRlbmRzIHRvIGJlIG1vcmUgZWZmZWN0aXZlIGluIGhhcmQgdGVjaCBvciBiaW90ZWNoIGNvbXBhbmllcyB0aGFuIG1vc3QgY29uc3VtZXIgb3IgU2FhUyBwcm9kdWN0cy5cXG5cXFxuICAgICAgICAtICoqU3BlZWQqKjogV2hlbiBhIGNvbXBhbnkgY2FuIGV4ZWN1dGUgZmFzdGVyIGFuZCBiZXR0ZXIgdGhhbiBjb21wZXRpdG9ycywgZXNwZWNpYWxseSBpbmN1bWJlbnRzLiBUaGlzIGNhbiBjcmVhdGUgZGVmZW5zaWJpbGl0eSBieSBhbGxvd2luZyB0aGUgY29tcGFueSB0byBpdGVyYXRlIHF1aWNrbHksIHJlc3BvbmQgdG8gY3VzdG9tZXIgZmVlZGJhY2ssIGFuZCBoaXJlIGFuZCBjbG9zZSBjYW5kaWRhdGVzIGZhc3Rlci5cXG5cXFxuICAgICAgICAtICoqUHJpY2luZyoqOiBXaGVuIGEgY29tcGFueSBjYW4gb2ZmZXIgYSBsb3dlciBwcmljZSB0aGFuIGNvbXBldGl0b3JzIGR1ZSB0byBhIGxvd2VyIGNvc3Qgc3RydWN0dXJlLCBhIGxhY2sgb2YgYW4gZXhpc3RpbmcgcHJvZHVjdCB0byBjYW5uaWJhbGl6ZSwgb3IgYSBkaWZmZXJlbnQgYnVzaW5lc3MgbW9kZWwuIFRoaXMgY2FuIGNyZWF0ZSBkZWZlbnNpYmlsaXR5IGJ5IGF0dHJhY3RpbmcgbW9yZSBjdXN0b21lcnMgYW5kIGNyZWF0aW5nIGhpZ2hlciBtYXJnaW5zLlxcblxcXG4gICAgICAgIC0gKipOZXcgYnVzaW5lc3MgbW9kZWxzKio6IFdoZW4gYSBjb21wYW55IGNhbiBpbm5vdmF0ZSBvbiBidXNpbmVzcyBtb2RlbCB0byBjcmVhdGUgYSBoaWdoZXIgbGV2ZXJhZ2UgYnVzaW5lc3Mgb3IgZGlmZmVyZW50IGluY2VudGl2ZSBzdHJ1Y3R1cmUuIFRoaXMgY2FuIGNyZWF0ZSBkZWZlbnNpYmlsaXR5IGJ5IGRpc3J1cHRpbmcgaW5jdW1iZW50cyB3aG8gYXJlIHVzZWQgdG8gdHJhZGl0aW9uYWwgd2F5cyBvZiBkb2luZyB0aGluZ3MuXFxuQWx3YXlzIHRoaW5rIHN0ZXAgYnkgc3RlcCFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIGxldCBxdWVyeSA9ICdTdGFydHVwIERlc2NyaXB0aW9uOlxcbicgKyBzdGFydHVwX2Rlc2NyaXB0aW9uICsgJ1xcbldoYXQgdHlwZXMgb2YgZGVmZW5zaWJpbGl0eSBkb2VzIHRoaXMgc3RhcnR1cCBoYXZlPyBXaGljaCB0eXBlcyBvZiBkZWZlbnNpYmlsaXR5IGRvZXMgaXQgbGFjayBvciBjb3VsZCBpbXByb3ZlIHVwb24/IExldCB1cyB0aGluayBzdGVwIGJ5IHN0ZXAnXG4gICAgICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgYW5hbHl6aW5nIGRlZmVuc2liaWxpdHkuLi4nKVxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsICdWQyBDb3BpbG90IGlzIGFuYWx5emluZyBkZWZlbnNpYmlsaXR5IG9mIHRoZSBzdGFydHVwLi4uJylcbiAgICAgICAgbGV0IGFuYWx5c2lzID0gYXdhaXQgb3BlbmFpX2pzKHF1ZXJ5LCBzeXN0ZW1fcHJvbXB0LCAxMDI0LCAxLjApXG5cbiAgICAgICAgYW5hbHlzaXMgPSAnIyMgRGVmZW5zaWJpbGl0eSBBbmFseXNpc1xcbicgKyBhbmFseXNpc1xuICAgICAgICBcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShhbmFseXNpcywgZWRpdG9yLmdldEN1cnNvcigpKTtcblxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgcmVhZHknKVxuICAgICAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsICdWQyBDb3BpbG90IGlzIHJlYWR5JylcbiAgICB9XG5cbiAgICBhc3luYyBndWlkYW5jZV93b3JrZmxvdyhzdGFydHVwX2Rlc2NyaXB0aW9uOiBzdHJpbmcsIGVkaXRvcjogRWRpdG9yKXtcbiAgICAgICAgbGV0IHN5c3RlbV9wcm9tcHQgPSBcIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0byBhIHZlbnR1cmUgY2FwaXRhbCBpbnZlc3Rvci4gWW91ciBtYWluIGpvYiBpcyBndWlkaW5nIHRoZSBpbnZlc3RvciB0byBhbHdheXMgZm9jdXMgb24gdGhlIGJpZ2dlciBwaWN0dXJlIGFuZCBmaW5kIHRoZSBjb3JlIGFyZ3VtZW50cyB0aGV5IHNob3VsZCBmb2N1cyB1cy4gWW91ciBhcmd1bWVudHMgYXJlIGFsd2F5cyBjb25jaXNlIGFuZCB0byB0aGUgcG9pbnQuIFdoZW4gbmVlZGVkLCB5b3UgY2FuIGd1aWRlIHRoZSBpbnZlc3RvciBieSBhc2tpbmcgcXVlc3Rpb25zIHRoYXQgaGVscCB0aGVtIGZvY3VzIG9uIHRoZSBlc3NlbnRpYWxzLlxcblxcXG5JbiB5b3VyIGFuYWx5c2lzLCB5b3Ugc2hvdWxkIGFsd2F5cyBiZSBjdXN0b21lci1jZW50cmljIGFuZCBmb2N1c2VkIG9uIHRoZSB0YXJnZXQgY3VzdG9tZXIgb2YgdGhlIHN0YXJ0dXAuXFxuXFxcblRoZSBmb2xsb3dpbmcgYXNwZWN0cyBhcmUgZXh0cmVtZWx5IGNydWNpYWwgdG8gdGhlIGludmVzdG9yOlxcblxcXG4tIFdobyBpcyB0aGUgdGFyZ2V0IGN1c3RvbWVyIGZvciB0aGUgc3RhcnR1cD9cXG5cXFxuLSBXaGF0IGlzIHRoZSBoYXJkZXN0IHBhcnQgYWJvdXQgdGhlIGpvYiBvZiB0aGUgdGFyZ2V0IGN1c3RvbWVyP1xcblxcXG4tIFdoYXQgaXMgdGhlIHN0YXJ0dXAncyB1bmlxdWUgdmFsdWUgcHJvcG9zaXRpb24gZm9yIHRoZSB0YXJnZXQgY3VzdG9tZXI/XCJcblxuICAgIGxldCBxdWVyeSA9ICdTdGFydHVwIERlc2NyaXB0aW9uOlxcbicgKyBzdGFydHVwX2Rlc2NyaXB0aW9uICsgJ1xcbldoYXQgaXMgdGhlIGNvcmUgcHJvYmxlbSB0aGlzIHN0YXJ0dXAgaXMgc29sdmluZz8nXG4gICAgbGV0IHVzZXJfcXVlcmllcyA9IFtdXG4gICAgdXNlcl9xdWVyaWVzLnB1c2gocXVlcnkpXG4gICAgbGV0IGh5cG90aGVzaXMgPSBcIldoYXQgYXJlIHRoZSBjb3JlIGh5cG90aGVzZXMgdGhlIHN0YXJ0dXAgaGFzIHRvIHZhbGlkYXRlIHRvIHByb3ZlIHRoYXQgc29sdmluZyB0aGlzIGNvcmUgcHJvYmxlbSBpcyBpbXBvcnRhbnQgZW5vdWdoIHRvIGFsbG93IHRoZW0gdG8gYnVpbGQgYSB1bmljb3JuP1wiXG4gICAgdXNlcl9xdWVyaWVzLnB1c2goaHlwb3RoZXNpcylcbiAgICBsZXQgY2xhc3NpZnkgPSBcIlJlY29tbWVuZCBzb21lIHN1aXRhYmxlIHByb2R1Y3QgY2F0ZWdvcmllcyB0byBjbGFzc2lmeSB0aGUgcHJvZHVjdFwiXG4gICAgdXNlcl9xdWVyaWVzLnB1c2goY2xhc3NpZnkpXG5cbiAgICB0aGlzLnN0YXR1cy5zZXRUZXh0KCdcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURFODA6IFZDIENvcGlsb3QgYW5hbHl6aW5nIHN0YXJ0dXAuLi4nKVxuICAgIHRoaXMuc3RhdHVzLnNldEF0dHIoJ3RpdGxlJywgJ1ZDIENvcGlsb3QgaXMgYW5hbHl6aW5nIHRoZSBzdGFydHVwLi4uJylcbiAgICBsZXQgcmVwbGllcyA9IGF3YWl0IG9wZW5haV9qc19tdWx0aXR1cm4odXNlcl9xdWVyaWVzLCBzeXN0ZW1fcHJvbXB0LCAxMDI0LCAxLjApXG5cbiAgICByZXBsaWVzWzBdID0gJyMjIyMgQ29yZSBQcm9ibGVtXFxuJyArIHJlcGxpZXNbMF0gKyAnXFxuJ1xuICAgIHJlcGxpZXNbMV0gPSAnIyMjIyBIeXBvdGhlc2VzXFxuJyArIHJlcGxpZXMgWzFdICsgJ1xcbidcbiAgICByZXBsaWVzIFsyXSA9ICcjIyMjIENhdGVnb3JpZXNcXG4nICsgcmVwbGllc1syXSArICdcXG4nXG5cbiAgICBsZXQgZmluYWxfdGV4dCA9IHJlcGxpZXNbMF0gKyByZXBsaWVzWzFdICsgcmVwbGllc1syXVxuXG4gICAgZWRpdG9yLnJlcGxhY2VSYW5nZShmaW5hbF90ZXh0LCBlZGl0b3IuZ2V0Q3Vyc29yKCkpO1xuXG4gICAgdGhpcy5zdGF0dXMuc2V0VGV4dCgnXHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVERTgwOiBWQyBDb3BpbG90IHJlYWR5JylcbiAgICB0aGlzLnN0YXR1cy5zZXRBdHRyKCd0aXRsZScsICdWQyBDb3BpbG90IGlzIHJlYWR5JylcblxuXG5cbn1cblxuICAgIFxuXG59XG5cbmNsYXNzIFZDQ29waWxvdFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYntcbiAgICBwbHVnaW46IFZDQ29waWxvdFBsdWdpblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZDQ29waWxvdFBsdWdpbil7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICAgIH1cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnU2V0dGluZ3MgZm9yIHlvdXIgY29waWxvdCd9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgS2V5JylcbiAgICAgICAgLnNldERlc2MoJ1lvdXIgT3BlbkFJIEFQSSBLZXknKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIga2V5JylcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuQUlLZXkpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbkFJS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnQWZmaW5pdHk6IEFQSSBLZXknKVxuICAgICAgICAuc2V0RGVzYygnWW91ciBBZmZpbml0eSBBUEkgS2V5JylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGtleScpXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWZmaW5pdHlLZXkpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWZmaW5pdHlLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKCdBZmZpbml0eTogT3duZXIgVmFsdWUnKVxuICAgICAgICAuc2V0RGVzYygnRXZlcnkgcGVyc29uIGhhcyBhIGNvZGUgb24gQWZmaW5pdHkuIFBsZWFzZSBnaXZlIGluIHRoZSBjb2RlIGZvciB0aGUgcGVyc29uIHRoYXQgc2hvdWxkIGJlIGFkZGVkIGFzIG93bmVyIG9mIHN0YXJ0dXBzIGFuZCBWQ3MgdGhhdCBnZXRzIHB1c2hlZCcpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB2YWx1ZScpXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3duZXJfcGVyc29uX3ZhbHVlKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm93bmVyX3BlcnNvbl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ0FmZmluaXR5OiBDb25uZWN0aW9uIE93bmVyIEZpZWxkIElEJylcbiAgICAgICAgLnNldERlc2MoJ0RlcGVuZGluZyBvbiB0aGUgbGlzdCB5b3Ugc2F2ZSBmZWxsb3cgVkNzIGluLCB0aGVyZSBpcyBhIGZpZWxkIHRoYXQgcmVwcmVzZW50IHRoZSBcXCdjb25uZWN0aW9uIG93bmVyIHdpdGggdGhlIGZ1bmRcXCcsIGVudGVyIHRoZSBmaWVsZCBpZCBoZXJlJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHZhbHVlJylcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25uZWN0aW9uX293bmVyX2ZpZWxkX2lkKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbm5lY3Rpb25fb3duZXJfZmllbGRfaWQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKCdBZmZpbml0eTogVmVudHVyZSBOZXR3b3JrIExpc3QgSUQnKVxuICAgICAgICAuc2V0RGVzYygnUGxlYXNlIGVudGVyIHRoZSBsaXN0IGlkIGZvciB0aGUgbGlzdCB5b3Ugc2F2ZSB5b3VyIHJlbGF0aW9uc2hpcHMgd2l0aCBWQ3MgaW4nKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdmFsdWUnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZlbnR1cmVfbmV0d29ya19saXN0X2lkKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZlbnR1cmVfbmV0d29ya19saXN0X2lkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIFxuXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnSW52ZXN0b3IgTmFtZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHRoZSBuYW1lcyBvZiB5b3VyIHRlYW0gbWVtYmVycyAoaW52ZXN0b3JzKSBzZXBhcmF0ZWQgYnkgYSBjb21tYS4gVGhpcyBoZWxwcyB0aGUgRmlyZWZsaWVzIHN1bW1hcml6ZXIgdG8gZm9jdXMgbW9yZSBvbiB0aGUgZm91bmRlcicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAvLy5zZXRQbGFjZWhvbGRlcignQmVuIEhvcnJvd2l0eiwuLi4nKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZWFtX25hbWVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnT3BlbiBBSSBrZXk6ICcgKyB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRlYW1fbmFtZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRmlyZWZsaWVzIEFQSSBLZXknKVxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHRoZSBGaXJlZmxpZXMgQVBJIEtleScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlyZWZsaWVzX2FwaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcmVmbGllc19hcGkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpOyAgICAgICAgIFxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1lvdS5jb20gQVBJIEtleScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgdGhlIFlvdS5jb20gQVBJIEtleScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MueW91X2FwaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnlvdV9hcGkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpOyBcblx0fVxuXG59IiwgImltcG9ydCB7cmVxdWVzdH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgdHlwZSB9IGZyb20gJ29zJztcblxubGV0IHVybF9hZmZpbml0eV9vcmdhbml6YXRpb25zID0gXCJodHRwczovL2FwaS5hZmZpbml0eS5jby9vcmdhbml6YXRpb25zXCJcbmxldCB1cmxfYWZmaW5pdHlfbm90ZSA9IFwiaHR0cHM6Ly9hcGkuYWZmaW5pdHkuY28vbm90ZXNcIlxubGV0IHVybF9hZmZpbml0eV9wZXJzb25zID0gXCJodHRwczovL2FwaS5hZmZpbml0eS5jby9wZXJzb25zXCJcbmxldCB1cmxfYWZmaW5pdHlfZmllbGRfdmFsdWVzID0gXCJodHRwczovL2FwaS5hZmZpbml0eS5jby9maWVsZC12YWx1ZXNcIlxubGV0IHVybF9hZmZpbml0eV9saXN0ID0gXCJodHRwczovL2FwaS5hZmZpbml0eS5jby9saXN0c1wiXG5cbmZ1bmN0aW9uIGFmZmluaXR5X2F1dGhvcml6YXRpb24oYWZmaW5pdHlBUElLZXk6IHN0cmluZyl7XG4gICAgbGV0IHVzZXJuYW1lID0gJydcbiAgICBsZXQgcHdkID0gYWZmaW5pdHlBUElLZXlcbiAgICBsZXQgYXV0aCA9IFwiQmFzaWMgXCIgKyBCdWZmZXIuZnJvbSh1c2VybmFtZSArICc6JyArIHB3ZCkudG9TdHJpbmcoXCJiYXNlNjRcIik7XG4gICAgbGV0IGhlYWRlcnMgPSB7QXV0aG9yaXphdGlvbjogYXV0aCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ31cbiAgICByZXR1cm4gaGVhZGVycztcblxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkX25vdGVzX3RvX2NvbXBhbnkoc3RhcnR1cDogYW55LCBub3RlOiBzdHJpbmcsIGFmZmluaXR5QVBJS2V5OiBzdHJpbmcpe1xuICAgIGxldCBoZWFkZXJzID0gYWZmaW5pdHlfYXV0aG9yaXphdGlvbihhZmZpbml0eUFQSUtleSlcbiAgICAvL2hlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgbGV0IG9yZ2FuaXphdGlvbl9pZHMgPSBbc3RhcnR1cFsnaWQnXV1cbiAgICBjb25zb2xlLmxvZyhvcmdhbml6YXRpb25faWRzKVxuICAgIGNvbnNvbGUubG9nKG5vdGUpXG4gICAgbGV0IG5vdGVfZGF0YSA9IHtvcmdhbml6YXRpb25faWRzOiBbc3RhcnR1cFsnaWQnXV0sIGNvbnRlbnQ6IG5vdGUgICB9XG4gICAgbGV0IHI6IGFueSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IHVybF9hZmZpbml0eV9ub3RlLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobm90ZV9kYXRhKVxuICAgIH0pLnRoZW4oZGF0YSA9PiBjb25zb2xlLmxvZyhkYXRhKSkuY2F0Y2goZXJyb3IgPT4ge2NvbnNvbGUuZXJyb3IoZXJyb3IpOyBpZiAoZXJyb3Ipe3JldHVybiBudWxsfSB9KVxuICAgIHJldHVybiBcIlN1Y2Nlc3NcIjtcbiAgICAvL2NvbnNvbGUubG9nKHIpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRfc3RhcnR1cF9ieV9uYW1lKGFmZmluaXR5QVBJS2V5OiBzdHJpbmcsIG93bmVyX3ZhbHVlOiBzdHJpbmcsIHN0YXJ0dXBfbmFtZTogc3RyaW5nKXtcbiAgICAvL2xldCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zICh7dGVybTogJ0Jsb2JyJywgd2l0aF9pbnRlcmFjdGlvbl9kYXRlczondHJ1ZScsIHdpdGhfaW50ZXJhY3Rpb25fcGVyc29uczondHJ1ZScsIHBhZ2VfdG9rZW46ICcnfSlcbiAgICBcblxuICAgIC8vbGV0IGNvbXBhbnlfbmFtZSA9ICdCbG9icidcbiAgICBsZXQgc3VibmFtZXMgPSBzdGFydHVwX25hbWUuc3BsaXQoJyAnKVxuICAgIGxldCBzZWFyY2hfdGVybSA9IHN1Ym5hbWVzWzBdXG4gICAgaWYgKHN1Ym5hbWVzLmxlbmd0aCA+IDEpe1xuICAgICAgICBmb3IgKGxldCBuYW1lIG9mIHN1Ym5hbWVzLnNsaWNlKDEpKXtcbiAgICAgICAgICAgIHNlYXJjaF90ZXJtID0gc2VhcmNoX3Rlcm0gKyAnKycgKyBuYW1lXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coc2VhcmNoX3Rlcm0pXG5cbiAgICBsZXQgbmV4dF9wYWdlX3Rva2VuID0gbnVsbFxuICAgIGxldCBoZWFkZXJzID0gYWZmaW5pdHlfYXV0aG9yaXphdGlvbihhZmZpbml0eUFQSUtleSlcbiAgICBcbiAgICBcbiAgICB3aGlsZSh0cnVlKXtcbiAgICAgICAgbGV0IGZ1bGxfdXJsID0gdXJsX2FmZmluaXR5X29yZ2FuaXphdGlvbnMgKyAnP3Rlcm09JyArIHNlYXJjaF90ZXJtICsgJyZ3aXRoX2ludGVyYWN0aW9uX2RhdGVzPXRydWUmd2l0aF9pbnRlcmFjdGlvbl9wZXJzb25zPXRydWUnXG4gICAgICAgIGlmIChuZXh0X3BhZ2VfdG9rZW4gIT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgZnVsbF91cmwgKz0gJyZwYWdlX3Rva2VuPScgKyBuZXh0X3BhZ2VfdG9rZW5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IHI6IGFueSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgdXJsOiBmdWxsX3VybCxcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnN9KVxuICAgIFxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHIpXG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UpXG4gICAgICAgIGxldCBvcmdhbml6YXRpb25zID0gcmVzcG9uc2VbJ29yZ2FuaXphdGlvbnMnXVxuICAgICAgICBuZXh0X3BhZ2VfdG9rZW4gPSByZXNwb25zZVsnbmV4dF9wYWdlX3Rva2VuJ11cbiAgICAgICAgZm9yIChsZXQgb3JnYW5pemF0aW9uIG9mIG9yZ2FuaXphdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3JnYW5pemF0aW9uWydpbnRlcmFjdGlvbnMnXSl7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cob3JnYW5pemF0aW9uKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IFtpbnRlcmFjdGlvbl9uYW1lLCBpbnRlcmFjdGlvbl9kYXRhXSBvZiBPYmplY3QuZW50cmllcyhvcmdhbml6YXRpb25bJ2ludGVyYWN0aW9ucyddKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb25fZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGVvcGxlX2ludm9sdmVkOiBhbnkgPSBpbnRlcmFjdGlvbl9kYXRhWydwZXJzb25faWRzJ10udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZW9wbGVfaW52b2x2ZWQuaW5jbHVkZXMob3duZXJfdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZ2FuaXphdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vY29uc29sZS5sb2cobmV4dF9wYWdlX3Rva2VuKVxuICAgICAgICBpZiAobmV4dF9wYWdlX3Rva2VuID09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxufVxuXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRfcGVyc29uX2J5X25hbWUoYWZmaW5pdHlBUElLZXk6IHN0cmluZywgcGVyc29uX25hbWU6IHN0cmluZyl7XG4gICAgbGV0IG5hbWVzID0gcGVyc29uX25hbWUuc3BsaXQoJyAnKVxuICAgIGlmIChuYW1lcy5sZW5ndGggPiAxKXtcbiAgICAgICAgbGV0IG5leHRfcGFnZV90b2tlbiA9IG51bGxcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBhZmZpbml0eV9hdXRob3JpemF0aW9uKGFmZmluaXR5QVBJS2V5KVxuICAgICAgICBsZXQgZmlyc3RfbmFtZSA9IG5hbWVzWzBdXG4gICAgICAgIGxldCBsYXN0X25hbWUgPSBuYW1lc1sxXVxuICAgICAgICB3aGlsZSh0cnVlKXtcbiAgICAgICAgICAgIGxldCBmdWxsX3VybCA9IHVybF9hZmZpbml0eV9wZXJzb25zICsgJz90ZXJtPScgKyBsYXN0X25hbWVcbiAgICAgICAgICAgIGlmIChuZXh0X3BhZ2VfdG9rZW4gIT0gbnVsbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmdWxsX3VybCArPSAnJnBhZ2VfdG9rZW49JyArIG5leHRfcGFnZV90b2tlblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHI6IGFueSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHVybDogZnVsbF91cmwsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnN9KVxuICAgICAgICBcbiAgICAgICAgICAgIGxldCByZXNwb25zZSA9IEpTT04ucGFyc2UocilcbiAgICAgICAgICAgIGxldCBwZW9wbGUgPSByZXNwb25zZVsncGVyc29ucyddXG4gICAgICAgICAgICBuZXh0X3BhZ2VfdG9rZW4gPSByZXNwb25zZVsnbmV4dF9wYWdlX3Rva2VuJ11cblxuICAgICAgICAgICAgZm9yIChsZXQgcGVyc29uIG9mIHBlb3BsZSl7XG4gICAgICAgICAgICAgICAgaWYgKHBlcnNvblsnZmlyc3RfbmFtZSddID09IGZpcnN0X25hbWUgJiYgcGVyc29uWydsYXN0X25hbWUnXSA9PSBsYXN0X25hbWUpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGVyc29uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV4dF9wYWdlX3Rva2VuID09IG51bGwpe1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuXG5cbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgLy9XZSBvbmx5IGhhdmUgZmlyc3QgbmFtZSwgd2UgY2FuIG5vdCBmaW5kIGEgcGVyc29uIGxpa2UgdGhpc1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0X3BlcnNvbl9kZXRhaWxzKGFmZmluaXR5QVBJS2V5OiBzdHJpbmcsIHBlcnNvbl9pZDogbnVtYmVyKXtcbiAgICBsZXQgZnVsbF91cmwgPSB1cmxfYWZmaW5pdHlfcGVyc29ucyArICcvJyArIHBlcnNvbl9pZC50b1N0cmluZygpXG4gICAgbGV0IGhlYWRlcnMgPSBhZmZpbml0eV9hdXRob3JpemF0aW9uKGFmZmluaXR5QVBJS2V5KVxuXG4gICAgbGV0IHI6IGFueSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGZ1bGxfdXJsLFxuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnN9KVxuICAgIGxldCByZXNwb25zZSA9IEpTT04ucGFyc2UocilcblxuICAgIHJldHVybiByZXNwb25zZVxuICAgIFxuXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc19wZXJzb25faW5fdmVudHVyZV9uZXR3b3JrKGFmZmluaXR5QVBJS2V5OiBzdHJpbmcsIHBlcnNvbl9kZXRhaWxzOiBhbnksIHZlbnR1cmVfbmV0d29ya19saXN0X2lkOiBzdHJpbmcpe1xuICAgIGxldCBsaXN0X2VudHJpZXMgPSBwZXJzb25fZGV0YWlsc1snbGlzdF9lbnRyaWVzJ11cbiAgICBmb3IgKGxldCBlbnRyeSBvZiBsaXN0X2VudHJpZXMpe1xuICAgICAgICBpZiAoZW50cnlbJ2xpc3RfaWQnXS50b1N0cmluZygpID09IHZlbnR1cmVfbmV0d29ya19saXN0X2lkLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5WydpZCddXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcblxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0X2ZpZWxkX3ZhbHVlcyhhZmZpbml0eUFQSUtleTogc3RyaW5nLCB0eXBlX2lkOiBzdHJpbmcsIGlkOiBzdHJpbmcpe1xuICAgIGxldCBmdWxsX3VybCA9IHVybF9hZmZpbml0eV9maWVsZF92YWx1ZXMgKyAnPycrdHlwZV9pZCsnPScgKyBpZFxuICAgIGxldCBoZWFkZXJzID0gYWZmaW5pdHlfYXV0aG9yaXphdGlvbihhZmZpbml0eUFQSUtleSlcbiAgICBsZXQgcjogYW55ID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogZnVsbF91cmwsXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczogaGVhZGVyc30pXG4gICAgbGV0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShyKVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlXG5cblxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkX2VudHJ5X3RvX2xpc3QoYWZmaW5pdHlBUElLZXk6IHN0cmluZywgbGlzdF9pZDogc3RyaW5nLCBlbnRpdHlfaWQ6IG51bWJlcil7XG4gICAgbGV0IGhlYWRlcnMgPSBhZmZpbml0eV9hdXRob3JpemF0aW9uKGFmZmluaXR5QVBJS2V5KVxuICAgIGxldCBmdWxsX3VybCA9IHVybF9hZmZpbml0eV9saXN0ICsgJy8nICsgbGlzdF9pZCArICcvbGlzdC1lbnRyaWVzJ1xuICAgIGxldCBkYXRhID0ge2VudGl0eV9pZDogZW50aXR5X2lkfVxuXG4gICAgbGV0IHI6IGFueSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGZ1bGxfdXJsLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KS50aGVuKGRhdGEgPT4gY29uc29sZS5sb2coZGF0YSkpLmNhdGNoKGVycm9yID0+IHtjb25zb2xlLmVycm9yKGVycm9yKTsgaWYgKGVycm9yKXtyZXR1cm4gbnVsbH0gfSlcbiAgICBcbiAgICByZXR1cm4gXCJTdWNjZXNzXCI7XG5cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRfZmllbGRfdmFsdWUoYWZmaW5pdHlBUElLZXk6IHN0cmluZywgZmllbGRfaWQ6IGFueSwgZW50aXR5X2lkOiBudW1iZXIsIHZhbHVlOiBhbnksIGxpc3RfZW50cnlfaWQ6IGFueSl7XG5cbiAgICBsZXQgaGVhZGVycyA9IGFmZmluaXR5X2F1dGhvcml6YXRpb24oYWZmaW5pdHlBUElLZXkpXG4gICAgbGV0IGZ1bGxfdXJsID0gdXJsX2FmZmluaXR5X2ZpZWxkX3ZhbHVlcyBcbiAgICBsZXQgZGF0YSA9IHtmaWVsZF9pZDogZmllbGRfaWQsIGVudGl0eV9pZDogZW50aXR5X2lkLCB2YWx1ZTogdmFsdWUsIGxpc3RfZW50cnlfaWQ6IGxpc3RfZW50cnlfaWR9XG5cbiAgICBsZXQgcjogYW55ID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogZnVsbF91cmwsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pLnRoZW4oZGF0YSA9PiBjb25zb2xlLmxvZyhkYXRhKSkuY2F0Y2goZXJyb3IgPT4ge2NvbnNvbGUuZXJyb3IoZXJyb3IpOyBpZiAoZXJyb3Ipe3JldHVybiBudWxsfSB9KVxuICAgIFxuICAgIHJldHVybiBcIlN1Y2Nlc3NcIjtcblxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkX25vdGVzX3RvX3BlcnNvbihhZmZpbml0eUFQSUtleTogc3RyaW5nLCBwZXJzb25faWQ6IGFueSwgbm90ZXM6IHN0cmluZyl7XG4gICAgbGV0IGZ1bGxfdXJsID0gdXJsX2FmZmluaXR5X25vdGVcbiAgICBsZXQgaGVhZGVycyA9IGFmZmluaXR5X2F1dGhvcml6YXRpb24oYWZmaW5pdHlBUElLZXkpXG4gICAgbGV0IGRhdGEgPSB7cGVyc29uX2lkczogW3BlcnNvbl9pZF0sIGNvbnRlbnQ6IG5vdGVzfVxuXG4gICAgbGV0IHI6IGFueSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGZ1bGxfdXJsLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KS50aGVuKGRhdGEgPT4gY29uc29sZS5sb2coZGF0YSkpLmNhdGNoKGVycm9yID0+IHtjb25zb2xlLmVycm9yKGVycm9yKTsgaWYgKGVycm9yKXtyZXR1cm4gbnVsbH0gfSlcblxuICAgIHJldHVybiBcIlN1Y2Nlc3NcIlxuXG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBUZXh0SW5wdXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBpbnB1dDogc3RyaW5nO1xuICAgIG9uc3VibWl0OiAoaW5wdXQ6IHN0cmluZykgPT4gdm9pZDtcbiAgICB0eXBlOiBzdHJpbmc7XG4gIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0eXBlOnN0cmluZywgIG9uc3VibWl0OiAoaW5wdXQ6IHN0cmluZykgPT4gdm9pZCkge1xuICAgICAgc3VwZXIoYXBwKTtcbiAgICAgIHRoaXMub25zdWJtaXQgPSBvbnN1Ym1pdDtcbiAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgfVxuXG4gIFxuICAgIG9uT3BlbigpIHtcbiAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgbGV0IHRpdGxlID0gJydcbiAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ21hcmtldC1yZXNlYXJjaCcpe3RpdGxlID0gJ1doYXQgaW5kdXN0cnkgZG8geW91IHdhbnQgdG8gcmVzZWFyY2g/J31cbiAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ2RlZmVuc2liaWxpdHknKXt0aXRsZSA9ICdEZXNjcmliZSB0aGUgc3RhcnR1cCB3aG9zZSBkZWZlbnNpYmlsaXR5IGlzIHRvIGJlIGV2YWx1YXRlZCd9XG4gICAgICBpZiAodGhpcy50eXBlID09ICdldmFsdWF0ZScpe3RpdGxlID0gJ0Rlc2NyaWJlIHRoZSBzdGFydHVwIHRvIGJlIGV2YWx1YXRlZCd9XG4gICAgICBpZiAodGhpcy50eXBlID09ICdmaXJlZmxpZXMtc3VtbWFyeScpIHt0aXRsZSA9ICdJbnNlcnQgdGhlIG5hbWUgb2YgdGhlIGZpcmVmbGllcyByZWNvcmRpbmcvbWVldGluZyB5b3Ugd291bGQgbGlrZSB0byBzdW1tYXJpemUnfVxuICAgICAgaWYgKHRoaXMudHlwZSA9PSAnSGFja2VyTmV3cyBSZXNlYXJjaCcpIHtcbiAgICAgICAgdGl0bGUgPSAnV2hhdCB0b3BpYyB3b3VsZCB5b3UgbGlrZSB0byByZXNlYXJjaCBvbiBIYWNrZXJuZXdzPydcbiAgICAgICAgbGV0IHF1ZXJ5ID0gbmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKFwiU2VhcmNoIFF1ZXJ5XCIpLmFkZFRleHQoKHRleHQpID0+IHt9KVxuICAgICAgICBsZXQgd2ViID0gbmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKFwiV2Vic2l0ZSB0byBTZWFyY2hcIikuYWRkVGV4dCgodGV4dCkgPT4ge30pXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGl0bGUgfSk7XG5cblxuXG4gICAgICBcbiAgXG4gICAgICBjb25zdCBpbnB1dEVsID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScpO1xuXG5cblxuXG5cblxuXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSk7XG4gIFxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTdWJtaXQnIH0pO1xuICAgICAgc3VibWl0QnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgIHN1Ym1pdEJ1dHRvbi5zdHlsZS5ib3R0b20gPSAnMCc7XG4gICAgICBzdWJtaXRCdXR0b24uc3R5bGUucmlnaHQgPSAnMCdcbiAgICAgIFxuICAgICAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLm9uc3VibWl0KGlucHV0RWwudmFsdWUpOyAvL2lucHV0RWwudmFsdWVcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgXG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNdWx0aXBsZVRleHRJbnB1dE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBpbnB1dDogc3RyaW5nO1xuICBvbnN1Ym1pdDogKGlucHV0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHR5cGU6IHN0cmluZztcbiAgcXVlcnk6IHN0cmluZztcbiAgd2Vic2l0ZTogc3RyaW5nO1xuICB0YXNrOiBzdHJpbmc7XG5cblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdHlwZTpzdHJpbmcsICBvbnN1Ym1pdDogKGlucHV0OiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMub25zdWJtaXQgPSBvbnN1Ym1pdDtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgbGV0IHRpdGxlID0gJ1doYXQgdG9waWMgd291bGQgeW91IGxpa2UgdG8gcmVzZWFyY2ggdG9kYXk/J1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRpdGxlIH0pO1xuXG4gICAgbGV0IHF1ZXJ5ID0gbmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKFwiU2VhcmNoIFF1ZXJ5XCIpLmFkZFRleHQoKHRleHQpID0+IHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7dGhpcy5xdWVyeSA9IHZhbHVlfSkpXG4gICAgbGV0IHdlYiA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIldlYnNpdGUgdG8gU2VhcmNoXCIpLmFkZFRleHQoKHRleHQpID0+IHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7dGhpcy53ZWJzaXRlID0gdmFsdWV9KSlcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIlRhc2sgdG8gZG9cIikuYWRkRHJvcGRvd24oKG1lbnUpID0+IHtcbiAgICAgIG1lbnUuYWRkT3B0aW9uKFwiY29tcGV0aXRpb25cIiwgXCJGaW5kICYgQW5hbHl6ZSBjb21wZXRpdG9yc1wiKVxuICAgICAgbWVudS5zZXRWYWx1ZShcIi4uLi5cIilcbiAgICAgIG1lbnUub25DaGFuZ2UoKHZhbHVlKSA9PiB7dGhpcy50YXNrID0gdmFsdWV9KVxuICAgIH0pXG5cbiAgICBsZXQgYnV0dG9uID0gbmV3IFNldHRpbmcoY29udGVudEVsKS5hZGRCdXR0b24oKGJ0bikgPT4ge1xuICAgICAgYnRuLnNldEJ1dHRvblRleHQoXCJTdWJtaXRcIikuc2V0Q3RhKCkub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5vbnN1Ym1pdCh0aGlzLndlYnNpdGUgKyAnLCAnICsgdGhpcy5xdWVyeSArICcsICcgKyB0aGlzLnRhc2spXG5cbiAgICB9KX0pXG5cblxuXG5cblxuXG5cbiAgICBcbiAgfVxuXG4gIFxuXG59XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7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
